<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <meta name="theme-color" content="#D4AF37">
    <title>Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„Ø§Ù†ØµØ±Ø§Ù - Ù†Ø®Ø¨Ø© Ø§Ù„Ø¹ÙˆØ¯</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700;800&display=swap');
        
        /* Login System Styles */
        .login-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #4facfe 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 3000;
            backdrop-filter: blur(10px);
            overflow: hidden;
        }
        
        .login-container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: 
                radial-gradient(circle at 30% 70%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 70% 30%, rgba(255, 255, 255, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.05) 0%, transparent 50%);
            animation: loginBackgroundFloat 20s ease-in-out infinite;
        }
        
        @keyframes loginBackgroundFloat {
            0%, 100% { transform: rotate(0deg) scale(1); }
            25% { transform: rotate(90deg) scale(1.1); }
            50% { transform: rotate(180deg) scale(1); }
            75% { transform: rotate(270deg) scale(1.1); }
        }
        
        .login-container.hidden {
            display: none;
        }
        
        .login-card {
            background: rgba(212, 175, 55, 0.08);
            backdrop-filter: blur(30px);
            border: 2px solid var(--oud-gold);
            border-radius: 30px;
            padding: 50px;
            width: 90%;
            max-width: 500px;
            text-align: center;
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.3),
                0 0 40px rgba(212, 175, 55, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            animation: loginCardAppear 1s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            z-index: 10;
        }
        
        .login-card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, var(--oud-gold), var(--oud-amber), var(--oud-bronze), var(--oud-gold));
            border-radius: 32px;
            z-index: -1;
            animation: loginBorderGlow 3s ease-in-out infinite;
        }
        
        @keyframes loginBorderGlow {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
        }
        
        @keyframes loginCardAppear {
            0% {
                opacity: 0;
                transform: scale(0.8) translateY(50px);
            }
            100% {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }
        
        .login-logo {
            font-size: 4rem;
            margin-bottom: 20px;
            animation: logoGlow 2s ease-in-out infinite;
        }
        
        @keyframes logoGlow {
            0%, 100% { 
                filter: drop-shadow(0 0 20px rgba(212, 175, 55, 0.6));
                transform: scale(1);
            }
            50% { 
                filter: drop-shadow(0 0 30px rgba(255, 191, 0, 0.8));
                transform: scale(1.05);
            }
        }
        
        .login-title {
            color: var(--oud-gold);
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 10px;
        }
        
        .login-subtitle {
            color: var(--oud-cream);
            font-size: 1rem;
            margin-bottom: 30px;
            opacity: 0.8;
        }
        
        .login-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .login-input-group {
            position: relative;
        }
        
        .login-input {
            width: 100%;
            padding: 18px 25px 18px 55px;
            border: 2px solid rgba(212, 175, 55, 0.3);
            border-radius: 18px;
            background: rgba(245, 245, 220, 0.05);
            color: var(--oud-cream);
            font-family: 'Cairo', sans-serif;
            font-size: 1.1rem;
            font-weight: 500;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }
        
        .login-input::placeholder {
            color: rgba(245, 245, 220, 0.6);
            font-weight: 400;
        }
        
        .login-input:focus {
            outline: none;
            border-color: var(--oud-gold);
            background: rgba(245, 245, 220, 0.12);
            box-shadow: 
                0 0 30px rgba(212, 175, 55, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }
        
        .login-input:valid {
            border-color: #10b981;
            box-shadow: 0 0 20px rgba(16, 185, 129, 0.2);
        }
        
        .login-input-icon {
            position: absolute;
            left: 18px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--oud-gold);
            font-size: 1.4rem;
            transition: all 0.3s ease;
            z-index: 5;
        }
        
        .login-input-group:focus-within .login-input-icon {
            color: var(--oud-amber);
            transform: translateY(-50%) scale(1.1);
            filter: drop-shadow(0 0 8px rgba(212, 175, 55, 0.6));
        }
        
        .login-btn {
            padding: 18px 40px;
            background: var(--gradient-primary);
            color: var(--oud-black);
            border: none;
            border-radius: 18px;
            font-family: 'Cairo', sans-serif;
            font-size: 1.2rem;
            font-weight: 800;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            margin-top: 15px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 6px 20px rgba(212, 175, 55, 0.3);
        }
        
        .login-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }
        
        .login-btn:hover::before {
            left: 100%;
        }
        
        .login-btn:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 12px 35px rgba(212, 175, 55, 0.5);
        }
        
        .login-btn:active {
            transform: translateY(-1px) scale(0.98);
        }
        
        .login-error {
            color: #ff6b6b;
            font-size: 0.9rem;
            margin-top: 10px;
            padding: 10px;
            background: rgba(255, 107, 107, 0.1);
            border-radius: 8px;
            border: 1px solid rgba(255, 107, 107, 0.3);
            display: none;
        }
        
        .demo-credentials {
            margin-top: 20px;
            padding: 15px;
            background: rgba(212, 175, 55, 0.1);
            border-radius: 10px;
            border: 1px solid var(--oud-gold);
        }
        
        .demo-title {
            color: var(--oud-gold);
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .demo-user {
            color: var(--oud-cream);
            font-size: 0.9rem;
            margin: 5px 0;
        }
        
        :root {
            /* Ù†Ø®Ø¨Ø© Ø§Ù„Ø¹ÙˆØ¯ - Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„ÙØ§Ø®Ø±Ø© */
            --oud-gold: #D4AF37;
            --oud-gold-light: #F4E4A6;
            --oud-gold-dark: #B8941F;
            --oud-brown: #8B4513;
            --oud-brown-light: #CD853F;
            --oud-brown-dark: #654321;
            --oud-cream: #F5F5DC;
            --oud-black: #1C1C1C;
            --oud-white: #FEFEFE;
            --oud-bronze: #CD7F32;
            --oud-amber: #FFBF00;
            
            /* Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© */
            --primary: var(--oud-gold);
            --secondary: var(--oud-brown);
            --accent: var(--oud-amber);
            --success: #2D5016;
            --warning: #8B4513;
            --error: #722F37;
            --info: var(--oud-bronze);
            
            /* Ø§Ù„ØªØ¯Ø±Ø¬Ø§Øª Ø§Ù„ÙØ§Ø®Ø±Ø© */
            --gradient-primary: linear-gradient(135deg, var(--oud-gold) 0%, var(--oud-amber) 100%);
            --gradient-secondary: linear-gradient(135deg, var(--oud-brown) 0%, var(--oud-brown-dark) 100%);
            --gradient-luxury: linear-gradient(135deg, var(--oud-gold) 0%, var(--oud-bronze) 50%, var(--oud-brown) 100%);
            --gradient-elegant: linear-gradient(135deg, var(--oud-cream) 0%, var(--oud-gold-light) 100%);
            
            /* Ø§Ù„Ø²Ø¬Ø§Ø¬ Ø§Ù„Ù…ÙˆØ±Ù Ø§Ù„ÙØ§Ø®Ø± */
            --glass-bg: rgba(212, 175, 55, 0.15);
            --glass-border: rgba(212, 175, 55, 0.25);
            --shadow-luxury: 0 8px 32px rgba(212, 175, 55, 0.2);
            --shadow-elegant: 0 12px 40px rgba(139, 69, 19, 0.15);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Cairo', sans-serif;
            background: linear-gradient(135deg, var(--oud-brown) 0%, var(--oud-brown-dark) 30%, var(--oud-black) 70%, #0F0F0F 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        /* Ø®Ù„ÙÙŠØ© Ù†Ø®Ø¨Ø© Ø§Ù„Ø¹ÙˆØ¯ Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© Ø§Ù„ÙØ§Ø®Ø±Ø© */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(212, 175, 55, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(205, 127, 50, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(255, 191, 0, 0.2) 0%, transparent 50%);
            animation: oudBackgroundMove 25s ease-in-out infinite;
            z-index: -1;
        }
        
        @keyframes oudBackgroundMove {
            0%, 100% { transform: translateX(0) translateY(0) rotate(0deg); }
            25% { transform: translateX(-30px) translateY(-15px) rotate(1deg); }
            50% { transform: translateX(30px) translateY(15px) rotate(-1deg); }
            75% { transform: translateX(-15px) translateY(30px) rotate(0.5deg); }
        }
        
        /* Ø²Ø¬Ø§Ø¬ Ù…ÙˆØ±Ù Ù†Ø®Ø¨Ø© Ø§Ù„Ø¹ÙˆØ¯ Ø§Ù„ÙØ§Ø®Ø± */
        .ai-glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid var(--glass-border);
            box-shadow: var(--shadow-luxury);
            border-radius: 25px;
            overflow: hidden;
        }
        
        /* Beautiful Clock Component */
        .ai-clock-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 30px;
            padding: 20px;
        }
        
        .ai-clock {
            position: relative;
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: var(--gradient-elegant);
            border: 3px solid var(--oud-gold);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 20px;
            box-shadow: 
                0 0 30px rgba(212, 175, 55, 0.4),
                inset 0 0 20px rgba(245, 245, 220, 0.2);
            animation: oudClockGlow 3s ease-in-out infinite;
        }
        
        @keyframes oudClockGlow {
            0%, 100% { 
                box-shadow: 
                    0 0 30px rgba(212, 175, 55, 0.4),
                    inset 0 0 20px rgba(245, 245, 220, 0.2);
            }
            50% { 
                box-shadow: 
                    0 0 40px rgba(212, 175, 55, 0.6),
                    inset 0 0 30px rgba(245, 245, 220, 0.3);
            }
        }
        
        .ai-clock::before {
            content: '';
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 3px;
            height: 35px;
            background: linear-gradient(to bottom, var(--oud-brown), var(--oud-brown-dark));
            border-radius: 2px;
            transform-origin: bottom center;
            animation: hourHand 43200s linear infinite;
            box-shadow: 0 0 5px rgba(139, 69, 19, 0.5);
        }
        
        .ai-clock::after {
            content: '';
            position: absolute;
            top: 5px;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 45px;
            background: linear-gradient(to bottom, var(--oud-gold), var(--oud-gold-dark));
            border-radius: 1px;
            transform-origin: bottom center;
            animation: minuteHand 3600s linear infinite;
            box-shadow: 0 0 5px rgba(212, 175, 55, 0.5);
        }
        
        .ai-clock-center {
            position: absolute;
            width: 10px;
            height: 10px;
            background: var(--oud-bronze);
            border: 2px solid var(--oud-gold);
            border-radius: 50%;
            z-index: 10;
            box-shadow: 0 0 10px rgba(205, 127, 50, 0.5);
        }
        
        .ai-clock-numbers {
            position: absolute;
            width: 100%;
            height: 100%;
        }
        
        .ai-clock-number {
            position: absolute;
            color: var(--oud-brown);
            font-weight: bold;
            font-size: 14px;
            text-shadow: 0 1px 2px rgba(139, 69, 19, 0.3);
        }
        
        .ai-clock-number:nth-child(1) { top: 5px; left: 50%; transform: translateX(-50%); }
        .ai-clock-number:nth-child(2) { top: 50%; right: 5px; transform: translateY(-50%); }
        .ai-clock-number:nth-child(3) { bottom: 5px; left: 50%; transform: translateX(-50%); }
        .ai-clock-number:nth-child(4) { top: 50%; left: 5px; transform: translateY(-50%); }
        
        @keyframes hourHand {
            0% { transform: translateX(-50%) rotate(0deg); }
            100% { transform: translateX(-50%) rotate(360deg); }
        }
        
        @keyframes minuteHand {
            0% { transform: translateX(-50%) rotate(0deg); }
            100% { transform: translateX(-50%) rotate(360deg); }
        }
        
        .ai-time-display {
            text-align: center;
        }
        
        .ai-digital-time {
            font-size: 3rem;
            font-weight: 800;
            background: var(--gradient-luxury);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 4px 8px rgba(0,0,0,0.1);
            margin-bottom: 10px;
            position: relative;
        }
        
        .ai-digital-time::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background: var(--gradient-primary);
            border-radius: 2px;
            animation: oudTimePulse 2s ease-in-out infinite;
        }
        
        @keyframes oudTimePulse {
            0%, 100% { opacity: 0.7; transform: translateX(-50%) scaleX(1); }
            50% { opacity: 1; transform: translateX(-50%) scaleX(1.1); }
        }
        
        .ai-date-display {
            color: var(--oud-gold-light);
            font-size: 1.2rem;
            font-weight: 600;
            text-shadow: 0 2px 4px rgba(139, 69, 19, 0.3);
        }
        
        /* Ø¬Ø¯ÙˆÙ„ Ù†Ø®Ø¨Ø© Ø§Ù„Ø¹ÙˆØ¯ Ø§Ù„ÙØ§Ø®Ø± */
        .ai-table-container {
            background: var(--glass-bg);
            backdrop-filter: blur(25px);
            border-radius: 25px;
            overflow: hidden;
            box-shadow: var(--shadow-luxury);
            border: 1px solid var(--glass-border);
        }
        
        .ai-table-header {
            background: var(--gradient-secondary);
            padding: 25px;
            border-bottom: 2px solid var(--oud-gold);
        }
        
        .ai-table-title {
            color: var(--oud-cream);
            font-size: 2rem;
            font-weight: 800;
            display: flex;
            align-items: center;
            justify-content: center;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }
        
        .ai-reports-icon {
            margin-left: 15px;
            font-size: 2.5rem;
            animation: oudReportsIconPulse 2s ease-in-out infinite;
            filter: drop-shadow(0 0 10px rgba(212, 175, 55, 0.6));
        }
        
        @keyframes oudReportsIconPulse {
            0%, 100% { 
                transform: scale(1) rotate(0deg);
                filter: drop-shadow(0 0 10px rgba(212, 175, 55, 0.6));
            }
            50% { 
                transform: scale(1.1) rotate(5deg);
                filter: drop-shadow(0 0 20px rgba(255, 191, 0, 0.8));
            }
        }
        
        .ai-modern-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .ai-modern-table th {
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.3) 0%, rgba(139, 69, 19, 0.3) 100%);
            color: var(--oud-cream);
            font-weight: 700;
            padding: 15px 8px;
            text-align: center;
            border-bottom: 2px solid var(--oud-gold);
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
            position: relative;
            font-size: 0.85rem;
            white-space: nowrap;
        }
        
        .ai-modern-table th::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: var(--gradient-primary);
        }
        
        .ai-modern-table td {
            padding: 12px 6px;
            border-bottom: 1px solid rgba(212, 175, 55, 0.1);
            color: var(--oud-cream);
            font-weight: 500;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            font-size: 0.8rem;
            white-space: nowrap;
        }
        
        .ai-modern-table tr:hover td {
            background: rgba(212, 175, 55, 0.08);
            transform: scale(1.01);
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.2);
        }
        
        .ai-modern-table tr:nth-child(even) td {
            background: rgba(139, 69, 19, 0.05);
        }
        
        /* Schedule Table Styles */
        .schedule-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.75rem;
        }
        
        .schedule-table th {
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.4) 0%, rgba(139, 69, 19, 0.4) 100%);
            color: var(--oud-cream);
            font-weight: 700;
            padding: 8px 4px;
            text-align: center;
            border: 1px solid var(--oud-gold);
            font-size: 0.7rem;
            white-space: nowrap;
        }
        
        .schedule-table td {
            padding: 6px 4px;
            border: 1px solid rgba(212, 175, 55, 0.2);
            text-align: center;
            font-size: 0.7rem;
            white-space: nowrap;
        }
        
        .employee-name {
            background: var(--gradient-primary);
            color: var(--oud-black);
            font-weight: 700;
            padding: 10px 8px !important;
            position: sticky;
            right: 0;
            z-index: 10;
        }
        
        .shift-cell {
            position: relative;
            min-width: 60px;
            padding: 10px 6px !important;
            text-align: center;
            border-radius: 8px;
            margin: 2px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .shift-cell:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .shift-4-10 {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            font-weight: 700;
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
        }
        
        .shift-9-3 {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            font-weight: 700;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
        }
        
        .shift-9-6 {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            color: white;
            font-weight: 700;
            box-shadow: 0 2px 8px rgba(139, 92, 246, 0.3);
        }
        
        .shift-11-8 {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
            font-weight: 700;
            box-shadow: 0 2px 8px rgba(245, 158, 11, 0.3);
        }
        
        .shift-1-10 {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
            font-weight: 700;
            box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
        }
        
        .shift-off {
            background: linear-gradient(135deg, #6b7280, #4b5563);
            color: white;
            font-weight: 700;
            box-shadow: 0 2px 8px rgba(107, 114, 128, 0.3);
        }
        
        .shift-annual {
            background: linear-gradient(135deg, #f97316, #ea580c);
            color: white;
            font-weight: 700;
            box-shadow: 0 2px 8px rgba(249, 115, 22, 0.3);
        }
        
        .shift-time {
            font-size: 0.8rem;
            font-weight: 800;
            display: block;
        }
        
        .shift-type {
            font-size: 0.6rem;
            opacity: 0.9;
            display: block;
            margin-top: 2px;
        }
        
        .date-header {
            min-width: 60px;
            font-size: 0.75rem;
            padding: 12px 8px !important;
            text-align: center;
            position: relative;
        }
        
        .date-number {
            font-size: 1rem;
            font-weight: 800;
            color: var(--oud-gold);
            display: block;
            margin-bottom: 4px;
        }
        
        .day-name {
            font-size: 0.7rem;
            opacity: 0.9;
            color: var(--oud-cream);
            font-weight: 600;
            display: block;
        }
        
        .weekend-header {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.3) 0%, rgba(220, 38, 38, 0.3) 100%) !important;
        }
        
        .weekend-header .date-number {
            color: #fca5a5;
        }
        
        /* Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ */
        .sidebar {
            position: fixed;
            top: 0;
            right: 0;
            width: 280px;
            height: 100vh;
            background: var(--gradient-secondary);
            backdrop-filter: blur(25px);
            border-left: 2px solid var(--oud-gold);
            transform: translateX(100%);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1000;
            overflow-y: auto;
            box-shadow: -10px 0 30px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
        }
        
        .sidebar.active {
            transform: translateX(0);
        }
        
        /* Overlay for sidebar */
        .sidebar-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
        }
        
        .sidebar-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .sidebar-header {
            padding: 30px 20px;
            border-bottom: 1px solid var(--oud-gold);
            text-align: center;
        }
        
        .sidebar-logo {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--oud-gold);
            margin-bottom: 10px;
        }
        
        .sidebar-subtitle {
            color: var(--oud-cream);
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .sidebar-menu {
            padding: 20px 0;
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .menu-item {
            display: flex;
            align-items: center;
            padding: 15px 25px;
            color: var(--oud-cream);
            text-decoration: none;
            transition: all 0.3s ease;
            border-right: 3px solid transparent;
        }
        
        .menu-item:hover,
        .menu-item.active {
            background: rgba(212, 175, 55, 0.2);
            border-right-color: var(--oud-gold);
            color: var(--oud-gold);
        }
        
        .menu-icon {
            font-size: 1.2rem;
            margin-left: 15px;
            width: 25px;
            text-align: center;
        }
        
        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø¹Ù„ÙˆÙŠØ© */
        .top-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 0 20px;
        }
        
        .control-group {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        
        .oud-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-family: 'Cairo', sans-serif;
            text-decoration: none;
        }
        
        .oud-btn-primary {
            background: var(--gradient-primary);
            color: var(--oud-black);
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
        }
        
        .oud-btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(212, 175, 55, 0.4);
        }
        
        .oud-btn-secondary {
            background: var(--gradient-secondary);
            color: var(--oud-cream);
            border: 1px solid var(--oud-gold);
        }
        
        .oud-btn-secondary:hover {
            background: var(--oud-gold);
            color: var(--oud-black);
        }
        
        .menu-toggle {
            background: var(--gradient-primary);
            color: var(--oud-black);
            border: none;
            padding: 12px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }
        
        .menu-toggle:hover {
            transform: scale(1.1);
        }
        
        /* Ù†Ø§ÙØ°Ø© Ù…Ù†Ø¨Ø«Ù‚Ø© Ù„Ù„Ø¥Ø¶Ø§ÙØ© */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
        }
        
        .modal.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            background: var(--gradient-secondary);
            border-radius: 25px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            border: 2px solid var(--oud-gold);
            box-shadow: var(--shadow-luxury);
            transform: scale(0.7) translateY(50px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .modal.active .modal-content {
            transform: scale(1) translateY(0);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--oud-gold);
        }
        
        .modal-title {
            color: var(--oud-gold);
            font-size: 1.5rem;
            font-weight: 700;
        }
        
        .close-btn {
            background: none;
            border: none;
            color: var(--oud-cream);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 5px;
            border-radius: 5px;
            transition: all 0.3s ease;
        }
        
        .close-btn:hover {
            background: rgba(212, 175, 55, 0.2);
            color: var(--oud-gold);
        }
        
        /* Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ */
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            color: var(--oud-cream);
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .form-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--oud-bronze);
            border-radius: 10px;
            background: rgba(245, 245, 220, 0.1);
            color: var(--oud-cream);
            font-family: 'Cairo', sans-serif;
            transition: all 0.3s ease;
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--oud-gold);
            background: rgba(245, 245, 220, 0.15);
        }
        
        .form-select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--oud-bronze);
            border-radius: 10px;
            background: rgba(245, 245, 220, 0.1);
            color: var(--oud-cream);
            font-family: 'Cairo', sans-serif;
        }
        
        /* Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø³Ø±ÙŠØ¹Ø© */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: var(--glass-bg);
            backdrop-filter: blur(25px);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid var(--glass-border);
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-luxury);
        }
        
        .stat-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            display: block;
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: 800;
            color: var(--oud-gold);
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: var(--oud-cream);
            font-weight: 600;
        }
        
        /* ÙÙ„Ø§ØªØ± Ø§Ù„Ø¨Ø­Ø« */
        .filters-container {
            background: var(--glass-bg);
            backdrop-filter: blur(25px);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid var(--glass-border);
        }
        
        .filters-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            align-items: end;
        }
        
        /* Content Sections */
        .content-section {
            display: none;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .content-section.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Page Transition Animation */
        .page-transition {
            animation: pageSlideIn 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        @keyframes pageSlideIn {
            0% {
                opacity: 0;
                transform: translateX(30px);
            }
            100% {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        /* Enhanced Menu Item Hover */
        .menu-item {
            position: relative;
            overflow: hidden;
        }
        
        .menu-item::before {
            content: '';
            position: absolute;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.1), transparent);
            transition: right 0.5s ease;
        }
        
        .menu-item:hover::before {
            right: 100%;
        }
        
        /* Notification Animations */
        @keyframes slideInRight {
            0% {
                transform: translateX(100%);
                opacity: 0;
            }
            100% {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOutRight {
            0% {
                transform: translateX(0);
                opacity: 1;
            }
            100% {
                transform: translateX(100%);
                opacity: 0;
            }
        }
        
        @keyframes modalBounce {
            0% {
                transform: scale(0.3) translateY(100px);
                opacity: 0;
            }
            50% {
                transform: scale(1.05) translateY(-10px);
                opacity: 0.8;
            }
            100% {
                transform: scale(1) translateY(0);
                opacity: 1;
            }
        }
        
        @keyframes modalSlideOut {
            0% {
                transform: scale(1) translateY(0);
                opacity: 1;
            }
            100% {
                transform: scale(0.8) translateY(50px);
                opacity: 0;
            }
        }
        
        @keyframes titleUpdate {
            0% {
                transform: translateY(-10px);
                opacity: 0.7;
            }
            50% {
                transform: translateY(-5px);
                opacity: 0.9;
            }
            100% {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* Responsive Design - ØªØ­Ø³ÙŠÙ†Ø§Øª Ø´Ø§Ù…Ù„Ø© Ù„Ù„Ø¬ÙˆØ§Ù„ */
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                height: 100vh;
                height: 100dvh; /* Ù„Ù„Ø¬ÙˆØ§Ù„Ø§Øª Ø§Ù„Ø­Ø¯ÙŠØ«Ø© */
            }
            
            .ai-clock {
                width: 80px;
                height: 80px;
                margin-left: 10px;
            }
            
            .ai-digital-time {
                font-size: 2rem;
            }
            
            .ai-table-title {
                font-size: 1.5rem;
            }
            
            .ai-reports-icon {
                font-size: 2rem;
                margin-left: 10px;
            }
            
            .schedule-table th,
            .schedule-table td {
                padding: 4px 2px;
                font-size: 0.6rem;
            }
            
            .top-controls {
                flex-direction: column;
                gap: 15px;
                padding: 0 10px;
            }
            
            .stats-container {
                grid-template-columns: 1fr 1fr;
                gap: 10px;
            }
            
            .filters-row {
                grid-template-columns: 1fr;
            }
            
            .login-card {
                padding: 30px 20px;
                margin: 10px;
                width: calc(100% - 20px);
            }
            
            .login-title {
                font-size: 1.5rem;
            }
            
            .login-logo {
                font-size: 3rem;
            }
            
            /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø®Ø§ØµØ© Ø¨Ø§Ù„Ø¬ÙˆØ§Ù„ */
            body {
                padding: 10px;
                -webkit-text-size-adjust: 100%;
                -webkit-tap-highlight-color: transparent;
            }
            
            /* Ø¥Ø¸Ù‡Ø§Ø± Ù†Øµ Ø§Ù„Ø®Ø±ÙˆØ¬ ÙÙŠ Ø§Ù„Ø¬ÙˆØ§Ù„ */
            .top-controls button[title="ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬"] span:last-child {
                display: inline !important;
                margin-right: 5px;
            }
            
            .menu-item {
                padding: 18px 25px;
                font-size: 1.1rem;
                min-height: 50px;
            }
            
            .menu-icon {
                font-size: 1.4rem;
                margin-left: 15px;
            }
            
            /* ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ù„Ù„Ù…Ø³ */
            .oud-btn {
                min-height: 48px;
                padding: 12px 20px;
                font-size: 1rem;
            }
            
            /* ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ù„Ù„Ø¬ÙˆØ§Ù„ */
            .table-scroll {
                -webkit-overflow-scrolling: touch;
                scrollbar-width: thin;
            }
            
            /* ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© */
            .modal-content {
                margin: 10px;
                width: calc(100% - 20px);
                max-height: 90vh;
                overflow-y: auto;
            }
            
            /* ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ Ù„Ù„Ø¬ÙˆØ§Ù„ */
            .form-input,
            .form-select,
            .login-input {
                font-size: 16px; /* Ù…Ù†Ø¹ Ø§Ù„ØªÙƒØ¨ÙŠØ± ÙÙŠ iOS */
                min-height: 48px;
            }
        }
        
        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„Ø¬ÙˆØ§Ù„Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
        @media (max-width: 480px) {
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .ai-clock-container {
                flex-direction: column;
                gap: 15px;
            }
            
            .ai-clock {
                width: 60px;
                height: 60px;
                margin: 0;
            }
            
            .ai-digital-time {
                font-size: 1.8rem;
            }
            
            .login-card {
                padding: 20px 15px;
            }
            
            .sidebar-header {
                padding: 20px 15px;
            }
            
            .menu-item {
                padding: 15px 20px;
            }
        }
        
        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Safari Ùˆ WebKit */
        @supports (-webkit-touch-callout: none) {
            .sidebar {
                -webkit-overflow-scrolling: touch;
            }
            
            .login-input,
            .form-input {
                -webkit-appearance: none;
                border-radius: 18px;
            }
            
            body {
                -webkit-user-select: none;
                user-select: none;
            }
            
            input, textarea, button {
                -webkit-user-select: text;
                user-select: text;
            }
        }
        
        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø£ÙÙ‚ÙŠ */
        @media (max-height: 500px) and (orientation: landscape) {
            .sidebar-header {
                padding: 15px 20px;
            }
            
            .sidebar-logo {
                font-size: 1.5rem;
            }
            
            .menu-item {
                padding: 12px 25px;
            }
            
            .ai-clock-container {
                margin-bottom: 15px;
            }
        }
        
        /* Table scroll for mobile */
        .table-scroll {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .table-scroll::-webkit-scrollbar {
            height: 8px;
        }
        
        .table-scroll::-webkit-scrollbar-track {
            background: rgba(212, 175, 55, 0.1);
            border-radius: 4px;
        }
        
        .table-scroll::-webkit-scrollbar-thumb {
            background: var(--oud-gold);
            border-radius: 4px;
        }
        
        .table-scroll::-webkit-scrollbar-thumb:hover {
            background: var(--oud-gold-dark);
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div class="login-container" id="loginContainer">
        <div class="login-card">
            <h1 class="login-title">Ù†Ø®Ø¨Ø© Ø§Ù„Ø¹ÙˆØ¯</h1>
            <p class="login-subtitle">Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„Ø§Ù†ØµØ±Ø§Ù</p>
            
            <form class="login-form" id="loginForm">
                <div class="login-input-group">
                    <span class="login-input-icon">ğŸ‘¤</span>
                    <input type="text" class="login-input" id="username" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" required>
                </div>
                
                <div class="login-input-group">
                    <span class="login-input-icon">ğŸ”’</span>
                    <input type="password" class="login-input" id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" required>
                </div>
                
                <button type="submit" class="login-btn">
                    <span style="margin-left: 8px;">ğŸš€</span>
                    ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
                </button>
                
                <div class="login-error" id="loginError">
                    Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©
                </div>
            </form>
            
            <!-- Ø¨ÙŠØ§Ù†Ø§Øª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø¨Ø³Ø·Ø© -->
            <div style="margin-top: 20px; padding: 15px; background: rgba(212, 175, 55, 0.1); border-radius: 10px; border: 1px solid var(--oud-gold);">
                <div style="color: var(--oud-gold); font-weight: 600; margin-bottom: 10px; text-align: center;">
                    ğŸ”‘ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 0.9rem;">
                    <div style="color: var(--oud-cream); text-align: center; padding: 8px; background: rgba(212, 175, 55, 0.05); border-radius: 5px;">
                        <div style="font-weight: bold; color: var(--oud-gold);">ğŸ‘¨â€ğŸ’¼ Ø§Ù„Ù…Ø¯ÙŠØ±</div>
                        <div>admin / 123</div>
                    </div>
                    
                    <div style="color: var(--oud-cream); text-align: center; padding: 8px; background: rgba(212, 175, 55, 0.05); border-radius: 5px;">
                        <div style="font-weight: bold; color: var(--oud-gold);">ğŸ‘¤ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</div>
                        <div>Ø§Ù„Ø§Ø³Ù… / 123</div>
                    </div>
                </div>
                
                <div style="margin-top: 10px; font-size: 0.8rem; color: var(--oud-cream); opacity: 0.8; text-align: center;">
                    Ø£Ù…Ø«Ù„Ø©: badr, saad, hussein, ahmed, yazeed, noura
                </div>
                
                <!-- Ø²Ø± Ø§Ø®ØªØ¨Ø§Ø± Ø³Ø±ÙŠØ¹ -->
                <div style="margin-top: 15px; text-align: center;">
                    <button type="button" onclick="quickLogin('admin')" style="
                        background: linear-gradient(135deg, #10b981, #059669);
                        color: white;
                        border: none;
                        padding: 8px 15px;
                        border-radius: 10px;
                        font-family: 'Cairo', sans-serif;
                        font-size: 0.9rem;
                        font-weight: 600;
                        cursor: pointer;
                        margin: 0 5px;
                        transition: all 0.3s ease;
                    " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                        ğŸš€ Ø¯Ø®ÙˆÙ„ Ø³Ø±ÙŠØ¹ - Ù…Ø¯ÙŠØ±
                    </button>
                    <button type="button" onclick="quickLogin('badr')" style="
                        background: linear-gradient(135deg, #3b82f6, #1d4ed8);
                        color: white;
                        border: none;
                        padding: 8px 15px;
                        border-radius: 10px;
                        font-family: 'Cairo', sans-serif;
                        font-size: 0.9rem;
                        font-weight: 600;
                        cursor: pointer;
                        margin: 0 5px;
                        transition: all 0.3s ease;
                    " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                        ğŸ‘¤ Ø¯Ø®ÙˆÙ„ Ø³Ø±ÙŠØ¹ - Ù…ÙˆØ¸Ù
                    </button>
                </div>
                
                <!-- ØªØ¹Ù„ÙŠÙ…Ø§Øª Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø±Ø§Ø¨Ø· -->
                <div style="margin-top: 20px; padding: 15px; background: rgba(16, 185, 129, 0.1); border-radius: 10px; border: 1px solid #10b981;">
                    <div style="color: #10b981; font-weight: 600; margin-bottom: 10px; text-align: center; font-size: 0.9rem;">
                        ğŸ“± ÙƒÙŠÙÙŠØ© Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù†Ø¸Ø§Ù… Ù…Ø¹ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†
                    </div>
                    <div style="color: var(--oud-cream); font-size: 0.8rem; line-height: 1.5; text-align: center;">
                        <div style="margin-bottom: 8px;">
                            <strong>1.</strong> Ø§Ø­ÙØ¸ Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© ÙƒÙ…Ù„Ù HTML Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ
                        </div>
                        <div style="margin-bottom: 8px;">
                            <strong>2.</strong> Ø§Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù Ø¹Ù„Ù‰ Ø®Ø§Ø¯Ù… ÙˆÙŠØ¨ Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ù… GitHub Pages
                        </div>
                        <div style="margin-bottom: 8px;">
                            <strong>3.</strong> Ø´Ø§Ø±Ùƒ Ø§Ù„Ø±Ø§Ø¨Ø· Ù…Ø¹ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†
                        </div>
                        <div style="color: #10b981; font-weight: bold; margin-top: 10px;">
                            âœ… Ø³ÙŠØ¹Ù…Ù„ Ø§Ù„Ù†Ø¸Ø§Ù… ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ø¨Ø± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©!
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- Sidebar Overlay -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Sidebar Navigation -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-logo">ğŸ›ï¸ Ù†Ø®Ø¨Ø© Ø§Ù„Ø¹ÙˆØ¯</div>
            <div class="sidebar-subtitle">Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„Ø§Ù†ØµØ±Ø§Ù</div>
        </div>
        <nav class="sidebar-menu">
            <a href="#" class="menu-item active" data-section="dashboard" onclick="navigateToSection('dashboard', this)">
                <span class="menu-icon">ğŸ“Š</span>
                <span>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</span>
            </a>
            <a href="#" class="menu-item" data-section="schedule" onclick="navigateToSection('schedule', this)">
                <span class="menu-icon">ğŸ“…</span>
                <span>Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</span>
            </a>
            <a href="#" class="menu-item" data-section="employees" onclick="navigateToSection('employees', this)">
                <span class="menu-icon">ğŸ‘¥</span>
                <span>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</span>
            </a>
            <a href="#" class="menu-item" data-section="attendance" onclick="navigateToSection('attendance', this)">
                <span class="menu-icon">â°</span>
                <span>Ø³Ø¬Ù„ Ø§Ù„Ø­Ø¶ÙˆØ±</span>
            </a>
            <a href="#" class="menu-item" data-section="reports" onclick="navigateToSection('reports', this)">
                <span class="menu-icon">ğŸ“ˆ</span>
                <span>Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</span>
            </a>
            <a href="#" class="menu-item" data-section="settings" onclick="navigateToSection('settings', this)">
                <span class="menu-icon">âš™ï¸</span>
                <span>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</span>
            </a>
            
            <!-- Ø²Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø§Ù„ÙØ¹Ø§Ù„ -->
            <div style="margin-top: auto; padding: 20px 0; border-top: 2px solid var(--oud-gold);">
                <button onclick="logout()" class="menu-item" style="
                    width: 100%;
                    background: linear-gradient(135deg, #dc2626, #b91c1c);
                    color: white;
                    border: none;
                    padding: 15px 25px;
                    border-radius: 12px;
                    font-family: 'Cairo', sans-serif;
                    font-size: 1rem;
                    font-weight: 600;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    gap: 10px;
                    box-shadow: 0 4px 15px rgba(220, 38, 38, 0.3);
                    margin: 0 20px;
                " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(220, 38, 38, 0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(220, 38, 38, 0.3)'">
                    <span style="font-size: 1.2rem;">ğŸšª</span>
                    <span>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</span>
                </button>
            </div>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="mainContent" style="display: none; visibility: hidden; opacity: 0; transition: all 0.3s ease;">
        <!-- Top Controls -->
        <div class="top-controls">
            <div class="control-group">
                <button class="menu-toggle" id="menuToggle" onclick="toggleSidebar()">â˜°</button>
                <h2 style="color: var(--oud-gold); margin: 0;" id="pageTitle">Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„Ø§Ù†ØµØ±Ø§Ù</h2>
                
                <!-- Ù…Ø¤Ø´Ø± Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„ -->
                <div id="connectionStatus" style="
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    background: rgba(16, 185, 129, 0.1);
                    padding: 8px 12px;
                    border-radius: 20px;
                    border: 1px solid #10b981;
                    margin-right: 10px;
                ">
                    <div style="width: 8px; height: 8px; background: #10b981; border-radius: 50%; animation: pulse 2s infinite;"></div>
                    <span style="color: #10b981; font-size: 0.9rem; font-weight: 600;">Ù…ØªØµÙ„</span>
                </div>
                
                <!-- Ø²Ø± Ø®Ø±ÙˆØ¬ Ø³Ø±ÙŠØ¹ ÙÙŠ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ -->
                <button onclick="logout()" class="oud-btn" style="
                    background: linear-gradient(135deg, #dc2626, #b91c1c);
                    color: white;
                    padding: 8px 12px;
                    font-size: 0.9rem;
                    margin-right: 10px;
                    min-height: 40px;
                    box-shadow: 0 2px 8px rgba(220, 38, 38, 0.3);
                " title="ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬">
                    <span style="font-size: 1rem;">ğŸšª</span>
                    <span style="display: none;">Ø®Ø±ÙˆØ¬</span>
                </button>
            </div>
            <div class="control-group">
                <button class="oud-btn oud-btn-primary" id="addEmployeeBtn" onclick="openModal('addEmployeeModal')">
                    <span>â•</span>
                    Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ¸Ù
                </button>
                <button class="oud-btn oud-btn-secondary" id="exportBtn" onclick="exportData()">
                    <span>ğŸ“¤</span>
                    ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                </button>
            </div>
        </div>

        <!-- Beautiful Clock Display -->
        <div class="ai-clock-container">
            <div class="ai-clock">
                <div class="ai-clock-numbers">
                    <div class="ai-clock-number">12</div>
                    <div class="ai-clock-number">3</div>
                    <div class="ai-clock-number">6</div>
                    <div class="ai-clock-number">9</div>
                </div>
                <div class="ai-clock-center"></div>
            </div>
            <div class="ai-time-display">
                <div class="ai-digital-time" id="currentTime"></div>
                <div class="ai-date-display" id="currentDate"></div>
            </div>
        </div>

        <!-- Statistics Cards -->
        <div class="stats-container">
            <div class="stat-card">
                <span class="stat-icon">ğŸ‘¥</span>
                <div class="stat-number" id="totalEmployees">6</div>
                <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</div>
            </div>
            <div class="stat-card">
                <span class="stat-icon">âœ…</span>
                <div class="stat-number" id="presentToday">0</div>
                <div class="stat-label">Ø­Ø§Ø¶Ø± Ø§Ù„ÙŠÙˆÙ…</div>
            </div>
            <div class="stat-card">
                <span class="stat-icon">âŒ</span>
                <div class="stat-number" id="absentToday">0</div>
                <div class="stat-label">ØºØ§Ø¦Ø¨ Ø§Ù„ÙŠÙˆÙ…</div>
            </div>
            <div class="stat-card">
                <span class="stat-icon">ğŸ“Š</span>
                <div class="stat-number" id="attendanceRate">0%</div>
                <div class="stat-label">Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø­Ø¶ÙˆØ±</div>
            </div>
        </div>

        <!-- Dashboard Section -->
        <div class="content-section active" id="dashboard-section">
            <div class="ai-table-container">
                <div class="ai-table-header">
                    <h1 class="ai-table-title">
                        <span class="ai-reports-icon">ğŸ“Š</span>
                        Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                    </h1>
                </div>
                
                <div style="padding: 30px;">
                    <div style="text-align: center; color: var(--oud-cream);">
                        <div style="font-size: 4rem; margin-bottom: 20px;">ğŸ›ï¸</div>
                        <h3 style="color: var(--oud-gold); margin-bottom: 15px;">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù†Ø¸Ø§Ù… Ù†Ø®Ø¨Ø© Ø§Ù„Ø¹ÙˆØ¯</h3>
                        <p style="font-size: 1.1rem; opacity: 0.8; margin-bottom: 30px;">Ù†Ø¸Ø§Ù… Ù…ØªÙƒØ§Ù…Ù„ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„Ø§Ù†ØµØ±Ø§Ù ÙˆØ¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</p>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 30px;">
                            <div class="stat-card">
                                <span class="stat-icon">ğŸ“…</span>
                                <div class="stat-number">40</div>
                                <div class="stat-label">ÙŠÙˆÙ… Ø¹Ù…Ù„ Ù…Ø¬Ø¯ÙˆÙ„</div>
                            </div>
                            <div class="stat-card">
                                <span class="stat-icon">â°</span>
                                <div class="stat-number">8.5</div>
                                <div class="stat-label">Ù…ØªÙˆØ³Ø· Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„</div>
                            </div>
                            <div class="stat-card">
                                <span class="stat-icon">ğŸ“ˆ</span>
                                <div class="stat-number">95%</div>
                                <div class="stat-label">Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø­Ø¶ÙˆØ±</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Employee Schedule Section -->
        <div class="content-section" id="schedule-section">
            <div class="ai-table-container">
                <div class="ai-table-header">
                    <h1 class="ai-table-title">
                        <span class="ai-reports-icon">ğŸ“…</span>
                        Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† - Ø£ØºØ³Ø·Ø³ 2025
                    </h1>
                </div>
                
                <div class="table-scroll" style="padding: 20px;">
                    <table class="schedule-table" id="scheduleTable">
                        <thead>
                            <tr>
                                <th class="employee-name">Ø§Ù„Ù…ÙˆØ¸Ù</th>
                                <th class="date-header weekend-header">
                                    <span class="date-number">1</span>
                                    <span class="day-name">Ø§Ù„Ø¬Ù…Ø¹Ø©</span>
                                </th>
                                <th class="date-header weekend-header">
                                    <span class="date-number">2</span>
                                    <span class="day-name">Ø§Ù„Ø³Ø¨Øª</span>
                                </th>
                                <th class="date-header">
                                    <span class="date-number">3</span>
                                    <span class="day-name">Ø§Ù„Ø£Ø­Ø¯</span>
                                </th>
                                <th class="date-header">
                                    <span class="date-number">4</span>
                                    <span class="day-name">Ø§Ù„Ø§Ø«Ù†ÙŠÙ†</span>
                                </th>
                                <th class="date-header">
                                    <span class="date-number">5</span>
                                    <span class="day-name">Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡</span>
                                </th>
                                <th class="date-header">
                                    <span class="date-number">6</span>
                                    <span class="day-name">Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡</span>
                                </th>
                                <th class="date-header">
                                    <span class="date-number">7</span>
                                    <span class="day-name">Ø§Ù„Ø®Ù…ÙŠØ³</span>
                                </th>
                                <th class="date-header weekend-header">
                                    <span class="date-number">8</span>
                                    <span class="day-name">Ø§Ù„Ø¬Ù…Ø¹Ø©</span>
                                </th>
                                <th class="date-header weekend-header">
                                    <span class="date-number">9</span>
                                    <span class="day-name">Ø§Ù„Ø³Ø¨Øª</span>
                                </th>
                                <th class="date-header">
                                    <span class="date-number">10</span>
                                    <span class="day-name">Ø§Ù„Ø£Ø­Ø¯</span>
                                </th>
                                <th class="date-header">
                                    <span class="date-number">11</span>
                                    <span class="day-name">Ø§Ù„Ø§Ø«Ù†ÙŠÙ†</span>
                                </th>
                                <th class="date-header">
                                    <span class="date-number">12</span>
                                    <span class="day-name">Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡</span>
                                </th>
                                <th class="date-header">
                                    <span class="date-number">13</span>
                                    <span class="day-name">Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡</span>
                                </th>
                                <th class="date-header">
                                    <span class="date-number">14</span>
                                    <span class="day-name">Ø§Ù„Ø®Ù…ÙŠØ³</span>
                                </th>
                                <th class="date-header weekend-header">
                                    <span class="date-number">15</span>
                                    <span class="day-name">Ø§Ù„Ø¬Ù…Ø¹Ø©</span>
                                </th>
                                <th class="date-header weekend-header">
                                    <span class="date-number">16</span>
                                    <span class="day-name">Ø§Ù„Ø³Ø¨Øª</span>
                                </th>
                                <th class="date-header">
                                    <span class="date-number">17</span>
                                    <span class="day-name">Ø§Ù„Ø£Ø­Ø¯</span>
                                </th>
                                <th class="date-header">
                                    <span class="date-number">18</span>
                                    <span class="day-name">Ø§Ù„Ø§Ø«Ù†ÙŠÙ†</span>
                                </th>
                                <th class="date-header">
                                    <span class="date-number">19</span>
                                    <span class="day-name">Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡</span>
                                </th>
                                <th class="date-header">
                                    <span class="date-number">20</span>
                                    <span class="day-name">Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡</span>
                                </th>
                                <th class="date-header">
                                    <span class="date-number">21</span>
                                    <span class="day-name">Ø§Ù„Ø®Ù…ÙŠØ³</span>
                                </th>
                                <th class="date-header weekend-header">
                                    <span class="date-number">22</span>
                                    <span class="day-name">Ø§Ù„Ø¬Ù…Ø¹Ø©</span>
                                </th>
                                <th class="date-header weekend-header">
                                    <span class="date-number">23</span>
                                    <span class="day-name">Ø§Ù„Ø³Ø¨Øª</span>
                                </th>
                                <th class="date-header">
                                    <span class="date-number">24</span>
                                    <span class="day-name">Ø§Ù„Ø£Ø­Ø¯</span>
                                </th>
                                <th class="date-header">
                                    <span class="date-number">25</span>
                                    <span class="day-name">Ø§Ù„Ø§Ø«Ù†ÙŠÙ†</span>
                                </th>
                                <th class="date-header">
                                    <span class="date-number">26</span>
                                    <span class="day-name">Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡</span>
                                </th>
                                <th class="date-header">
                                    <span class="date-number">27</span>
                                    <span class="day-name">Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡</span>
                                </th>
                                <th class="date-header">
                                    <span class="date-number">28</span>
                                    <span class="day-name">Ø§Ù„Ø®Ù…ÙŠØ³</span>
                                </th>
                                <th class="date-header weekend-header">
                                    <span class="date-number">29</span>
                                    <span class="day-name">Ø§Ù„Ø¬Ù…Ø¹Ø©</span>
                                </th>
                                <th class="date-header weekend-header">
                                    <span class="date-number">30</span>
                                    <span class="day-name">Ø§Ù„Ø³Ø¨Øª</span>
                                </th>
                            </tr>
                        </thead>
                        <tbody id="scheduleTableBody">
                            <!-- Schedule data will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Employees Management Section -->
        <div class="content-section" id="employees-section">
            <div class="ai-table-container">
                <div class="ai-table-header">
                    <h1 class="ai-table-title">
                        <span class="ai-reports-icon">ğŸ‘¥</span>
                        Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† - Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„ÙØ¹Ù„ÙŠØ©
                    </h1>
                </div>
                
                <div style="padding: 30px;">
                    <!-- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø¯Ù‚ÙŠÙ‚Ø© Ø­Ø³Ø¨ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„ÙØ¹Ù„ÙŠ -->
                    <div class="stats-container">
                        <div class="stat-card" onclick="showEmployeesByStatus('present')" style="cursor: pointer;">
                            <span class="stat-icon">âœ…</span>
                            <div class="stat-number" id="actualPresentCount">0</div>
                            <div class="stat-label">Ø­Ø§Ø¶Ø± ÙˆÙ…Ø¨Ø§Ø´Ø±</div>
                        </div>
                        <div class="stat-card" onclick="showEmployeesByStatus('weeklyLeave')" style="cursor: pointer;">
                            <span class="stat-icon">ğŸ’¤</span>
                            <div class="stat-number" id="weeklyLeaveCount">0</div>
                            <div class="stat-label">Ø¥Ø¬Ø§Ø²Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©</div>
                        </div>
                        <div class="stat-card" onclick="showEmployeesByStatus('annualLeave')" style="cursor: pointer;">
                            <span class="stat-icon">ğŸ–ï¸</span>
                            <div class="stat-number" id="annualLeaveCount">0</div>
                            <div class="stat-label">Ø¥Ø¬Ø§Ø²Ø© Ø³Ù†ÙˆÙŠØ©</div>
                        </div>
                        <div class="stat-card" onclick="showEmployeesByStatus('loggedIn')" style="cursor: pointer;">
                            <span class="stat-icon">ğŸ”</span>
                            <div class="stat-number" id="loggedInCount">0</div>
                            <div class="stat-label">Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„</div>
                        </div>
                    </div>
                    
                    <!-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ø¯Ù‚ÙŠÙ‚ -->
                    <div class="ai-table-container" style="margin-top: 30px;">
                        <div class="ai-table-header">
                            <h3 style="color: var(--oud-gold); margin: 0; font-size: 1.3rem;">
                                <span style="margin-left: 10px;">ğŸ“‹</span>
                                Ø­Ø§Ù„Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„ÙØ¹Ù„ÙŠØ© Ø§Ù„ÙŠÙˆÙ…
                            </h3>
                        </div>
                        
                        <div class="table-scroll" style="padding: 20px;">
                            <table class="ai-modern-table">
                                <thead>
                                    <tr>
                                        <th>Ø§Ù„Ù…ÙˆØ¸Ù</th>
                                        <th>Ø§Ù„ÙƒÙˆØ¯</th>
                                        <th>Ø§Ù„Ù‚Ø³Ù…</th>
                                        <th>Ø§Ù„ÙˆØ±Ø¯ÙŠØ© Ø§Ù„Ù…Ø¬Ø¯ÙˆÙ„Ø©</th>
                                        <th>Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„ÙØ¹Ù„ÙŠØ©</th>
                                        <th>ÙˆÙ‚Øª Ø§Ù„Ø­Ø¶ÙˆØ±</th>
                                        <th>Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…</th>
                                        <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                                    </tr>
                                </thead>
                                <tbody id="preciseEmployeeTableBody">
                                    <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨ÙˆØ§Ø³Ø·Ø© JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- Ù…Ù„Ø§Ø­Ø¸Ø© Ù„Ù„Ù…Ø¯ÙŠØ± -->
                    <div style="background: var(--glass-bg); border-radius: 15px; padding: 20px; margin-top: 20px; border: 1px solid var(--oud-gold);">
                        <div style="display: flex; align-items: center; margin-bottom: 10px;">
                            <span style="font-size: 1.5rem; margin-left: 10px;">â„¹ï¸</span>
                            <h4 style="color: var(--oud-gold); margin: 0;">Ù…Ù„Ø§Ø­Ø¸Ø© Ù„Ù„Ù…Ø¯ÙŠØ±</h4>
                        </div>
                        <p style="color: var(--oud-cream); margin: 0; line-height: 1.6;">
                            Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù… ÙŠØ¹Ø±Ø¶ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„ÙØ¹Ù„ÙŠØ© Ù„Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø© ÙˆØ­Ø§Ù„Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù….
                            ÙŠØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø© Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø¯Ù‚Ø©.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Attendance Records Section -->
        <div class="content-section" id="attendance-section">
            <div class="ai-table-container">
                <div class="ai-table-header">
                    <h1 class="ai-table-title">
                        <span class="ai-reports-icon">â°</span>
                        Ø³Ø¬Ù„ Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„Ø§Ù†ØµØ±Ø§Ù
                    </h1>
                </div>
                
                <div style="padding: 30px;">
                    <!-- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø© -->
                    <div class="stats-container">
                        <div class="stat-card">
                            <span class="stat-icon">ğŸ‘¥</span>
                            <div class="stat-number" id="totalEmployeesCount">6</div>
                            <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</div>
                        </div>
                        <div class="stat-card">
                            <span class="stat-icon">âœ…</span>
                            <div class="stat-number" id="presentCount">0</div>
                            <div class="stat-label">Ø­Ø§Ø¶Ø± Ø§Ù„ÙŠÙˆÙ…</div>
                        </div>
                        <div class="stat-card">
                            <span class="stat-icon">âš ï¸</span>
                            <div class="stat-number" id="lateCount">0</div>
                            <div class="stat-label">Ù…ØªØ£Ø®Ø±</div>
                        </div>
                        <div class="stat-card">
                            <span class="stat-icon">ğŸ’¼</span>
                            <div class="stat-number" id="workingCount">0</div>
                            <div class="stat-label">ÙŠØ¹Ù…Ù„ Ø­Ø§Ù„ÙŠØ§Ù‹</div>
                        </div>
                    </div>
                    
                    <!-- Ø­Ø§Ù„Ø© Ø­Ø¶ÙˆØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ -->
                    <div class="ai-table-container" style="margin-bottom: 30px;">
                        <div id="userAttendanceStatus">
                            <div style="padding: 20px; text-align: center;">
                                <div style="color: var(--oud-cream); opacity: 0.7;">ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ø¹Ø±Ø¶ Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø¶ÙˆØ±</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª -->
                    <div style="text-align: center; margin-bottom: 30px;">
                        <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                            <button class="oud-btn oud-btn-primary" id="checkInBtn" onclick="manualCheckIn()">
                                <span>ğŸ“</span>
                                ØªØ³Ø¬ÙŠÙ„ Ø­Ø¶ÙˆØ±
                            </button>
                            <button class="oud-btn oud-btn-secondary" id="checkOutBtn" onclick="openCheckOutModal()" style="display: none;">
                                <span>ğŸ </span>
                                ØªØ³Ø¬ÙŠÙ„ Ø§Ù†ØµØ±Ø§Ù
                            </button>
                        </div>
                    </div>
                    
                    <!-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ -->
                    <div class="ai-table-container">
                        <div class="ai-table-header">
                            <h3 style="color: var(--oud-gold); margin: 0; font-size: 1.3rem;">
                                <span style="margin-left: 10px;">ğŸ“‹</span>
                                Ø³Ø¬Ù„ Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„ÙŠÙˆÙ…
                            </h3>
                        </div>
                        
                        <div class="table-scroll" style="padding: 20px;">
                            <table class="ai-modern-table">
                                <thead>
                                    <tr>
                                        <th>Ø§Ù„Ù…ÙˆØ¸Ù</th>
                                        <th>ÙˆÙ‚Øª Ø§Ù„Ø­Ø¶ÙˆØ±</th>
                                        <th>ÙˆÙ‚Øª Ø§Ù„Ø§Ù†ØµØ±Ø§Ù</th>
                                        <th>Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„</th>
                                        <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                                        <th>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>
                                    </tr>
                                </thead>
                                <tbody id="todayAttendanceTableBody">
                                    <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨ÙˆØ§Ø³Ø·Ø© JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Reports Section -->
        <div class="content-section" id="reports-section">
            <div class="ai-table-container">
                <div class="ai-table-header">
                    <h1 class="ai-table-title">
                        <span class="ai-reports-icon">â°</span>
                        ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„ØªØ£Ø®ÙŠØ±
                    </h1>
                </div>
                
                <div style="padding: 30px;">
                    <!-- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ØªØ£Ø®ÙŠØ± ÙÙ‚Ø· -->
                    <div class="stats-container">
                        <div class="stat-card">
                            <span class="stat-icon">â°</span>
                            <div class="stat-number" id="totalLateMinutes">0</div>
                            <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¯Ù‚Ø§Ø¦Ù‚ Ø§Ù„ØªØ£Ø®ÙŠØ±</div>
                        </div>
                        <div class="stat-card">
                            <span class="stat-icon">ğŸ‘¥</span>
                            <div class="stat-number" id="employeesWithLate">0</div>
                            <div class="stat-label">Ù…ÙˆØ¸ÙÙŠÙ† Ù…ØªØ£Ø®Ø±ÙŠÙ†</div>
                        </div>
                        <div class="stat-card">
                            <span class="stat-icon">ğŸ“Š</span>
                            <div class="stat-number" id="avgLatePerEmployee">0</div>
                            <div class="stat-label">Ù…ØªÙˆØ³Ø· Ø§Ù„ØªØ£Ø®ÙŠØ±/Ù…ÙˆØ¸Ù</div>
                        </div>
                        <div class="stat-card">
                            <span class="stat-icon">ğŸ“ˆ</span>
                            <div class="stat-number" id="lateIncidentsCount">0</div>
                            <div class="stat-label">Ø­Ø§Ù„Ø§Øª Ø§Ù„ØªØ£Ø®ÙŠØ±</div>
                        </div>
                    </div>
                    
                    <!-- Ø¬Ø¯ÙˆÙ„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªØ£Ø®ÙŠØ± -->
                    <div class="ai-table-container" style="margin-top: 30px;">
                        <div class="ai-table-header">
                            <h3 style="color: var(--oud-gold); margin: 0; font-size: 1.3rem;">
                                <span style="margin-left: 10px;">ğŸ“‹</span>
                                ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªØ£Ø®ÙŠØ± Ù„Ù„Ù…ÙˆØ¸ÙÙŠÙ†
                            </h3>
                        </div>
                        
                        <div class="table-scroll" style="padding: 20px;">
                            <table class="ai-modern-table">
                                <thead>
                                    <tr>
                                        <th>Ø§Ù„Ù…ÙˆØ¸Ù</th>
                                        <th>Ø§Ù„ÙƒÙˆØ¯</th>
                                        <th>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¯Ù‚Ø§Ø¦Ù‚ Ø§Ù„ØªØ£Ø®ÙŠØ±</th>
                                        <th>Ø¹Ø¯Ø¯ Ù…Ø±Ø§Øª Ø§Ù„ØªØ£Ø®ÙŠØ±</th>
                                        <th>Ø¢Ø®Ø± ØªØ£Ø®ÙŠØ±</th>
                                        <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                                    </tr>
                                </thead>
                                <tbody id="lateReportTableBody">
                                    <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨ÙˆØ§Ø³Ø·Ø© JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 30px;">
                        <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                            <button class="oud-btn oud-btn-secondary" onclick="updateLateReports()">
                                <span>ğŸ”„</span>
                                ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±
                            </button>
                            <button class="oud-btn oud-btn-primary" onclick="exportLateReport()">
                                <span>ğŸ“Š</span>
                                ØªØµØ¯ÙŠØ± ØªÙ‚Ø±ÙŠØ± Ø§Ù„ØªØ£Ø®ÙŠØ±
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Section -->
        <div class="content-section" id="settings-section">
            <div class="ai-table-container">
                <div class="ai-table-header">
                    <h1 class="ai-table-title">
                        <span class="ai-reports-icon">âš™ï¸</span>
                        Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
                    </h1>
                </div>
                
                <div style="padding: 30px;">
                    <div class="stats-container">
                        <div class="stat-card">
                            <span class="stat-icon">ğŸ¢</span>
                            <div class="stat-number">Ù†Ø®Ø¨Ø© Ø§Ù„Ø¹ÙˆØ¯</div>
                            <div class="stat-label">Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ©</div>
                        </div>
                        <div class="stat-card">
                            <span class="stat-icon">ğŸ•˜</span>
                            <div class="stat-number">09:00</div>
                            <div class="stat-label">ÙˆÙ‚Øª Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø¹Ù…Ù„</div>
                        </div>
                        <div class="stat-card">
                            <span class="stat-icon">ğŸ•”</span>
                            <div class="stat-number">18:00</div>
                            <div class="stat-label">ÙˆÙ‚Øª Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø¹Ù…Ù„</div>
                        </div>
                        <div class="stat-card">
                            <span class="stat-icon">â°</span>
                            <div class="stat-number">15 Ø¯Ù‚ÙŠÙ‚Ø©</div>
                            <div class="stat-label">Ù‡Ø§Ù…Ø´ Ø§Ù„ØªØ£Ø®ÙŠØ±</div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; padding: 50px; color: var(--oud-cream);">
                        <div style="font-size: 4rem; margin-bottom: 20px;">âš™ï¸</div>
                        <h3 style="color: var(--oud-gold); margin-bottom: 15px;">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</h3>
                        <p style="font-size: 1.1rem; opacity: 0.8;">ØªØ®ØµÙŠØµ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… ÙˆØ£ÙˆÙ‚Ø§Øª Ø§Ù„Ø¹Ù…Ù„ ÙˆØ§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</p>
                        <div style="display: flex; gap: 15px; justify-content: center; margin-top: 20px; flex-wrap: wrap;">
                            <button class="oud-btn oud-btn-primary">
                                <span>ğŸ¢</span>
                                Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ©
                            </button>
                            <button class="oud-btn oud-btn-secondary">
                                <span>â°</span>
                                Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø¹Ù…Ù„
                            </button>
                            <button class="oud-btn oud-btn-primary">
                                <span>ğŸ””</span>
                                Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Employee Modal -->
    <div class="modal" id="addEmployeeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ¸Ù Ø¬Ø¯ÙŠØ¯</h3>
                <button class="close-btn" onclick="closeModal('addEmployeeModal')">&times;</button>
            </div>
            <form id="addEmployeeForm">
                <div class="form-group">
                    <label class="form-label">Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù</label>
                    <input type="text" class="form-input" id="employeeName" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¸Ù</label>
                    <input type="text" class="form-input" id="employeeId" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Ø§Ù„Ù‚Ø³Ù…</label>
                    <select class="form-select" id="employeeDepartment" required>
                        <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù…</option>
                        <option value="Ø®Ø¯Ù…Ø© Ø¹Ù…Ù„Ø§Ø¡ Ù†Ø®Ø¨Ø© Ø§Ù„Ø¹ÙˆØ¯">Ø®Ø¯Ù…Ø© Ø¹Ù…Ù„Ø§Ø¡ Ù†Ø®Ø¨Ø© Ø§Ù„Ø¹ÙˆØ¯</option>
                        <option value="Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª">Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</option>
                        <option value="Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©">Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</option>
                        <option value="Ø§Ù„ØªØ³ÙˆÙŠÙ‚">Ø§Ù„ØªØ³ÙˆÙŠÙ‚</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Ø§Ù„Ù…Ù†ØµØ¨</label>
                    <input type="text" class="form-input" id="employeePosition">
                </div>
                <div class="form-group">
                    <label class="form-label">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
                    <input type="tel" class="form-input" id="employeePhone">
                </div>
                <div class="form-group">
                    <label class="form-label">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                    <input type="email" class="form-input" id="employeeEmail">
                </div>
                <div style="display: flex; gap: 15px; justify-content: flex-end; margin-top: 25px;">
                    <button type="button" class="oud-btn oud-btn-secondary" onclick="closeModal('addEmployeeModal')">Ø¥Ù„ØºØ§Ø¡</button>
                    <button type="submit" class="oud-btn oud-btn-primary">Ø­ÙØ¸ Ø§Ù„Ù…ÙˆØ¸Ù</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Employee Details Modal -->
    <div class="modal" id="employeeDetailsModal">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <h3 class="modal-title">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…ÙˆØ¸Ù</h3>
                <button class="close-btn" onclick="closeModal('employeeDetailsModal')">&times;</button>
            </div>
            <div id="employeeDetailsContent">
                <!-- Employee details will be populated here -->
            </div>
        </div>
    </div>

    <!-- Attendance Confirmation Modal -->
    <div class="modal" id="attendanceModal">
        <div class="modal-content" style="max-width: 600px;">
            <div id="attendanceModalContent">
                <!-- Attendance confirmation content will be populated here -->
            </div>
        </div>
    </div>

    <!-- Check Out Confirmation Modal -->
    <div class="modal" id="checkOutModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">ØªØ£ÙƒÙŠØ¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø§Ù†ØµØ±Ø§Ù</h3>
                <button class="close-btn" onclick="closeModal('checkOutModal')">&times;</button>
            </div>
            <div style="padding: 30px; text-align: center;">
                <div style="font-size: 3rem; margin-bottom: 20px;">ğŸ </div>
                <h3 style="color: var(--oud-gold); margin-bottom: 15px;">Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø§Ù†ØµØ±Ø§ÙØŸ</h3>
                <p style="color: var(--oud-cream); margin-bottom: 30px; opacity: 0.8;">
                    Ø³ÙŠØªÙ… Ø­Ø³Ø§Ø¨ Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ÙˆØ¥Ù†Ù‡Ø§Ø¡ ÙŠÙˆÙ… Ø§Ù„Ø¹Ù…Ù„
                </p>
                
                <div style="display: flex; gap: 15px; justify-content: center;">
                    <button class="oud-btn oud-btn-secondary" onclick="closeModal('checkOutModal')">
                        <span>âŒ</span> Ø¥Ù„ØºØ§Ø¡
                    </button>
                    <button class="oud-btn oud-btn-primary" onclick="confirmCheckOut()">
                        <span>âœ…</span> ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ù†ØµØ±Ø§Ù
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Employee Status Modal -->
    <div class="modal" id="employeeStatusModal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h3 class="modal-title" id="statusModalTitle">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</h3>
                <button class="close-btn" onclick="closeModal('employeeStatusModal')">&times;</button>
            </div>
            <div id="employeeStatusContent">
                <!-- Employee status content will be populated here -->
            </div>
        </div>
    </div>

    <script>
        // Ù†Ø¸Ø§Ù… ØªØªØ¨Ø¹ Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ù…ØªÙ‚Ø¯Ù… ÙˆØ§Ù„Ø¯Ù‚ÙŠÙ‚ Ù…Ø¹ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙÙˆØ±ÙŠØ© Ù„Ù„Ù…Ø¯ÙŠØ±
        const connectionTracker = {
            // Ù…ÙØªØ§Ø­ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø´ØªØ±Ùƒ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©
            STORAGE_KEY: 'oudGlobalConnectionData',
            BROADCAST_KEY: 'oudConnectionBroadcast',
            HEARTBEAT_KEY: 'oudHeartbeat',
            
            // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø¹ Ø¥Ø´Ø¹Ø§Ø± ÙÙˆØ±ÙŠ Ù„Ù„Ù…Ø¯ÙŠØ± ÙˆØ­ÙØ¸ Ø¹Ø§Ù„Ù…ÙŠ
            updateUserStatus(username, isOnline) {
                if (users[username]) {
                    const wasOnline = users[username].isOnline;
                    users[username].isOnline = isOnline;
                    users[username].connectionStatus = isOnline ? 'Ù…ØªØµÙ„' : 'ØºÙŠØ± Ù…ØªØµÙ„';
                    users[username].lastActivity = new Date().toISOString();
                    users[username].deviceInfo = this.getDeviceInfo();
                    users[username].sessionId = this.generateSessionId();
                    
                    console.log(`ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© ${users[username].name}: ${isOnline ? 'ğŸŸ¢ Ù…ØªØµÙ„' : 'ğŸ”´ ØºÙŠØ± Ù…ØªØµÙ„'}`);
                    console.log(`ğŸ“± Ø§Ù„Ø¬Ù‡Ø§Ø²: ${users[username].deviceInfo.type} - ${users[username].deviceInfo.browser}`);
                    console.log(`ğŸ†” Ù…Ø¹Ø±Ù Ø§Ù„Ø¬Ù„Ø³Ø©: ${users[username].sessionId}`);
                    
                    // Ø­ÙØ¸ Ø¹Ø§Ù„Ù…ÙŠ ÙÙˆØ±ÙŠ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©
                    this.saveGlobalConnectionData();
                    
                    // Ø¨Ø« ÙÙˆØ±ÙŠ Ù„Ù„ØªØºÙŠÙŠØ± Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©
                    this.broadcastToAllDevices(username, isOnline);
                    
                    // Ø¥Ø´Ø¹Ø§Ø± ÙÙˆØ±ÙŠ Ù„Ù„Ù…Ø¯ÙŠØ± Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„
                    if (wasOnline !== isOnline) {
                        this.notifyAdminOfStatusChange(username, isOnline);
                        this.broadcastStatusChange(username, isOnline);
                    }
                    
                    // ØªØ­Ø¯ÙŠØ« ÙÙˆØ±ÙŠ Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø¯ÙŠØ± Ù…ØªØµÙ„
                    if (currentUser && currentUser.role === 'Ù…Ø¯ÙŠØ±') {
                        setTimeout(() => {
                            preciseEmployeeManagement.updatePreciseEmployeeTable();
                        }, 100);
                    }
                }
            },

            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¬Ù‡Ø§Ø²
            getDeviceInfo() {
                const userAgent = navigator.userAgent;
                let deviceType = 'Desktop';
                let browser = 'Unknown';
                let os = 'Unknown';
                
                // ØªØ­Ø¯ÙŠØ¯ Ù†ÙˆØ¹ Ø§Ù„Ø¬Ù‡Ø§Ø²
                if (/Mobile|Android|iPhone|iPad/.test(userAgent)) {
                    deviceType = /iPad/.test(userAgent) ? 'Tablet' : 'Mobile';
                }
                
                // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ØªØµÙØ­
                if (userAgent.includes('Chrome')) browser = 'Chrome';
                else if (userAgent.includes('Firefox')) browser = 'Firefox';
                else if (userAgent.includes('Safari')) browser = 'Safari';
                else if (userAgent.includes('Edge')) browser = 'Edge';
                
                // ØªØ­Ø¯ÙŠØ¯ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ´ØºÙŠÙ„
                if (userAgent.includes('Windows')) os = 'Windows';
                else if (userAgent.includes('Mac')) os = 'macOS';
                else if (userAgent.includes('Linux')) os = 'Linux';
                else if (userAgent.includes('Android')) os = 'Android';
                else if (userAgent.includes('iOS')) os = 'iOS';
                
                return {
                    type: deviceType,
                    browser: browser,
                    os: os,
                    userAgent: userAgent,
                    timestamp: new Date().toISOString()
                };
            },

            // ØªÙˆÙ„ÙŠØ¯ Ù…Ø¹Ø±Ù Ø¬Ù„Ø³Ø© ÙØ±ÙŠØ¯
            generateSessionId() {
                return 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            },

            // Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© (Ù…Ø´ØªØ±ÙƒØ© Ø¨ÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©)
            saveGlobalConnectionData() {
                try {
                    const globalData = {
                        lastUpdate: new Date().toISOString(),
                        connections: {}
                    };
                    
                    Object.keys(users).forEach(username => {
                        const user = users[username];
                        globalData.connections[username] = {
                            isOnline: user.isOnline || false,
                            lastLogin: user.lastLogin,
                            lastActivity: user.lastActivity,
                            connectionStatus: user.connectionStatus || 'ØºÙŠØ± Ù…ØªØµÙ„',
                            deviceInfo: user.deviceInfo,
                            sessionId: user.sessionId,
                            name: user.name,
                            role: user.role,
                            code: user.code
                        };
                    });
                    
                    localStorage.setItem(this.STORAGE_KEY, JSON.stringify(globalData));
                    
                    // Ù…Ø­Ø§ÙˆÙ„Ø© Ø­ÙØ¸ ÙÙŠ IndexedDB Ù„Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©
                    this.saveToIndexedDB(globalData);
                    
                    console.log('ğŸŒ ØªÙ… Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ©');
                    
                } catch (error) {
                    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ©:', error);
                }
            },

            // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ©
            loadGlobalConnectionData() {
                try {
                    const globalData = localStorage.getItem(this.STORAGE_KEY);
                    if (globalData) {
                        const data = JSON.parse(globalData);
                        
                        Object.keys(data.connections).forEach(username => {
                            if (users[username]) {
                                const connectionData = data.connections[username];
                                users[username].isOnline = connectionData.isOnline || false;
                                users[username].lastLogin = connectionData.lastLogin;
                                users[username].lastActivity = connectionData.lastActivity;
                                users[username].connectionStatus = connectionData.connectionStatus || 'ØºÙŠØ± Ù…ØªØµÙ„';
                                users[username].deviceInfo = connectionData.deviceInfo;
                                users[username].sessionId = connectionData.sessionId;
                            }
                        });
                        
                        console.log('ğŸŒ ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ©');
                        console.log(`ğŸ“Š Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: ${data.lastUpdate}`);
                        
                        // Ø¹Ø±Ø¶ Ø§Ù„Ù…ØªØµÙ„ÙŠÙ† Ø­Ø§Ù„ÙŠØ§Ù‹
                        const onlineUsers = Object.keys(data.connections).filter(u => data.connections[u].isOnline);
                        console.log(`ğŸ‘¥ Ø§Ù„Ù…ØªØµÙ„ÙŠÙ† Ø­Ø§Ù„ÙŠØ§Ù‹: ${onlineUsers.length}`);
                        onlineUsers.forEach(username => {
                            const conn = data.connections[username];
                            console.log(`   ğŸŸ¢ ${conn.name} - ${conn.deviceInfo?.type || 'Unknown'} (${conn.deviceInfo?.browser || 'Unknown'})`);
                        });
                    }
                } catch (error) {
                    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ©:', error);
                }
            },

            // Ø¨Ø« ÙÙˆØ±ÙŠ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© ÙˆØ§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
            broadcastToAllDevices(username, isOnline) {
                const broadcastData = {
                    type: 'connection_update',
                    username: username,
                    isOnline: isOnline,
                    timestamp: new Date().toISOString(),
                    user: users[username],
                    deviceInfo: users[username].deviceInfo,
                    sessionId: users[username].sessionId
                };
                
                // Ø­ÙØ¸ ÙÙŠ localStorage Ù„Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ø¨ÙŠÙ† Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
                localStorage.setItem(this.BROADCAST_KEY, JSON.stringify(broadcastData));
                
                // Ø¥Ø±Ø³Ø§Ù„ Ø­Ø¯Ø« Ù…Ø®ØµØµ Ù„Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª ÙÙŠ Ù†ÙØ³ Ø§Ù„Ø¬Ù‡Ø§Ø²
                const event = new CustomEvent('oudConnectionUpdate', {
                    detail: broadcastData
                });
                window.dispatchEvent(event);
                
                console.log(`ğŸ“¡ Ø¨Ø« ÙÙˆØ±ÙŠ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©: ${users[username].name} ${isOnline ? 'Ù…ØªØµÙ„' : 'ØºÙŠØ± Ù…ØªØµÙ„'}`);
                
                // Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø¨Ø± BroadcastChannel Ù„Ù„Ù…ØªØµÙØ­Ø§Øª Ø§Ù„Ø­Ø¯ÙŠØ«Ø©
                try {
                    if (typeof BroadcastChannel !== 'undefined') {
                        const channel = new BroadcastChannel('oudSystem');
                        channel.postMessage(broadcastData);
                        console.log('ğŸ“» ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø¨Ø± BroadcastChannel');
                    }
                } catch (error) {
                    console.log('âš ï¸ BroadcastChannel ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…');
                }
            },

            // Ø¨Ø« ØªØºÙŠÙŠØ± Ø§Ù„Ø­Ø§Ù„Ø© Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…ØªØµÙ„Ø©
            broadcastStatusChange(username, isOnline) {
                // Ø¥Ø±Ø³Ø§Ù„ Ø­Ø¯Ø« Ù…Ø®ØµØµ Ù„Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰
                const event = new CustomEvent('oudStatusChange', {
                    detail: {
                        username: username,
                        isOnline: isOnline,
                        timestamp: new Date().toISOString(),
                        user: users[username]
                    }
                });
                
                window.dispatchEvent(event);
                
                // Ù…Ø­Ø§ÙƒØ§Ø© Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ø®Ø§Ø¯Ù… (ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ø³ÙŠÙƒÙˆÙ† WebSocket)
                this.simulateServerBroadcast(username, isOnline);
                
                console.log(`ğŸ“¡ ØªÙ… Ø¨Ø« ØªØºÙŠÙŠØ± Ø­Ø§Ù„Ø© ${users[username].name} Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©`);
            },

            // Ù…Ø­Ø§ÙƒØ§Ø© Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ø®Ø§Ø¯Ù…
            simulateServerBroadcast(username, isOnline) {
                // ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØŒ Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ù‡Ø°Ø§ Ù„Ù„Ø®Ø§Ø¯Ù… Ø¹Ø¨Ø± WebSocket Ø£Ùˆ API
                const broadcastData = {
                    type: 'status_change',
                    username: username,
                    isOnline: isOnline,
                    timestamp: new Date().toISOString(),
                    deviceInfo: users[username].deviceInfo,
                    sessionId: users[username].sessionId
                };
                
                console.log('ğŸŒ Ù…Ø­Ø§ÙƒØ§Ø© Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ø®Ø§Ø¯Ù…:', broadcastData);
                
                // Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù… Ø¨Ø¹Ø¯ ØªØ£Ø®ÙŠØ± Ù‚ØµÙŠØ±
                setTimeout(() => {
                    this.handleServerBroadcast(broadcastData);
                }, 500);
            },

            // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¨Ø« Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù…
            handleServerBroadcast(data) {
                console.log('ğŸ“¨ Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø¨Ø« Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù…:', data);
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©
                if (users[data.username]) {
                    users[data.username].isOnline = data.isOnline;
                    users[data.username].lastActivity = data.timestamp;
                    users[data.username].deviceInfo = data.deviceInfo;
                }
                
                // Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø¯ÙŠØ± Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ØªØµÙ„
                if (currentUser && currentUser.role === 'Ù…Ø¯ÙŠØ±') {
                    this.showRealTimeNotification(data);
                }
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
                this.broadcastUpdate();
            },

            // Ø¹Ø±Ø¶ Ø¥Ø´Ø¹Ø§Ø± ÙÙˆØ±ÙŠ Ù„Ù„Ù…Ø¯ÙŠØ±
            showRealTimeNotification(data) {
                const user = users[data.username];
                if (!user || user.role === 'Ù…Ø¯ÙŠØ±') return;
                
                const statusText = data.isOnline ? 'Ø¯Ø®Ù„ Ù„Ù„Ù†Ø¸Ø§Ù…' : 'Ø®Ø±Ø¬ Ù…Ù† Ø§Ù„Ù†Ø¸Ø§Ù…';
                const statusIcon = data.isOnline ? 'ğŸŸ¢' : 'ğŸ”´';
                const deviceInfo = data.deviceInfo ? `${data.deviceInfo.type} - ${data.deviceInfo.browser}` : 'Ø¬Ù‡Ø§Ø² ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
                
                // Ø¥Ù†Ø´Ø§Ø¡ Ø¥Ø´Ø¹Ø§Ø± Ù…ØªÙ‚Ø¯Ù…
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    top: 80px;
                    right: 20px;
                    background: linear-gradient(135deg, var(--oud-gold), var(--oud-amber));
                    color: var(--oud-black);
                    padding: 20px 25px;
                    border-radius: 15px;
                    font-family: 'Cairo', sans-serif;
                    font-weight: 700;
                    z-index: 15000;
                    box-shadow: 0 8px 25px rgba(212, 175, 55, 0.4);
                    animation: slideInRight 0.5s ease-out;
                    border: 2px solid var(--oud-bronze);
                    min-width: 350px;
                    cursor: pointer;
                `;
                
                notification.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <div style="font-size: 2.5rem;">${statusIcon}</div>
                        <div style="flex: 1;">
                            <div style="font-size: 1.2rem; font-weight: 800; margin-bottom: 5px;">
                                ${user.name}
                            </div>
                            <div style="font-size: 0.9rem; opacity: 0.8; margin-bottom: 3px;">
                                ${statusText} - ${new Date().toLocaleTimeString('ar-SA', { hour12: false })}
                            </div>
                            <div style="font-size: 0.8rem; opacity: 0.7;">
                                ğŸ“± ${deviceInfo}
                            </div>
                        </div>
                        <div style="font-size: 1.5rem; opacity: 0.6;">
                            ${data.isOnline ? 'ğŸ”¥' : 'ğŸ’¤'}
                        </div>
                    </div>
                `;
                
                document.body.appendChild(notification);
                
                // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø¨Ø¹Ø¯ 6 Ø«ÙˆØ§Ù† Ø£Ùˆ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø±
                const removeNotification = () => {
                    notification.style.animation = 'slideOutRight 0.3s ease-in';
                    setTimeout(() => {
                        if (document.body.contains(notification)) {
                            document.body.removeChild(notification);
                        }
                    }, 300);
                };
                
                notification.addEventListener('click', removeNotification);
                setTimeout(removeNotification, 6000);
                
                // ØµÙˆØª ØªÙ†Ø¨ÙŠÙ‡ (Ù…Ø­Ø§ÙƒØ§Ø©)
                console.log(`ğŸ”” Ø¥Ø´Ø¹Ø§Ø± ÙÙˆØ±ÙŠ Ù„Ù„Ù…Ø¯ÙŠØ±: ${user.name} ${statusText} Ù…Ù† ${deviceInfo}`);
            },

            // Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø¯ÙŠØ± ÙÙˆØ±Ø§Ù‹ Ø¨ØªØºÙŠÙŠØ± Ø­Ø§Ù„Ø© Ø§Ù„Ù…ÙˆØ¸Ù
            notifyAdminOfStatusChange(username, isOnline) {
                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù…Ø¯ÙŠØ± Ù…ØªØµÙ„
                if (currentUser && currentUser.role === 'Ù…Ø¯ÙŠØ±') {
                    const user = users[username];
                    if (user && user.role !== 'Ù…Ø¯ÙŠØ±') {
                        const statusText = isOnline ? 'Ø¯Ø®Ù„ Ù„Ù„Ù†Ø¸Ø§Ù…' : 'Ø®Ø±Ø¬ Ù…Ù† Ø§Ù„Ù†Ø¸Ø§Ù…';
                        const statusIcon = isOnline ? 'ğŸŸ¢' : 'ğŸ”´';
                        const currentTime = new Date().toLocaleTimeString('ar-SA', { hour12: false });
                        
                        // Ø¥Ø´Ø¹Ø§Ø± ØµÙˆØªÙŠ ÙˆÙ…Ø±Ø¦ÙŠ ÙÙˆØ±ÙŠ
                        this.showAdminNotification(user.name, statusText, statusIcon, currentTime);
                        
                        // ØªØ³Ø¬ÙŠÙ„ ÙÙŠ Ø§Ù„ÙƒÙˆÙ†Ø³ÙˆÙ„ Ù„Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©
                        console.log(`ğŸ‘¨â€ğŸ’¼ Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø¯ÙŠØ±: ${user.name} ${statusText} ÙÙŠ ${currentTime}`);
                        
                        // Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ÙˆØ¸Ù Ø¯Ø®Ù„ Ù„Ù„Ù†Ø¸Ø§Ù…ØŒ Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©
                        if (isOnline) {
                            setTimeout(() => {
                                this.showEmployeeLoginDetails(username);
                            }, 2000);
                        }
                    }
                }
            },

            // Ø¹Ø±Ø¶ Ø¥Ø´Ø¹Ø§Ø± ÙÙˆØ±ÙŠ Ù„Ù„Ù…Ø¯ÙŠØ±
            showAdminNotification(employeeName, statusText, statusIcon, time) {
                // Ø¥Ù†Ø´Ø§Ø¡ Ø¥Ø´Ø¹Ø§Ø± Ù…Ù†Ø¨Ø«Ù‚ ÙÙˆØ±ÙŠ
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    top: 80px;
                    right: 20px;
                    background: linear-gradient(135deg, var(--oud-gold), var(--oud-amber));
                    color: var(--oud-black);
                    padding: 20px 25px;
                    border-radius: 15px;
                    font-family: 'Cairo', sans-serif;
                    font-weight: 700;
                    z-index: 15000;
                    box-shadow: 0 8px 25px rgba(212, 175, 55, 0.4);
                    animation: slideInRight 0.5s ease-out;
                    border: 2px solid var(--oud-bronze);
                    min-width: 300px;
                    cursor: pointer;
                `;
                
                notification.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <div style="font-size: 2rem;">${statusIcon}</div>
                        <div>
                            <div style="font-size: 1.1rem; font-weight: 800; margin-bottom: 5px;">
                                ${employeeName}
                            </div>
                            <div style="font-size: 0.9rem; opacity: 0.8;">
                                ${statusText} - ${time}
                            </div>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(notification);
                
                // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù† Ø£Ùˆ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø±
                const removeNotification = () => {
                    notification.style.animation = 'slideOutRight 0.3s ease-in';
                    setTimeout(() => {
                        if (document.body.contains(notification)) {
                            document.body.removeChild(notification);
                        }
                    }, 300);
                };
                
                notification.addEventListener('click', removeNotification);
                setTimeout(removeNotification, 5000);
                
                // ØµÙˆØª ØªÙ†Ø¨ÙŠÙ‡ (Ù…Ø­Ø§ÙƒØ§Ø©)
                console.log(`ğŸ”” ØªÙ†Ø¨ÙŠÙ‡ ØµÙˆØªÙŠ: ${employeeName} ${statusText}`);
            },

            // Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…ÙˆØ¸Ù Ù„Ù„Ù…Ø¯ÙŠØ±
            showEmployeeLoginDetails(username) {
                if (!currentUser || currentUser.role !== 'Ù…Ø¯ÙŠØ±') return;
                
                const user = users[username];
                const employee = employeesData.find(emp => {
                    const empUsername = Object.keys(users).find(u => users[u].name === emp.name);
                    return empUsername === username;
                });
                
                if (!user || !employee) return;
                
                // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø­Ø§Ù„Ø© Ø§Ù„Ù…ÙˆØ¸Ù Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø©
                const status = preciseEmployeeManagement.getPreciseEmployeeStatus(employee);
                const connectionDuration = this.getConnectionDuration(username);
                
                // Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø§ÙØ°Ø© ØªÙØ§ØµÙŠÙ„ Ø³Ø±ÙŠØ¹Ø©
                const detailsModal = document.createElement('div');
                detailsModal.style.cssText = `
                    position: fixed;
                    top: 50%;
                    right: 20px;
                    transform: translateY(-50%);
                    background: var(--gradient-secondary);
                    border: 2px solid var(--oud-gold);
                    border-radius: 20px;
                    padding: 25px;
                    z-index: 16000;
                    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
                    animation: modalBounce 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
                    max-width: 350px;
                    backdrop-filter: blur(10px);
                `;
                
                detailsModal.innerHTML = `
                    <div style="text-align: center;">
                        <div style="font-size: 3rem; margin-bottom: 15px;">${status.icon}</div>
                        <h3 style="color: var(--oud-gold); margin-bottom: 10px; font-size: 1.3rem;">
                            ${user.name}
                        </h3>
                        <div style="color: var(--oud-cream); margin-bottom: 20px; font-size: 0.9rem;">
                            ${user.code} - ${employee.department}
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                            <div style="background: ${status.color}15; border-radius: 10px; padding: 12px; border: 1px solid ${status.color}30;">
                                <div style="color: var(--oud-cream); font-size: 0.8rem; margin-bottom: 5px;">Ø§Ù„Ø­Ø§Ù„Ø©</div>
                                <div style="color: ${status.color}; font-weight: bold; font-size: 0.9rem;">${status.status}</div>
                            </div>
                            <div style="background: #10b98115; border-radius: 10px; padding: 12px; border: 1px solid #10b981;">
                                <div style="color: var(--oud-cream); font-size: 0.8rem; margin-bottom: 5px;">Ù…ØªØµÙ„ Ù…Ù†Ø°</div>
                                <div style="color: #10b981; font-weight: bold; font-size: 0.9rem;">${connectionDuration} Ø¯Ù‚ÙŠÙ‚Ø©</div>
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                            <div style="background: var(--glass-bg); border-radius: 8px; padding: 10px; border: 1px solid var(--oud-bronze);">
                                <div style="color: var(--oud-cream); font-size: 0.7rem;">Ø§Ù„ÙˆØ±Ø¯ÙŠØ©</div>
                                <div style="color: var(--oud-gold); font-weight: bold; font-size: 0.8rem;">${status.scheduledShift}</div>
                            </div>
                            <div style="background: var(--glass-bg); border-radius: 8px; padding: 10px; border: 1px solid var(--oud-bronze);">
                                <div style="color: var(--oud-cream); font-size: 0.7rem;">Ø§Ù„Ø­Ø¶ÙˆØ±</div>
                                <div style="color: ${status.attendanceTime !== '-' ? '#10b981' : '#6b7280'}; font-weight: bold; font-size: 0.8rem;">${status.attendanceTime}</div>
                            </div>
                        </div>
                        
                        <button onclick="this.closest('div').remove()" style="
                            background: var(--oud-bronze);
                            color: white;
                            border: none;
                            padding: 10px 20px;
                            border-radius: 10px;
                            font-family: 'Cairo', sans-serif;
                            font-weight: 600;
                            cursor: pointer;
                            transition: all 0.3s ease;
                        " onmouseover="this.style.background='var(--oud-brown)'" onmouseout="this.style.background='var(--oud-bronze)'">
                            Ø¥ØºÙ„Ø§Ù‚
                        </button>
                    </div>
                `;
                
                document.body.appendChild(detailsModal);
                
                // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù†Ø§ÙØ°Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¹Ø¯ 10 Ø«ÙˆØ§Ù†
                setTimeout(() => {
                    if (document.body.contains(detailsModal)) {
                        detailsModal.style.animation = 'modalSlideOut 0.3s ease-in-out';
                        setTimeout(() => {
                            if (document.body.contains(detailsModal)) {
                                document.body.removeChild(detailsModal);
                            }
                        }, 300);
                    }
                }, 10000);
            },
            
            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…ØªØµÙ„ÙŠÙ†
            getOnlineUsers() {
                return Object.keys(users).filter(username => users[username].isOnline);
            },
            
            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØªØµÙ„ÙŠÙ†
            getOnlineCount() {
                return this.getOnlineUsers().length;
            },
            
            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…ØªØµÙ„ÙŠÙ† Ù…Ø¹ Ø§Ù„ØªÙØ§ØµÙŠÙ„
            getOnlineUsersDetails() {
                return this.getOnlineUsers().map(username => ({
                    username,
                    ...users[username],
                    connectionDuration: this.getConnectionDuration(username)
                }));
            },
            
            // Ø­Ø³Ø§Ø¨ Ù…Ø¯Ø© Ø§Ù„Ø§ØªØµØ§Ù„
            getConnectionDuration(username) {
                const user = users[username];
                if (!user || !user.isOnline || !user.lastLogin) return 0;
                
                const loginTime = new Date(user.lastLogin);
                const now = new Date();
                return Math.floor((now - loginTime) / (1000 * 60)); // Ø¨Ø§Ù„Ø¯Ù‚Ø§Ø¦Ù‚
            },
            
            // Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ø¨Ø¶Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù… Ù„Ù„ØªØ²Ø§Ù…Ù† Ø¹Ø¨Ø± Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©
            startHeartbeatSystem() {
                // Ø¥Ø±Ø³Ø§Ù„ Ù†Ø¨Ø¶Ø© ÙƒÙ„ Ø«Ø§Ù†ÙŠØªÙŠÙ†
                setInterval(() => {
                    if (currentUser) {
                        const heartbeat = {
                            username: currentUser.username,
                            name: currentUser.name,
                            role: currentUser.role,
                            code: currentUser.code,
                            timestamp: new Date().toISOString(),
                            isOnline: true,
                            deviceInfo: this.getDeviceInfo(),
                            sessionId: currentUser.sessionId || this.generateSessionId()
                        };
                        
                        // Ø­ÙØ¸ Ø§Ù„Ù†Ø¨Ø¶Ø© ÙÙŠ localStorage
                        localStorage.setItem(this.HEARTBEAT_KEY + '_' + currentUser.username, JSON.stringify(heartbeat));
                        
                        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
                        this.updateUserStatus(currentUser.username, true);
                        
                        console.log(`ğŸ’“ Ù†Ø¨Ø¶Ø©: ${currentUser.name} Ù…ØªØµÙ„`);
                    }
                }, 2000);
                
                // Ù…Ø±Ø§Ù‚Ø¨Ø© Ù†Ø¨Ø¶Ø§Øª Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†
                setInterval(() => {
                    this.checkOtherUsersHeartbeats();
                }, 1000);
            },
            
            // ÙØ­Øµ Ù†Ø¨Ø¶Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†
            checkOtherUsersHeartbeats() {
                Object.keys(users).forEach(username => {
                    if (username !== (currentUser ? currentUser.username : '')) {
                        const heartbeatKey = this.HEARTBEAT_KEY + '_' + username;
                        const heartbeatData = localStorage.getItem(heartbeatKey);
                        
                        if (heartbeatData) {
                            try {
                                const heartbeat = JSON.parse(heartbeatData);
                                const heartbeatTime = new Date(heartbeat.timestamp);
                                const now = new Date();
                                const timeDiff = (now - heartbeatTime) / 1000; // Ø¨Ø§Ù„Ø«ÙˆØ§Ù†ÙŠ
                                
                                // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ù†Ø¨Ø¶Ø© Ø­Ø¯ÙŠØ«Ø© (Ø£Ù‚Ù„ Ù…Ù† 10 Ø«ÙˆØ§Ù†)
                                if (timeDiff < 10) {
                                    const wasOnline = users[username].isOnline;
                                    users[username].isOnline = true;
                                    users[username].lastActivity = heartbeat.timestamp;
                                    users[username].deviceInfo = heartbeat.deviceInfo;
                                    
                                    // Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø¯ÙŠØ± Ø¹Ù†Ø¯ Ø§ØªØµØ§Ù„ Ù…ÙˆØ¸Ù Ø¬Ø¯ÙŠØ¯
                                    if (!wasOnline && currentUser && currentUser.role === 'Ù…Ø¯ÙŠØ±' && users[username].role !== 'Ù…Ø¯ÙŠØ±') {
                                        console.log(`ğŸŸ¢ ${heartbeat.name} Ù…ØªØµÙ„ Ø§Ù„Ø¢Ù†`);
                                        this.showRealTimeNotification({
                                            username: username,
                                            isOnline: true,
                                            timestamp: heartbeat.timestamp,
                                            user: users[username],
                                            deviceInfo: heartbeat.deviceInfo
                                        });
                                    }
                                } else {
                                    // Ø§Ù„Ù†Ø¨Ø¶Ø© Ù‚Ø¯ÙŠÙ…Ø© - Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ØªØµÙ„
                                    if (users[username].isOnline) {
                                        users[username].isOnline = false;
                                        console.log(`ğŸ”´ ${users[username].name} ØºÙŠØ± Ù…ØªØµÙ„ (Ù†Ø¨Ø¶Ø© Ù‚Ø¯ÙŠÙ…Ø©)`);
                                    }
                                }
                            } catch (error) {
                                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù†Ø¨Ø¶Ø©:', error);
                            }
                        } else {
                            // Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†Ø¨Ø¶Ø© - Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ØªØµÙ„
                            if (users[username].isOnline) {
                                users[username].isOnline = false;
                                console.log(`ğŸ”´ ${users[username].name} ØºÙŠØ± Ù…ØªØµÙ„ (Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†Ø¨Ø¶Ø©)`);
                            }
                        }
                    }
                });
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ ØªØºÙŠÙŠØ±Ø§Øª
                if (currentUser && currentUser.role === 'Ù…Ø¯ÙŠØ±') {
                    this.updateManagerInterface();
                }
            },
            
            // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø¯ÙŠØ±
            updateManagerInterface() {
                updateStats();
                updateAttendanceStats();
                preciseEmployeeManagement.updatePreciseEmployeeTable();
            },

            // Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø¹Ø¨Ø± Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©
            setupCrossDeviceMonitoring() {
                // Ø¨Ø¯Ø¡ Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ø¨Ø¶Ø§Øª
                this.startHeartbeatSystem();
                
                // Ù…Ø±Ø§Ù‚Ø¨Ø© ØªØºÙŠÙŠØ±Ø§Øª localStorage Ù„Ù„ØªØ²Ø§Ù…Ù† Ø¨ÙŠÙ† Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª ÙˆØ§Ù„Ø£Ø¬Ù‡Ø²Ø©
                window.addEventListener('storage', (e) => {
                    if (e.key === this.STORAGE_KEY) {
                        console.log('ğŸ”„ ØªÙ… Ø§ÙƒØªØ´Ø§Ù ØªØºÙŠÙŠØ± ÙÙŠ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„ Ù…Ù† Ø¬Ù‡Ø§Ø² Ø¢Ø®Ø±');
                        this.loadGlobalConnectionData();
                        
                        // ØªØ­Ø¯ÙŠØ« ÙÙˆØ±ÙŠ Ù„Ù„ÙˆØ§Ø¬Ù‡Ø©
                        if (currentUser) {
                            setTimeout(() => {
                                updateStats();
                                updateAttendanceStats();
                                preciseEmployeeManagement.updatePreciseEmployeeTable();
                            }, 100);
                        }
                        
                        // Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø¯ÙŠØ± Ø¨Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª
                        if (currentUser && currentUser.role === 'Ù…Ø¯ÙŠØ±') {
                            this.checkForNewConnections();
                        }
                    }
                    
                    // Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø±
                    if (e.key === this.BROADCAST_KEY) {
                        try {
                            const broadcastData = JSON.parse(e.newValue);
                            console.log('ğŸ“» Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø¨Ø« Ù…Ø¨Ø§Ø´Ø±:', broadcastData);
                            
                            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©
                            if (users[broadcastData.username]) {
                                users[broadcastData.username].isOnline = broadcastData.isOnline;
                                users[broadcastData.username].lastActivity = broadcastData.timestamp;
                                users[broadcastData.username].deviceInfo = broadcastData.deviceInfo;
                                users[broadcastData.username].sessionId = broadcastData.sessionId;
                            }
                            
                            // Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø¯ÙŠØ± ÙÙˆØ±Ø§Ù‹
                            if (currentUser && currentUser.role === 'Ù…Ø¯ÙŠØ±' && broadcastData.username !== currentUser.username) {
                                this.showRealTimeNotification(broadcastData);
                                
                                // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
                                setTimeout(() => {
                                    updateStats();
                                    updateAttendanceStats();
                                    preciseEmployeeManagement.updatePreciseEmployeeTable();
                                }, 200);
                            }
                        } catch (error) {
                            console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¨Ø«:', error);
                        }
                    }
                });
                
                // Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù…Ø®ØµØµØ©
                window.addEventListener('oudStatusChange', (e) => {
                    const { username, isOnline, user } = e.detail;
                    console.log(`ğŸ“¡ Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø­Ø¯Ø« ØªØºÙŠÙŠØ± Ø­Ø§Ù„Ø©: ${user.name} ${isOnline ? 'Ù…ØªØµÙ„' : 'ØºÙŠØ± Ù…ØªØµÙ„'}`);
                    
                    // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© ÙÙˆØ±Ø§Ù‹
                    if (currentUser && currentUser.role === 'Ù…Ø¯ÙŠØ±') {
                        this.showRealTimeNotification(e.detail);
                        setTimeout(() => {
                            updateStats();
                            preciseEmployeeManagement.updatePreciseEmployeeTable();
                        }, 200);
                    }
                });
                
                // Ù…Ø±Ø§Ù‚Ø¨Ø© Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
                window.addEventListener('oudConnectionUpdate', (e) => {
                    const broadcastData = e.detail;
                    console.log('ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø§ØªØµØ§Ù„ Ù…Ø¨Ø§Ø´Ø±:', broadcastData);
                    
                    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©
                    if (users[broadcastData.username]) {
                        users[broadcastData.username].isOnline = broadcastData.isOnline;
                        users[broadcastData.username].lastActivity = broadcastData.timestamp;
                        users[broadcastData.username].deviceInfo = broadcastData.deviceInfo;
                    }
                    
                    // Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø¯ÙŠØ±
                    if (currentUser && currentUser.role === 'Ù…Ø¯ÙŠØ±' && broadcastData.username !== currentUser.username) {
                        this.showRealTimeNotification(broadcastData);
                        
                        setTimeout(() => {
                            updateStats();
                            updateAttendanceStats();
                            preciseEmployeeManagement.updatePreciseEmployeeTable();
                        }, 100);
                    }
                });
                
                // Ø¥Ø¹Ø¯Ø§Ø¯ BroadcastChannel Ù„Ù„Ù…ØªØµÙØ­Ø§Øª Ø§Ù„Ø­Ø¯ÙŠØ«Ø©
                try {
                    if (typeof BroadcastChannel !== 'undefined') {
                        const channel = new BroadcastChannel('oudSystem');
                        channel.addEventListener('message', (e) => {
                            const broadcastData = e.data;
                            console.log('ğŸ“» Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø¹Ø¨Ø± BroadcastChannel:', broadcastData);
                            
                            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                            if (users[broadcastData.username]) {
                                users[broadcastData.username].isOnline = broadcastData.isOnline;
                                users[broadcastData.username].lastActivity = broadcastData.timestamp;
                            }
                            
                            // Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø¯ÙŠØ±
                            if (currentUser && currentUser.role === 'Ù…Ø¯ÙŠØ±' && broadcastData.username !== currentUser.username) {
                                this.showRealTimeNotification(broadcastData);
                                
                                setTimeout(() => {
                                    updateStats();
                                    updateAttendanceStats();
                                    preciseEmployeeManagement.updatePreciseEmployeeTable();
                                }, 100);
                            }
                        });
                        console.log('ğŸ“» ØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ BroadcastChannel');
                    }
                } catch (error) {
                    console.log('âš ï¸ BroadcastChannel ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…');
                }
                
                // Ù…Ø±Ø§Ù‚Ø¨Ø© Ø¯ÙˆØ±ÙŠØ© Ù…ÙƒØ«ÙØ© Ù„Ù„ØªØºÙŠÙŠØ±Ø§Øª (ÙƒÙ„ 3 Ø«ÙˆØ§Ù†)
                setInterval(() => {
                    this.syncWithOtherDevices();
                }, 3000);
                
                // Ù…Ø±Ø§Ù‚Ø¨Ø© ÙÙˆØ±ÙŠØ© ÙƒÙ„ Ø«Ø§Ù†ÙŠØ© Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„ØªØ²Ø§Ù…Ù†
                setInterval(() => {
                    if (currentUser && currentUser.role === 'Ù…Ø¯ÙŠØ±') {
                        this.checkForNewConnections();
                    }
                }, 1000);
                
                console.log('ğŸŒ ØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© Ø¹Ø¨Ø± Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©');
            },

            // Ù…Ø²Ø§Ù…Ù†Ø© Ù…Ø¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ø£Ø®Ø±Ù‰
            syncWithOtherDevices() {
                const currentData = localStorage.getItem(this.STORAGE_KEY);
                if (currentData) {
                    const data = JSON.parse(currentData);
                    const lastUpdate = new Date(data.lastUpdate);
                    const now = new Date();
                    
                    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„ØªØ²Ø§Ù…Ù†
                    this.loadGlobalConnectionData();
                    
                    // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ ØªØºÙŠÙŠØ±Ø§Øª
                    if (currentUser) {
                        updateStats();
                        if (currentUser.role === 'Ù…Ø¯ÙŠØ±') {
                            preciseEmployeeManagement.updatePreciseEmployeeTable();
                            
                            // ÙØ­Øµ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ù…ØªØµÙ„ÙŠÙ† Ø§Ù„Ø¬Ø¯Ø¯
                            this.detectNewConnections();
                        }
                    }
                }
            },
            
            // Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ø§ØªØµØ§Ù„Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
            detectNewConnections() {
                const globalData = localStorage.getItem(this.STORAGE_KEY);
                if (!globalData) return;
                
                const data = JSON.parse(globalData);
                const onlineUsers = Object.keys(data.connections).filter(u => 
                    data.connections[u].isOnline && 
                    data.connections[u].role !== 'Ù…Ø¯ÙŠØ±' &&
                    u !== (currentUser ? currentUser.username : '')
                );
                
                // Ø¥Ø´Ø¹Ø§Ø± Ø¨Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ù…ØªØµÙ„ÙŠÙ†
                if (onlineUsers.length > 0) {
                    console.log(`ğŸ‘¥ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ù…ØªØµÙ„ÙŠÙ† Ø­Ø§Ù„ÙŠØ§Ù‹: ${onlineUsers.length}`);
                    onlineUsers.forEach(username => {
                        const conn = data.connections[username];
                        console.log(`   ğŸŸ¢ ${conn.name} - ${conn.deviceInfo?.type || 'Desktop'} (${conn.deviceInfo?.browser || 'Unknown'})`);
                        
                        // Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø¯ÙŠØ± Ø¨Ø§Ù„Ù…ÙˆØ¸Ù Ø§Ù„Ù…ØªØµÙ„
                        if (currentUser && currentUser.role === 'Ù…Ø¯ÙŠØ±') {
                            this.showConnectionAlert(conn);
                        }
                    });
                }
            },
            
            // Ø¹Ø±Ø¶ ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ø§ØªØµØ§Ù„
            showConnectionAlert(employeeData) {
                // ØªØ¬Ù†Ø¨ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…ØªÙƒØ±Ø±Ø©
                const alertKey = `alert_${employeeData.name}_${Date.now()}`;
                if (sessionStorage.getItem(alertKey)) return;
                
                sessionStorage.setItem(alertKey, 'shown');
                setTimeout(() => sessionStorage.removeItem(alertKey), 30000); // Ù…Ø³Ø­ Ø¨Ø¹Ø¯ 30 Ø«Ø§Ù†ÙŠØ©
                
                console.log(`ğŸ”” ØªÙ†Ø¨ÙŠÙ‡ Ù„Ù„Ù…Ø¯ÙŠØ±: ${employeeData.name} Ù…ØªØµÙ„ Ø§Ù„Ø¢Ù†`);
                
                // Ø¥Ù†Ø´Ø§Ø¡ ØªÙ†Ø¨ÙŠÙ‡ Ø¨ØµØ±ÙŠ
                const alert = document.createElement('div');
                alert.style.cssText = `
                    position: fixed;
                    top: 100px;
                    right: 20px;
                    background: linear-gradient(135deg, #10b981, #059669);
                    color: white;
                    padding: 15px 20px;
                    border-radius: 12px;
                    font-family: 'Cairo', sans-serif;
                    font-weight: 600;
                    z-index: 15000;
                    box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4);
                    animation: slideInRight 0.5s ease-out;
                    cursor: pointer;
                    border: 2px solid #34d399;
                `;
                
                alert.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <div style="font-size: 1.5rem;">ğŸŸ¢</div>
                        <div>
                            <div style="font-size: 1rem; font-weight: bold;">${employeeData.name}</div>
                            <div style="font-size: 0.8rem; opacity: 0.9;">Ù…ØªØµÙ„ Ø§Ù„Ø¢Ù† - ${employeeData.deviceInfo?.type || 'Desktop'}</div>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(alert);
                
                // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†
                setTimeout(() => {
                    if (document.body.contains(alert)) {
                        alert.style.animation = 'slideOutRight 0.3s ease-in';
                        setTimeout(() => {
                            if (document.body.contains(alert)) {
                                document.body.removeChild(alert);
                            }
                        }, 300);
                    }
                }, 5000);
                
                // Ø¥Ø²Ø§Ù„Ø© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø±
                alert.addEventListener('click', () => {
                    alert.style.animation = 'slideOutRight 0.3s ease-in';
                    setTimeout(() => {
                        if (document.body.contains(alert)) {
                            document.body.removeChild(alert);
                        }
                    }, 300);
                });
            },

            // ÙØ­Øµ Ø§Ù„Ø§ØªØµØ§Ù„Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
            checkForNewConnections() {
                const globalData = localStorage.getItem(this.STORAGE_KEY);
                if (!globalData) return;
                
                const data = JSON.parse(globalData);
                const onlineUsers = Object.keys(data.connections).filter(u => 
                    data.connections[u].isOnline && data.connections[u].role !== 'Ù…Ø¯ÙŠØ±'
                );
                
                // Ø¹Ø±Ø¶ Ø¥Ø´Ø¹Ø§Ø± Ø¨Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ù…ØªØµÙ„ÙŠÙ† Ø­Ø§Ù„ÙŠØ§Ù‹
                if (onlineUsers.length > 0) {
                    console.log(`ğŸ‘¥ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ù…ØªØµÙ„ÙŠÙ† Ø­Ø§Ù„ÙŠØ§Ù‹: ${onlineUsers.length}`);
                    onlineUsers.forEach(username => {
                        const conn = data.connections[username];
                        console.log(`   ğŸŸ¢ ${conn.name} - ${conn.deviceInfo?.type || 'Desktop'} (${conn.deviceInfo?.browser || 'Unknown'})`);
                    });
                }
            },

            // Ø­ÙØ¸ ÙÙŠ IndexedDB Ù„Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©
            saveToIndexedDB(data) {
                try {
                    const request = indexedDB.open('OudSystemDB', 1);
                    
                    request.onupgradeneeded = (e) => {
                        const db = e.target.result;
                        if (!db.objectStoreNames.contains('connections')) {
                            db.createObjectStore('connections', { keyPath: 'id', autoIncrement: true });
                        }
                    };
                    
                    request.onsuccess = (e) => {
                        const db = e.target.result;
                        const transaction = db.transaction(['connections'], 'readwrite');
                        const store = transaction.objectStore('connections');
                        
                        // Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ø£ÙˆÙ„Ø§Ù‹
                        store.clear();
                        
                        // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
                        store.add({
                            ...data,
                            timestamp: new Date().toISOString()
                        });
                        
                        console.log('ğŸ’¾ ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ IndexedDB Ù„Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©');
                    };
                } catch (error) {
                    console.warn('âš ï¸ IndexedDB ØºÙŠØ± Ù…ØªØ§Ø­:', error);
                }
            },

            // Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„ (Ù„Ù„ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù‚Ø¯ÙŠÙ…)
            saveConnectionData() {
                this.saveGlobalConnectionData();
            },
            
            // Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„ (Ù„Ù„ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù‚Ø¯ÙŠÙ…)
            loadConnectionData() {
                this.loadGlobalConnectionData();
            },
            
            // Ø¨Ø« Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø§Øª
            broadcastUpdate() {
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
                updateStats();
                updateAttendanceStats();
                preciseEmployeeManagement.updatePreciseEmployeeTable();
                
                // Ø·Ø¨Ø§Ø¹Ø© Ø­Ø§Ù„Ø© Ø§Ù„Ù…ØªØµÙ„ÙŠÙ†
                const onlineUsers = this.getOnlineUsers();
                console.log(`ğŸ“¡ Ø¨Ø« Ø§Ù„ØªØ­Ø¯ÙŠØ« - Ø§Ù„Ù…ØªØµÙ„ÙŠÙ†: ${onlineUsers.length}`);
                onlineUsers.forEach(username => {
                    const duration = this.getConnectionDuration(username);
                    console.log(`   ğŸŸ¢ ${users[username].name} - Ù…ØªØµÙ„ Ù…Ù†Ø° ${duration} Ø¯Ù‚ÙŠÙ‚Ø©`);
                });
            },
            
            // ÙØ­Øµ Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ù…Ù†ØªÙ‡ÙŠØ© Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©
            checkExpiredSessions() {
                const now = new Date();
                Object.keys(users).forEach(username => {
                    const user = users[username];
                    if (user.isOnline && user.lastActivity) {
                        const lastActivity = new Date(user.lastActivity);
                        const inactiveMinutes = (now - lastActivity) / (1000 * 60);
                        
                        // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù†Ø´Ø· Ù„Ø£ÙƒØ«Ø± Ù…Ù† 30 Ø¯Ù‚ÙŠÙ‚Ø©ØŒ Ø§Ø¹ØªØ¨Ø±Ù‡ ØºÙŠØ± Ù…ØªØµÙ„
                        if (inactiveMinutes > 30) {
                            console.log(`â° Ø§Ù†ØªÙ‡Øª ØµÙ„Ø§Ø­ÙŠØ© Ø¬Ù„Ø³Ø© ${user.name} - Ø¹Ø¯Ù… Ù†Ø´Ø§Ø· Ù„Ù€ ${Math.floor(inactiveMinutes)} Ø¯Ù‚ÙŠÙ‚Ø©`);
                            this.updateUserStatus(username, false);
                        }
                    }
                });
            },
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ø´Ø§Ø· Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ
            updateCurrentUserActivity() {
                if (currentUser && users[currentUser.username]) {
                    users[currentUser.username].lastActivity = new Date().toISOString();
                    this.saveConnectionData();
                }
            }
        };

        // Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…Ø­Ø¯Ø« - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ù…ÙØ¹Ù„Ø© ÙˆØ¬Ø§Ù‡Ø²Ø©
        const users = {
            // Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† - Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„ØµØ­ÙŠØ­Ø©
            'badr': {
                password: '123',
                role: 'Ù…ÙˆØ¸Ù',
                name: 'Ø¨Ø¯Ø± Ù†Ø§ØµØ±',
                code: '7177',
                employeeId: 'EMP001',
                department: 'Ø®Ø¯Ù…Ø© Ø¹Ù…Ù„Ø§Ø¡ Ù†Ø®Ø¨Ø© Ø§Ù„Ø¹ÙˆØ¯',
                permissions: ['dashboard', 'attendance'],
                isActive: true,
                isOnline: false,
                lastLogin: null,
                loginCount: 0
            },
            'saad': {
                password: '123',
                role: 'Ù…ÙˆØ¸Ù',
                name: 'Ø³Ø¹Ø¯ Ø³Ù†Ø¨Ù„',
                code: '5472',
                employeeId: 'EMP002',
                department: 'Ø®Ø¯Ù…Ø© Ø¹Ù…Ù„Ø§Ø¡ Ù†Ø®Ø¨Ø© Ø§Ù„Ø¹ÙˆØ¯',
                permissions: ['dashboard', 'attendance'],
                isActive: true,
                isOnline: false,
                lastLogin: null,
                loginCount: 0
            },
            'hussein': {
                password: '123',
                role: 'Ù…ÙˆØ¸Ù',
                name: 'Ø­Ø³ÙŠÙ† Ø§Ù„Ø­Ø±Ø¨ÙŠ',
                code: '9058',
                employeeId: 'EMP003',
                department: 'Ø®Ø¯Ù…Ø© Ø¹Ù…Ù„Ø§Ø¡ Ù†Ø®Ø¨Ø© Ø§Ù„Ø¹ÙˆØ¯',
                permissions: ['dashboard', 'attendance'],
                isActive: true,
                isOnline: false,
                lastLogin: null,
                loginCount: 0
            },
            'ahmed': {
                password: '123',
                role: 'Ù…ÙˆØ¸Ù',
                name: 'Ø§Ø­Ù…Ø¯ Ø§Ù„Ø¹Ù†Ø²ÙŠ',
                code: '12694',
                employeeId: 'EMP004',
                department: 'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª',
                permissions: ['dashboard', 'attendance'],
                isActive: true,
                isOnline: false,
                lastLogin: null,
                loginCount: 0
            },
            'yazeed': {
                password: '123',
                role: 'Ù…ÙˆØ¸Ù',
                name: 'ÙŠØ²ÙŠØ¯ Ø§Ù„Ù†Ø¹ÙŠÙ…ÙŠ',
                code: '10449',
                employeeId: 'EMP005',
                department: 'Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©',
                permissions: ['dashboard', 'attendance'],
                isActive: true,
                isOnline: false,
                lastLogin: null,
                loginCount: 0
            },
            'noura': {
                password: '123',
                role: 'Ù…ÙˆØ¸Ù',
                name: 'Ù†ÙˆØ±Ø© ÙÙŠØµÙ„',
                code: '15104',
                employeeId: 'EMP006',
                department: 'Ø§Ù„ØªØ³ÙˆÙŠÙ‚',
                permissions: ['dashboard', 'attendance'],
                isActive: true,
                isOnline: false,
                lastLogin: null,
                loginCount: 0
            },
            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø¯ÙŠØ±
            'admin': {
                password: '123',
                role: 'Ù…Ø¯ÙŠØ±',
                name: 'Ù…Ø¯ÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù…',
                code: 'ADMIN',
                employeeId: 'ADMIN001',
                department: 'Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù„ÙŠØ§',
                permissions: ['dashboard', 'schedule', 'employees', 'attendance', 'reports', 'settings'],
                isActive: true,
                isOnline: false,
                lastLogin: null,
                loginCount: 0,
                isAdmin: true
            }
        };

        // Ø·Ø¨Ø§Ø¹Ø© Ø¨ÙŠØ§Ù†Ø§Øª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„ØªØ£ÙƒØ¯
        console.log('ğŸ”‘ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…ØªØ§Ø­Ø©:');
        Object.keys(users).forEach(username => {
            console.log(`   ${username} -> ${users[username].name} (${users[username].role})`);
        });
        console.log('ğŸ“ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª: 123');

        // Ø·Ø¨Ø§Ø¹Ø© Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…ØªØ§Ø­Ø© Ù„Ù„ØªØ£ÙƒØ¯
        console.log('ğŸ”‘ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…ØªØ§Ø­Ø©:', Object.keys(users));
        console.log('ğŸ“ Ø¬Ù…ÙŠØ¹ ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ±: 123');

        let currentUser = null;

        // Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ù…Ø¹ Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª
        const sessionManager = {
            // Ø­ÙØ¸ Ø§Ù„Ø¬Ù„Ø³Ø© Ù…Ø¹ Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª
            saveSession(user) {
                const sessionData = {
                    username: user.username,
                    loginTime: new Date().toISOString(),
                    lastActivity: new Date().toISOString(),
                    isOnline: navigator.onLine,
                    ...user
                };
                
                // Ø­ÙØ¸ Ù…Ø­Ù„ÙŠ
                localStorage.setItem('oudUserSession', JSON.stringify(sessionData));
                
                // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ù…Ø¹ Ø§Ù„Ø®Ø§Ø¯Ù… (Ù…Ø­Ø§ÙƒØ§Ø©)
                this.syncWithServer(sessionData);
                
                console.log('ğŸ’¾ ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¬Ù„Ø³Ø©:', user.name);
            },

            // Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø¹ Ø§Ù„Ø®Ø§Ø¯Ù… (Ù…Ø­Ø§ÙƒØ§Ø© Ù„Ù„Ø¹Ù…Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª)
            syncWithServer(sessionData) {
                // Ù…Ø­Ø§ÙƒØ§Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø®Ø§Ø¯Ù…
                if (navigator.onLine) {
                    console.log('ğŸŒ Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø¹ Ø§Ù„Ø®Ø§Ø¯Ù…...');
                    
                    // Ù…Ø­Ø§ÙƒØ§Ø© API call
                    const syncData = {
                        action: 'updateUserStatus',
                        username: sessionData.username,
                        isOnline: sessionData.isOnline,
                        timestamp: sessionData.lastActivity,
                        userAgent: navigator.userAgent,
                        platform: navigator.platform
                    };
                    
                    // Ø­ÙØ¸ ÙÙŠ IndexedDB Ù„Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ù„Ø§Ø­Ù‚Ø©
                    this.saveToIndexedDB(syncData);
                    
                    console.log('âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø®Ø§Ø¯Ù… (Ù…Ø­Ø§ÙƒØ§Ø©)');
                } else {
                    console.log('ğŸ“´ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª - Ø³ÙŠØªÙ… Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹');
                    this.queueForLaterSync(sessionData);
                }
            },

            // Ø­ÙØ¸ ÙÙŠ IndexedDB Ù„Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©
            saveToIndexedDB(data) {
                try {
                    const request = indexedDB.open('OudSystemDB', 1);
                    
                    request.onupgradeneeded = (e) => {
                        const db = e.target.result;
                        if (!db.objectStoreNames.contains('sessions')) {
                            db.createObjectStore('sessions', { keyPath: 'id', autoIncrement: true });
                        }
                    };
                    
                    request.onsuccess = (e) => {
                        const db = e.target.result;
                        const transaction = db.transaction(['sessions'], 'readwrite');
                        const store = transaction.objectStore('sessions');
                        
                        store.add({
                            ...data,
                            timestamp: new Date().toISOString(),
                            synced: false
                        });
                        
                        console.log('ğŸ’¾ ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ IndexedDB');
                    };
                } catch (error) {
                    console.warn('âš ï¸ IndexedDB ØºÙŠØ± Ù…ØªØ§Ø­:', error);
                }
            },

            // Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø·Ø§Ø¨ÙˆØ± Ù„Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ù„Ø§Ø­Ù‚Ø©
            queueForLaterSync(data) {
                const queue = JSON.parse(localStorage.getItem('oudSyncQueue') || '[]');
                queue.push({
                    ...data,
                    queuedAt: new Date().toISOString()
                });
                localStorage.setItem('oudSyncQueue', JSON.stringify(queue));
                console.log('ğŸ“‹ ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ø·Ø§Ø¨ÙˆØ± Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©');
            },

            // Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¤Ø¬Ù„Ø© Ø¹Ù†Ø¯ Ø¹ÙˆØ¯Ø© Ø§Ù„Ø§ØªØµØ§Ù„
            syncQueuedData() {
                if (!navigator.onLine) return;
                
                const queue = JSON.parse(localStorage.getItem('oudSyncQueue') || '[]');
                if (queue.length === 0) return;
                
                console.log(`ğŸ”„ Ù…Ø²Ø§Ù…Ù†Ø© ${queue.length} Ø¹Ù†ØµØ± Ù…Ù† Ø§Ù„Ø·Ø§Ø¨ÙˆØ±...`);
                
                queue.forEach((item, index) => {
                    // Ù…Ø­Ø§ÙƒØ§Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                    setTimeout(() => {
                        console.log(`âœ… ØªÙ… Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ø¹Ù†ØµØ± ${index + 1}/${queue.length}`);
                        
                        // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø¹Ù†ØµØ± Ù…Ù† Ø§Ù„Ø·Ø§Ø¨ÙˆØ± Ø¨Ø¹Ø¯ Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©
                        if (index === queue.length - 1) {
                            localStorage.removeItem('oudSyncQueue');
                            console.log('ğŸ‰ ØªÙ… Ù…Ø²Ø§Ù…Ù†Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¤Ø¬Ù„Ø©');
                        }
                    }, index * 500);
                });
            },

            // Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ø§Ù„Ø¬Ù„Ø³Ø©
            restoreSession() {
                try {
                    const sessionData = localStorage.getItem('oudUserSession');
                    if (!sessionData) return null;

                    const session = JSON.parse(sessionData);
                    
                    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¬Ù„Ø³Ø© (24 Ø³Ø§Ø¹Ø©)
                    const loginTime = new Date(session.loginTime);
                    const now = new Date();
                    const hoursDiff = (now - loginTime) / (1000 * 60 * 60);
                    
                    if (hoursDiff > 24) {
                        this.clearSession();
                        return null;
                    }

                    // ØªØ­Ø¯ÙŠØ« Ø¢Ø®Ø± Ù†Ø´Ø§Ø·
                    session.lastActivity = now.toISOString();
                    localStorage.setItem('oudUserSession', JSON.stringify(session));
                    
                    console.log('ğŸ”„ ØªÙ… Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ø§Ù„Ø¬Ù„Ø³Ø©:', session.name);
                    return session;
                } catch (error) {
                    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ø§Ù„Ø¬Ù„Ø³Ø©:', error);
                    this.clearSession();
                    return null;
                }
            },

            // Ù…Ø³Ø­ Ø§Ù„Ø¬Ù„Ø³Ø©
            clearSession() {
                localStorage.removeItem('oudUserSession');
                console.log('ğŸ—‘ï¸ ØªÙ… Ù…Ø³Ø­ Ø§Ù„Ø¬Ù„Ø³Ø©');
            },

            // ØªØ­Ø¯ÙŠØ« Ø¢Ø®Ø± Ù†Ø´Ø§Ø·
            updateActivity() {
                const sessionData = localStorage.getItem('oudUserSession');
                if (sessionData) {
                    const session = JSON.parse(sessionData);
                    session.lastActivity = new Date().toISOString();
                    localStorage.setItem('oudUserSession', JSON.stringify(session));
                }
            }
        };

        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ù…Ø¹ Ø§Ù„Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø© Ù„Ø£ØºØ³Ø·Ø³ 2025
        const employeesData = [
            {
                id: 1,
                name: 'Ø¨Ø¯Ø± Ù†Ø§ØµØ±',
                code: 'EMP001',
                username: 'emp001',
                department: 'Ø®Ø¯Ù…Ø© Ø¹Ù…Ù„Ø§Ø¡ Ù†Ø®Ø¨Ø© Ø§Ù„Ø¹ÙˆØ¯',
                hireDate: '2024-01-15',
                performance: 95,
                salary: 5000,
                schedule: ['OFF', 'OFF', '4-10', '4-10', '4-10', '4-10', '4-10', 'OFF', 'OFF', '4-10', '4-10', '4-10', '4-10', '4-10', 'OFF', 'OFF', '4-10', '4-10', '4-10', '4-10', '4-10', 'OFF', 'OFF', '4-10', '4-10', '4-10', '4-10', '4-10', 'OFF', 'OFF']
            },
            {
                id: 2,
                name: 'Ø³Ø¹Ø¯ Ø³Ù†Ø¨Ù„',
                code: 'EMP002',
                username: 'emp002',
                department: 'Ø®Ø¯Ù…Ø© Ø¹Ù…Ù„Ø§Ø¡ Ù†Ø®Ø¨Ø© Ø§Ù„Ø¹ÙˆØ¯',
                hireDate: '2024-02-01',
                performance: 88,
                salary: 4500,
                schedule: ['OFF', 'OFF', '9-3', '9-3', '9-3', '9-3', '9-3', 'OFF', 'OFF', '9-3', '9-3', '9-3', '9-3', '9-3', 'OFF', 'OFF', '9-3', '9-3', '9-3', '9-3', '9-3', 'OFF', 'OFF', '9-3', '9-3', '9-3', '9-3', '9-3', 'OFF', 'OFF']
            },
            {
                id: 3,
                name: 'Ø­Ø³ÙŠÙ† Ø§Ù„Ø­Ø±Ø¨ÙŠ',
                code: 'EMP003',
                username: 'emp003',
                department: 'Ø®Ø¯Ù…Ø© Ø¹Ù…Ù„Ø§Ø¡ Ù†Ø®Ø¨Ø© Ø§Ù„Ø¹ÙˆØ¯',
                hireDate: '2024-01-20',
                performance: 92,
                salary: 4800,
                schedule: ['OFF', 'OFF', '9-6', '9-6', '9-6', '9-6', '9-6', 'OFF', 'OFF', '9-6', '9-6', '9-6', '9-6', '9-6', 'OFF', 'OFF', '9-6', '9-6', '9-6', '9-6', '9-6', 'OFF', 'OFF', '9-6', '9-6', '9-6', '9-6', '9-6', 'OFF', 'OFF']
            },
            {
                id: 4,
                name: 'Ø§Ø­Ù…Ø¯ Ø§Ù„Ø¹Ù†Ø²ÙŠ',
                code: 'EMP004',
                username: 'emp004',
                department: 'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª',
                hireDate: '2024-03-10',
                performance: 90,
                salary: 5200,
                schedule: ['1-10', '11-8', 'OFF', 'OFF', '11-8', '11-8', '11-8', '1-10', '11-8', 'OFF', 'OFF', '11-8', '11-8', '11-8', '1-10', '11-8', 'OFF', 'OFF', '11-8', '11-8', '11-8', '1-10', '11-8', 'OFF', 'OFF', '11-8', '11-8', '11-8', '1-10', '11-8']
            },
            {
                id: 5,
                name: 'ÙŠØ²ÙŠØ¯ Ø§Ù„Ù†Ø¹ÙŠÙ…ÙŠ',
                code: 'EMP005',
                username: 'emp005',
                department: 'Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©',
                hireDate: '2023-12-01',
                performance: 85,
                salary: 6000,
                schedule: ['1-10', '9-6', '9-6', '9-6', 'OFF', 'OFF', '9-6', '1-10', '9-6', '9-6', '9-6', 'OFF', 'OFF', '9-6', '1-10', '9-6', '9-6', '9-6', 'OFF', 'OFF', '9-6', '1-10', '9-6', '9-6', '9-6', 'OFF', 'OFF', '9-6', '1-10', '9-6']
            },
            {
                id: 6,
                name: 'Ù†ÙˆØ±Ø© ÙÙŠØµÙ„',
                code: 'EMP006',
                username: 'emp006',
                department: 'Ø§Ù„ØªØ³ÙˆÙŠÙ‚',
                hireDate: '2024-01-05',
                performance: 87,
                salary: 4700,
                schedule: ['1-10', '1-10', '1-10', '1-10', '1-10', 'OFF', 'OFF', '1-10', '1-10', '1-10', '1-10', '1-10', 'OFF', 'OFF', '1-10', '1-10', '1-10', '1-10', '1-10', 'OFF', 'OFF', '1-10', '1-10', '1-10', '1-10', '1-10', 'OFF', 'OFF', '1-10', '1-10']
            }
        ];

        // Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ø¯Ù‚ÙŠÙ‚ ÙˆØ§Ù„Ù…ØªÙ‚Ø¯Ù…
        const preciseEmployeeManagement = {
            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ÙÙ‡Ø±Ø³ Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø­Ø§Ù„ÙŠ ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„Ø© (0-29)
            getCurrentDayIndex() {
                const today = new Date();
                const startDate = new Date('2025-08-01'); // ØªØ§Ø±ÙŠØ® Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø¬Ø¯ÙˆÙ„Ø© - Ø£ØºØ³Ø·Ø³ 2025
                const daysDiff = Math.floor((today - startDate) / (1000 * 60 * 60 * 24));
                return Math.max(0, Math.min(29, daysDiff)); // Ù…Ø­Ø¯ÙˆØ¯ Ø¨ÙŠÙ† 0-29 (30 ÙŠÙˆÙ…)
            },

            // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø© Ù„Ù„Ù…ÙˆØ¸Ù Ø­Ø³Ø¨ Ø§Ù„Ø¬Ø¯ÙˆÙ„ ÙˆØ§Ù„Ù†Ø¸Ø§Ù…
            getPreciseEmployeeStatus(employee) {
                const dayIndex = this.getCurrentDayIndex();
                const todayShift = employee.schedule[dayIndex];
                const username = Object.keys(users).find(u => users[u].name === employee.name);
                
                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„ÙØ¹Ù„ÙŠØ© Ù…Ù† Ù†Ø¸Ø§Ù… ØªØªØ¨Ø¹ Ø§Ù„Ø§ØªØµØ§Ù„
                const isActuallyOnline = username && users[username] && users[username].isOnline === true;
                
                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… (Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ)
                const isCurrentUser = currentUser && currentUser.username === username;
                
                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø¶ÙˆØ±
                const attendanceData = attendanceSystem.attendanceData[attendanceSystem.currentDate] || {};
                const userAttendance = attendanceData[username];
                
                // Ø¥Ø¬Ø§Ø²Ø© Ø³Ù†ÙˆÙŠØ©
                if (todayShift === 'Annual') {
                    return {
                        status: 'Ø¥Ø¬Ø§Ø²Ø© Ø³Ù†ÙˆÙŠØ©',
                        color: '#f97316',
                        icon: 'ğŸ–ï¸',
                        type: 'annualLeave',
                        isWorkDay: false,
                        isLoggedIn: isActuallyOnline,
                        scheduledShift: 'Ø¥Ø¬Ø§Ø²Ø© Ø³Ù†ÙˆÙŠØ©',
                        attendanceTime: '-',
                        systemStatus: isActuallyOnline ? 'Ù…ØªØµÙ„ Ø§Ù„Ø¢Ù†' : 'ØºÙŠØ± Ù…ØªØµÙ„',
                        connectionStatus: isActuallyOnline ? 'online' : 'offline'
                    };
                } 
                // Ø¥Ø¬Ø§Ø²Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ© (Ø±Ø§Ø­Ø©)
                else if (todayShift === 'OFF') {
                    return {
                        status: 'Ø¥Ø¬Ø§Ø²Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©',
                        color: '#6b7280',
                        icon: 'ğŸ’¤',
                        type: 'weeklyLeave',
                        isWorkDay: false,
                        isLoggedIn: isActuallyOnline,
                        scheduledShift: 'Ø¥Ø¬Ø§Ø²Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©',
                        attendanceTime: '-',
                        systemStatus: isActuallyOnline ? 'Ù…ØªØµÙ„ Ø§Ù„Ø¢Ù†' : 'ØºÙŠØ± Ù…ØªØµÙ„',
                        connectionStatus: isActuallyOnline ? 'online' : 'offline'
                    };
                } 
                // ÙŠÙˆÙ… Ø¹Ù…Ù„ Ù…Ø¬Ø¯ÙˆÙ„
                else {
                    // Ø­Ø§Ø¶Ø± ÙˆÙ…Ø¨Ø§Ø´Ø± (Ù…ØªØµÙ„ + Ø­Ø¶ÙˆØ±)
                    if (isActuallyOnline && userAttendance && userAttendance.checkIn && !userAttendance.checkOut) {
                        return {
                            status: 'Ø­Ø§Ø¶Ø± ÙˆÙ…Ø¨Ø§Ø´Ø±',
                            color: '#10b981',
                            icon: 'âœ…',
                            type: 'present',
                            isWorkDay: true,
                            isLoggedIn: true,
                            scheduledShift: todayShift,
                            attendanceTime: userAttendance.checkIn,
                            systemStatus: 'Ù…ØªØµÙ„ ÙˆÙŠØ¹Ù…Ù„',
                            connectionStatus: 'online',
                            isLate: userAttendance.isLate || false
                        };
                    }
                    // Ù…Ù†ØµØ±Ù (Ù…ØªØµÙ„ + Ø§Ù†ØµØ±Ø§Ù)
                    else if (isActuallyOnline && userAttendance && userAttendance.checkOut) {
                        return {
                            status: 'Ù…Ù†ØµØ±Ù',
                            color: '#3b82f6',
                            icon: 'ğŸ ',
                            type: 'finished',
                            isWorkDay: true,
                            isLoggedIn: true,
                            scheduledShift: todayShift,
                            attendanceTime: userAttendance.checkIn,
                            systemStatus: 'Ù…ØªØµÙ„ (Ù…Ù†ØµØ±Ù)',
                            connectionStatus: 'online',
                            workingHours: userAttendance.workingHours || 0
                        };
                    }
                    // Ù…ØªØµÙ„ ÙÙ‚Ø· (Ø¨Ø¯ÙˆÙ† Ø­Ø¶ÙˆØ±)
                    else if (isActuallyOnline && (!userAttendance || !userAttendance.checkIn)) {
                        return {
                            status: 'Ù…ØªØµÙ„ (Ù„Ù… ÙŠØ³Ø¬Ù„ Ø­Ø¶ÙˆØ±)',
                            color: '#8b5cf6',
                            icon: 'ğŸ”',
                            type: 'loggedIn',
                            isWorkDay: true,
                            isLoggedIn: true,
                            scheduledShift: todayShift,
                            attendanceTime: '-',
                            systemStatus: 'Ù…ØªØµÙ„ Ø§Ù„Ø¢Ù†',
                            connectionStatus: 'online'
                        };
                    }
                    // Ø­Ø¶ÙˆØ± Ø¨Ø¯ÙˆÙ† Ø§ØªØµØ§Ù„
                    else if (!isActuallyOnline && userAttendance && userAttendance.checkIn) {
                        return {
                            status: 'Ø­Ø§Ø¶Ø± (ØºÙŠØ± Ù…ØªØµÙ„)',
                            color: '#f59e0b',
                            icon: 'âš ï¸',
                            type: 'attendanceOnly',
                            isWorkDay: true,
                            isLoggedIn: false,
                            scheduledShift: todayShift,
                            attendanceTime: userAttendance.checkIn,
                            systemStatus: 'ØºÙŠØ± Ù…ØªØµÙ„',
                            connectionStatus: 'offline'
                        };
                    }
                    // ØºÙŠØ± Ù…ØªØµÙ„ ØªÙ…Ø§Ù…Ø§Ù‹
                    else {
                        return {
                            status: 'ØºÙŠØ± Ù…ØªØµÙ„',
                            color: '#6b7280',
                            icon: 'ğŸ”Œ',
                            type: 'offline',
                            isWorkDay: true,
                            isLoggedIn: false,
                            scheduledShift: todayShift,
                            attendanceTime: '-',
                            systemStatus: 'ØºÙŠØ± Ù…ØªØµÙ„',
                            connectionStatus: 'offline'
                        };
                    }
                }
            },

            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø©
            calculatePreciseStats() {
                let presentCount = 0;
                let weeklyLeaveCount = 0;
                let annualLeaveCount = 0;
                let loggedInCount = 0;
                
                // ÙÙ„ØªØ±Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ù„Ø§Ø³ØªØ¨Ø¹Ø§Ø¯ Ø§Ù„Ù…Ø¯ÙŠØ±
                const regularEmployees = employeesData.filter(employee => {
                    const username = Object.keys(users).find(u => users[u].name === employee.name);
                    return username && users[username].role !== 'Ù…Ø¯ÙŠØ±';
                });
                
                regularEmployees.forEach(employee => {
                    const username = Object.keys(users).find(u => users[u].name === employee.name);
                    const status = this.getPreciseEmployeeStatus(employee);
                    
                    switch (status.type) {
                        case 'present':
                        case 'finished':
                        case 'attendanceOnly':
                            presentCount++;
                            break;
                        case 'weeklyLeave':
                            weeklyLeaveCount++;
                            break;
                        case 'annualLeave':
                            annualLeaveCount++;
                            break;
                        case 'offline':
                            // Ù„Ø§ Ù†Ø­Ø³Ø¨ ØºÙŠØ± Ø§Ù„Ù…ØªØµÙ„ÙŠÙ† ÙÙŠ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
                            break;
                    }
                    
                    // ÙØ­Øµ Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„ÙØ¹Ù„ÙŠØ© Ù…Ù† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
                    if (username && users[username] && users[username].isOnline) {
                        loggedInCount++;
                        console.log(`ğŸŸ¢ ${employee.name} Ù…ØªØµÙ„ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…`);
                    }
                });
                
                console.log(`ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø¯Ù‚ÙŠÙ‚Ø© - Ù…ØªØµÙ„ÙŠÙ†: ${loggedInCount}ØŒ Ø­Ø§Ø¶Ø±ÙŠÙ†: ${presentCount}`);
                
                return {
                    presentCount,
                    weeklyLeaveCount,
                    annualLeaveCount,
                    loggedInCount,
                    totalEmployees: regularEmployees.length
                };
            },

            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹
            getEmployeesByType(type) {
                const regularEmployees = employeesData.filter(employee => {
                    const username = Object.keys(users).find(u => users[u].name === employee.name);
                    return username && users[username].role !== 'Ù…Ø¯ÙŠØ±';
                });
                
                return regularEmployees.filter(employee => {
                    const status = this.getPreciseEmployeeStatus(employee);
                    
                    switch (type) {
                        case 'present':
                            return status.type === 'present' || status.type === 'finished' || status.type === 'attendanceOnly';
                        case 'weeklyLeave':
                            return status.type === 'weeklyLeave';
                        case 'annualLeave':
                            return status.type === 'annualLeave';
                        case 'loggedIn':
                            return status.isLoggedIn;
                        case 'offline':
                            return status.type === 'offline';
                        default:
                            return false;
                    }
                }).map(employee => ({
                    ...employee,
                    statusDetails: this.getPreciseEmployeeStatus(employee)
                }));
            },

            // ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ø¯Ù‚ÙŠÙ‚
            updatePreciseEmployeeTable() {
                const tbody = document.getElementById('preciseEmployeeTableBody');
                if (!tbody) return;
                
                tbody.innerHTML = '';
                
                // ÙÙ„ØªØ±Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ù„Ø§Ø³ØªØ¨Ø¹Ø§Ø¯ Ø§Ù„Ù…Ø¯ÙŠØ±
                const regularEmployees = employeesData.filter(employee => {
                    const username = Object.keys(users).find(u => users[u].name === employee.name);
                    return username && users[username].role !== 'Ù…Ø¯ÙŠØ±';
                });
                
                regularEmployees.forEach(employee => {
                    const status = this.getPreciseEmployeeStatus(employee);
                    const username = Object.keys(users).find(u => users[u].name === employee.name);
                    const row = document.createElement('tr');
                    
                    // ØªÙ„ÙˆÙŠÙ† Ø§Ù„ØµÙ Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø©
                    let rowStyle = `background: ${status.color}15;`;
                    row.style.cssText = rowStyle;
                    
                    // ØªØ­Ø¯ÙŠØ¯ Ù„ÙˆÙ† ÙˆØ­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„
                    const connectionColor = status.connectionStatus === 'online' ? '#10b981' : '#ef4444';
                    const connectionIcon = status.connectionStatus === 'online' ? 'ğŸŸ¢' : 'ğŸ”´';
                    const connectionText = status.connectionStatus === 'online' ? 'Ù…ØªØµÙ„ Ø§Ù„Ø¢Ù†' : 'ØºÙŠØ± Ù…ØªØµÙ„';
                    
                    // Ø¥Ø¶Ø§ÙØ© Ù…Ø¤Ø´Ø± Ù†Ø¨Ø¶ Ù„Ù„Ù…ØªØµÙ„ÙŠÙ†
                    const pulseAnimation = status.connectionStatus === 'online' ? 'animation: pulse 2s infinite;' : '';
                    
                    row.innerHTML = `
                        <td style="font-weight: bold;">${employee.name}</td>
                        <td style="color: var(--oud-gold); font-weight: bold;">${employee.code}</td>
                        <td>${employee.department}</td>
                        <td style="font-weight: bold;">${status.scheduledShift}</td>
                        <td>
                            <span style="background: ${status.color}; color: white; padding: 6px 12px; border-radius: 15px; font-size: 0.9rem; display: inline-flex; align-items: center; gap: 6px; font-weight: bold;">
                                ${status.icon} ${status.status}
                            </span>
                            ${status.isLate ? '<div style="color: #f59e0b; font-size: 0.8rem; margin-top: 4px;">âš ï¸ Ù…ØªØ£Ø®Ø±</div>' : ''}
                        </td>
                        <td style="font-weight: bold; color: ${status.attendanceTime !== '-' ? '#10b981' : '#6b7280'};">
                            ${status.attendanceTime}
                        </td>
                        <td>
                            <div style="display: flex; flex-direction: column; gap: 4px;">
                                <span style="background: ${connectionColor}; color: white; padding: 4px 8px; border-radius: 10px; font-size: 0.8rem; display: inline-flex; align-items: center; gap: 4px; ${pulseAnimation}">
                                    ${connectionIcon} ${connectionText}
                                </span>
                                ${status.connectionStatus === 'online' ? `
                                    <div style="color: #10b981; font-size: 0.7rem; font-weight: bold;">
                                        ğŸ”¥ Ù†Ø´Ø· Ø§Ù„Ø¢Ù†
                                    </div>
                                ` : `
                                    <div style="color: #6b7280; font-size: 0.7rem;">
                                        ğŸ“´ ØºÙŠØ± Ù†Ø´Ø·
                                    </div>
                                `}
                            </div>
                        </td>
                        <td>
                            <button class="oud-btn oud-btn-primary" style="padding: 6px 12px; font-size: 0.8rem;" onclick="viewEmployeeDetails(${employee.id})">
                                <span>ğŸ‘ï¸</span> Ø¹Ø±Ø¶
                            </button>
                        </td>
                    `;
                    
                    tbody.appendChild(row);
                });
                
                // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ø§Ù„Ù†Ø¨Ø¶ Ù„Ù„Ù…ØªØµÙ„ÙŠÙ†
                const style = document.createElement('style');
                style.id = 'pulseAnimation';
                if (!document.getElementById('pulseAnimation')) {
                    style.textContent = `
                        @keyframes pulse {
                            0%, 100% { 
                                opacity: 1; 
                                transform: scale(1);
                            }
                            50% { 
                                opacity: 0.8; 
                                transform: scale(1.05);
                            }
                        }
                    `;
                    document.head.appendChild(style);
                }
            }
        };

        // Ù†Ø¸Ø§Ù… ØªØ­Ø¯ÙŠØ¯ Ø­Ø§Ù„Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ø°ÙƒÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù… (Ù„Ù„ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯)
        const employeeStatusSystem = {
            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ÙÙ‡Ø±Ø³ Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø­Ø§Ù„ÙŠ ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„Ø© (0-19)
            getCurrentDayIndex() {
                return preciseEmployeeManagement.getCurrentDayIndex();
            },

            // ØªØ­Ø¯ÙŠØ¯ Ø­Ø§Ù„Ø© Ø§Ù„Ù…ÙˆØ¸Ù Ø§Ù„ÙŠÙˆÙ… Ø¨Ø¯Ù‚Ø© Ø¹Ø§Ù„ÙŠØ©
            getEmployeeStatus(employee) {
                const status = preciseEmployeeManagement.getPreciseEmployeeStatus(employee);
                
                // ØªØ­ÙˆÙŠÙ„ Ù„Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù‚Ø¯ÙŠÙ… Ù„Ù„ØªÙˆØ§ÙÙ‚
                return {
                    status: status.status,
                    color: status.color,
                    icon: status.icon,
                    isWorkDay: status.isWorkDay,
                    checkInTime: status.attendanceTime,
                    isLate: status.isLate || false,
                    workingHours: status.workingHours || 0,
                    scheduledShift: status.scheduledShift
                };
            },

            // Ø­Ø³Ø§Ø¨ Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„Ø¯Ù‚ÙŠÙ‚ Ù„Ù„Ù…ÙˆØ¸Ù
            calculateAttendanceRate(employee) {
                const username = Object.keys(users).find(u => users[u].name === employee.name);
                if (!username) return 0;
                
                let workDays = 0;
                let attendedDays = 0;
                
                // ÙØ­Øµ Ø¢Ø®Ø± 30 ÙŠÙˆÙ… Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                const today = new Date();
                for (let i = 0; i < 30; i++) {
                    const checkDate = new Date(today);
                    checkDate.setDate(checkDate.getDate() - i);
                    const dateStr = checkDate.toISOString().split('T')[0];
                    
                    // ØªØ­Ø¯ÙŠØ¯ Ø¥Ø°Ø§ ÙƒØ§Ù† ÙŠÙˆÙ… Ø¹Ù…Ù„ Ù…Ø¬Ø¯ÙˆÙ„
                    const dayIndex = this.getDayIndexForDate(checkDate);
                    if (dayIndex >= 0 && dayIndex < 20) {
                        const shift = employee.schedule[dayIndex];
                        if (shift !== 'OFF' && shift !== 'Annual') {
                            workDays++;
                            
                            // ÙØ­Øµ Ø§Ù„Ø­Ø¶ÙˆØ±
                            const dayData = attendanceSystem.attendanceData[dateStr];
                            if (dayData && (dayData[username] || dayData[employee.name] || dayData[employee.code])) {
                                const attendance = dayData[username] || dayData[employee.name] || dayData[employee.code];
                                if (attendance.checkIn) {
                                    attendedDays++;
                                }
                            }
                        }
                    }
                }
                
                return workDays > 0 ? Math.round((attendedDays / workDays) * 100) : 0;
            },

            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ÙÙ‡Ø±Ø³ Ø§Ù„ÙŠÙˆÙ… Ù„ØªØ§Ø±ÙŠØ® Ù…Ø­Ø¯Ø¯
            getDayIndexForDate(date) {
                const startDate = new Date('2025-08-01');
                const daysDiff = Math.floor((date - startDate) / (1000 * 60 * 60 * 24));
                return daysDiff >= 0 && daysDiff < 30 ? daysDiff : -1;
            },

            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø© (Ø¨Ø¯ÙˆÙ† Ø§Ù„Ù…Ø¯ÙŠØ±)
            getEmployeeStats() {
                let present = 0;
                let absent = 0;
                let onLeave = 0;
                let onBreak = 0;
                let totalAttendanceRate = 0;
                let employeeCount = 0;

                // ÙÙ„ØªØ±Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ù„Ø§Ø³ØªØ¨Ø¹Ø§Ø¯ Ø§Ù„Ù…Ø¯ÙŠØ±
                const regularEmployees = employeesData.filter(employee => {
                    const username = Object.keys(users).find(u => users[u].name === employee.name);
                    return username && users[username].role !== 'Ù…Ø¯ÙŠØ±';
                });

                regularEmployees.forEach(employee => {
                    const status = this.getEmployeeStatus(employee);
                    const attendanceRate = this.calculateAttendanceRate(employee);
                    
                    employeeCount++;
                    totalAttendanceRate += attendanceRate;
                    
                    if (status.status === 'Ø­Ø§Ø¶Ø±' || status.status === 'Ù…Ù†ØµØ±Ù') {
                        present++;
                    } else if (status.status === 'ØºÙŠØ± Ù…ØªØµÙ„' && status.isWorkDay) {
                        absent++;
                    } else if (status.status === 'Ø¥Ø¬Ø§Ø²Ø©') {
                        onLeave++;
                    } else if (status.status === 'Ø¥Ø¬Ø§Ø²Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©') {
                        onBreak++;
                    }
                });

                return {
                    present,
                    absent,
                    onLeave,
                    onBreak,
                    averageAttendanceRate: employeeCount > 0 ? Math.round(totalAttendanceRate / employeeCount) : 0,
                    totalEmployees: employeeCount
                };
            },

            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø© Ù…Ø¹ ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©
            getEmployeesByStatus(statusType) {
                const regularEmployees = employeesData.filter(employee => {
                    const username = Object.keys(users).find(u => users[u].name === employee.name);
                    return username && users[username].role !== 'Ù…Ø¯ÙŠØ±';
                });

                return regularEmployees.filter(employee => {
                    const status = this.getEmployeeStatus(employee);
                    const attendanceRate = this.calculateAttendanceRate(employee);
                    
                    // Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø­Ø¶ÙˆØ± Ù„Ù„Ù…ÙˆØ¸Ù
                    employee.attendanceRate = attendanceRate;
                    employee.currentStatus = status;
                    
                    switch (statusType) {
                        case 'present':
                            return status.status === 'Ø­Ø§Ø¶Ø±' || status.status === 'Ù…Ù†ØµØ±Ù';
                        case 'absent':
                            return status.status === 'ØºÙŠØ± Ù…ØªØµÙ„' && status.isWorkDay;
                        case 'onLeave':
                            return status.status === 'Ø¥Ø¬Ø§Ø²Ø©';
                        case 'excellent':
                            return attendanceRate >= 95; // Ù…Ø¹Ø¯Ù„ Ø­Ø¶ÙˆØ± Ù…Ù…ØªØ§Ø²
                        default:
                            return false;
                    }
                }).map(employee => ({
                    ...employee,
                    statusDetails: this.getEmployeeStatus(employee),
                    attendanceRate: this.calculateAttendanceRate(employee)
                }));
            }
        };

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆÙ‚Øª
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('ar-SA', {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false
            });
            
            const dateString = now.toLocaleDateString('ar-SA', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            const currentTimeEl = document.getElementById('currentTime');
            const currentDateEl = document.getElementById('currentDate');
            
            if (currentTimeEl) {
                currentTimeEl.textContent = timeString;
            }
            
            if (currentDateEl) {
                currentDateEl.textContent = dateString;
            }
            
            updateClockHands(now);
        }
        
        function updateClockHands(now) {
            const hours = now.getHours() % 12;
            const minutes = now.getMinutes();
            const seconds = now.getSeconds();
            
            const hourAngle = (hours * 30) + (minutes * 0.5);
            const minuteAngle = minutes * 6;
            const secondAngle = seconds * 6;
            
            const clock = document.querySelector('.ai-clock');
            if (clock) {
                clock.style.setProperty('--hour-angle', `${hourAngle}deg`);
                clock.style.setProperty('--minute-angle', `${minuteAngle}deg`);
                clock.style.setProperty('--second-angle', `${secondAngle}deg`);
            }
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø°ÙƒÙŠØ© ÙˆØ§Ù„Ø¯Ù‚ÙŠÙ‚Ø©
        function updateStats() {
            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø­Ø§Ø¶Ø±ÙŠÙ† Ø§Ù„ÙØ¹Ù„ÙŠÙŠÙ† Ù…Ù† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„Ø§ØªØµØ§Ù„
            let actualPresentCount = 0;
            let totalEmployeesCount = 0;
            let absentCount = 0;
            
            // ÙÙ„ØªØ±Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ù„Ø§Ø³ØªØ¨Ø¹Ø§Ø¯ Ø§Ù„Ù…Ø¯ÙŠØ±
            const regularEmployees = employeesData.filter(employee => {
                const username = Object.keys(users).find(u => users[u].name === employee.name);
                return username && users[username].role !== 'Ù…Ø¯ÙŠØ±';
            });
            
            totalEmployeesCount = regularEmployees.length;
            
            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø­Ø§Ø¶Ø±ÙŠÙ† Ù…Ù† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„ÙØ¹Ù„ÙŠØ©
            const todayData = attendanceSystem.attendanceData[attendanceSystem.currentDate] || {};
            
            regularEmployees.forEach(employee => {
                const username = Object.keys(users).find(u => users[u].name === employee.name);
                if (username) {
                    const attendance = todayData[username];
                    const isLoggedIn = users[username].isOnline;
                    
                    // Ø§Ù„Ù…ÙˆØ¸Ù Ø­Ø§Ø¶Ø± Ø¥Ø°Ø§:
                    // 1. Ø³Ø¬Ù„ Ø­Ø¶ÙˆØ± Ø§Ù„ÙŠÙˆÙ…ØŒ Ø£Ùˆ
                    // 2. Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… ÙˆÙ…Ø¬Ø¯ÙˆÙ„ Ù„Ù„Ø¹Ù…Ù„ Ø§Ù„ÙŠÙˆÙ…
                    const hasAttendance = attendance && attendance.checkIn;
                    const dayIndex = employeeStatusSystem.getCurrentDayIndex();
                    const todayShift = employee.schedule[dayIndex];
                    const isWorkDay = todayShift !== 'OFF' && todayShift !== 'Annual';
                    
                    if (hasAttendance || (isLoggedIn && isWorkDay)) {
                        actualPresentCount++;
                    } else if (isWorkDay) {
                        absentCount++;
                    }
                }
            });
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
            document.getElementById('totalEmployees').textContent = totalEmployeesCount;
            document.getElementById('presentToday').textContent = actualPresentCount;
            document.getElementById('absentToday').textContent = absentCount;
            
            // Ø­Ø³Ø§Ø¨ Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø­Ø¶ÙˆØ±
            const attendanceRate = totalEmployeesCount > 0 ? Math.round((actualPresentCount / totalEmployeesCount) * 100) : 0;
            document.getElementById('attendanceRate').textContent = attendanceRate + '%';
            
            // ØªØ­Ø¯ÙŠØ« Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø©
            const preciseStats = preciseEmployeeManagement.calculatePreciseStats();
            if (document.getElementById('actualPresentCount')) {
                document.getElementById('actualPresentCount').textContent = actualPresentCount;
                document.getElementById('weeklyLeaveCount').textContent = preciseStats.weeklyLeaveCount;
                document.getElementById('annualLeaveCount').textContent = preciseStats.annualLeaveCount;
                
                // Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØªØµÙ„ÙŠÙ† ÙØ¹Ù„ÙŠØ§Ù‹
                const actualOnlineCount = connectionTracker.getOnlineCount();
                document.getElementById('loggedInCount').textContent = actualOnlineCount;
                
                console.log(`ğŸ“Š ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª - Ø§Ù„Ø­Ø§Ø¶Ø±ÙŠÙ†: ${actualPresentCount}ØŒ Ø§Ù„Ù…ØªØµÙ„ÙŠÙ†: ${actualOnlineCount}`);
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø­Ø¶ÙˆØ± Ø£ÙŠØ¶Ø§Ù‹
            if (document.getElementById('totalEmployeesCount')) {
                updateAttendanceStats();
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ø¹Ø§Ø¯ÙŠ ÙˆØ§Ù„Ø¯Ù‚ÙŠÙ‚
            updateEmployeeTable();
            preciseEmployeeManagement.updatePreciseEmployeeTable();
            
            // ØªØ­Ø¯ÙŠØ« ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„ØªØ£Ø®ÙŠØ±
            if (document.getElementById('lateReportTableBody')) {
                updateLateReports();
            }
        }

        // ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ù…ØªÙ‚Ø¯Ù… (Ø¨Ø¯ÙˆÙ† Ø§Ù„Ù…Ø¯ÙŠØ±)
        function updateEmployeeTable() {
            const tbody = document.getElementById('employeeTableBody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            // ÙÙ„ØªØ±Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ù„Ø§Ø³ØªØ¨Ø¹Ø§Ø¯ Ø§Ù„Ù…Ø¯ÙŠØ±
            const regularEmployees = employeesData.filter(employee => {
                const username = Object.keys(users).find(u => users[u].name === employee.name);
                return username && users[username].role !== 'Ù…Ø¯ÙŠØ±';
            });
            
            regularEmployees.forEach((employee, index) => {
                const status = employeeStatusSystem.getEmployeeStatus(employee);
                const attendanceRate = employeeStatusSystem.calculateAttendanceRate(employee);
                const row = document.createElement('tr');
                
                // ØªÙ„ÙˆÙŠÙ† Ø§Ù„ØµÙ Ø­Ø³Ø¨ Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø­Ø¶ÙˆØ±
                let rowStyle = '';
                if (attendanceRate >= 95) {
                    rowStyle = 'background: rgba(16, 185, 129, 0.1);'; // Ø£Ø®Ø¶Ø± Ù„Ù„Ù…Ù…ØªØ§Ø²
                } else if (attendanceRate >= 85) {
                    rowStyle = 'background: rgba(59, 130, 246, 0.1);'; // Ø£Ø²Ø±Ù‚ Ù„Ù„Ø¬ÙŠØ¯
                } else if (attendanceRate >= 70) {
                    rowStyle = 'background: rgba(245, 158, 11, 0.1);'; // Ø£ØµÙØ± Ù„Ù„Ù…ØªÙˆØ³Ø·
                } else {
                    rowStyle = 'background: rgba(239, 68, 68, 0.1);'; // Ø£Ø­Ù…Ø± Ù„Ù„Ø¶Ø¹ÙŠÙ
                }
                
                row.style.cssText = rowStyle;
                
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td style="font-weight: bold;">${employee.name}</td>
                    <td>${employee.code}</td>
                    <td>${employee.department}</td>
                    <td>
                        <span style="background: ${status.color}; color: white; padding: 4px 8px; border-radius: 12px; font-size: 0.8rem; display: inline-flex; align-items: center; gap: 4px;">
                            ${status.icon} ${status.status}
                        </span>
                        ${status.isLate ? '<div style="color: #f59e0b; font-size: 0.7rem; margin-top: 2px;">âš ï¸ Ù…ØªØ£Ø®Ø±</div>' : ''}
                    </td>
                    <td>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <div style="font-weight: bold; color: ${attendanceRate >= 90 ? '#10b981' : attendanceRate >= 70 ? '#f59e0b' : '#ef4444'};">
                                ${attendanceRate}%
                            </div>
                            <div style="width: 50px; height: 6px; background: #e5e7eb; border-radius: 3px; overflow: hidden;">
                                <div style="width: ${attendanceRate}%; height: 100%; background: ${attendanceRate >= 90 ? '#10b981' : attendanceRate >= 70 ? '#f59e0b' : '#ef4444'}; transition: width 0.3s ease;"></div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <button class="oud-btn oud-btn-primary" style="padding: 6px 12px; font-size: 0.8rem;" onclick="viewEmployeeDetails(${employee.id})">
                            <span>ğŸ‘ï¸</span> Ø¹Ø±Ø¶
                        </button>
                    </td>
                `;
                
                tbody.appendChild(row);
            });
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø©
        function showEmployeesByStatus(statusType) {
            const employees = preciseEmployeeManagement.getEmployeesByType(statusType);
            
            let title = '';
            let icon = '';
            
            switch (statusType) {
                case 'present':
                    title = 'Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ø­Ø§Ø¶Ø±ÙŠÙ† ÙˆØ§Ù„Ù…Ø¨Ø§Ø´Ø±ÙŠÙ†';
                    icon = 'âœ…';
                    break;
                case 'weeklyLeave':
                    title = 'Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† ÙÙŠ Ø¥Ø¬Ø§Ø²Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©';
                    icon = 'ğŸ’¤';
                    break;
                case 'annualLeave':
                    title = 'Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† ÙÙŠ Ø¥Ø¬Ø§Ø²Ø© Ø³Ù†ÙˆÙŠØ©';
                    icon = 'ğŸ–ï¸';
                    break;
                case 'loggedIn':
                    title = 'Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ† ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…';
                    icon = 'ğŸ”';
                    break;
                default:
                    title = 'Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†';
                    icon = 'ğŸ‘¥';
            }
            
            showPreciseEmployeeModal(title, employees, icon);
        }

        // Ø¹Ø±Ø¶ Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø©
        function showPreciseEmployeeModal(title, employees, icon) {
            const modalTitle = document.getElementById('statusModalTitle');
            const modalContent = document.getElementById('employeeStatusContent');
            
            modalTitle.innerHTML = `${icon} ${title}`;
            
            if (employees.length === 0) {
                modalContent.innerHTML = `
                    <div style="padding: 50px; text-align: center; color: var(--oud-cream);">
                        <div style="font-size: 4rem; margin-bottom: 20px; opacity: 0.5;">${icon}</div>
                        <h3 style="color: var(--oud-gold); margin-bottom: 15px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª</h3>
                        <p style="opacity: 0.8;">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…ÙˆØ¸ÙÙŠÙ† ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„ÙØ¦Ø© Ø­Ø§Ù„ÙŠØ§Ù‹</p>
                    </div>
                `;
            } else {
                let content = `
                    <div style="padding: 20px;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px;">
                `;
                
                employees.forEach(employee => {
                    const status = employee.statusDetails;
                    
                    content += `
                        <div style="background: var(--glass-bg); border-radius: 15px; padding: 25px; border: 2px solid ${status.color}30; transition: all 0.3s ease;" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 30px rgba(0,0,0,0.2)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                            <div style="display: flex; align-items: center; margin-bottom: 20px;">
                                <div style="width: 60px; height: 60px; background: ${status.color}; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.8rem; margin-left: 20px; box-shadow: 0 4px 15px ${status.color}40;">
                                    ${status.icon}
                                </div>
                                <div>
                                    <h4 style="color: var(--oud-gold); margin: 0; font-size: 1.2rem; font-weight: bold;">${employee.name}</h4>
                                    <p style="color: var(--oud-cream); margin: 3px 0; font-size: 1rem; font-weight: 600;">${employee.code}</p>
                                    <p style="color: var(--oud-bronze); margin: 0; font-size: 0.9rem;">${employee.department}</p>
                                </div>
                            </div>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                                <div style="text-align: center; padding: 12px; background: ${status.color}15; border-radius: 10px; border: 1px solid ${status.color}30;">
                                    <div style="color: var(--oud-cream); font-size: 0.8rem; margin-bottom: 5px;">Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„ÙØ¹Ù„ÙŠØ©</div>
                                    <div style="color: ${status.color}; font-weight: bold; font-size: 0.9rem;">${status.status}</div>
                                </div>
                                <div style="text-align: center; padding: 12px; background: var(--glass-bg); border-radius: 10px; border: 1px solid var(--oud-bronze);">
                                    <div style="color: var(--oud-cream); font-size: 0.8rem; margin-bottom: 5px;">Ø§Ù„ÙˆØ±Ø¯ÙŠØ©</div>
                                    <div style="color: var(--oud-gold); font-weight: bold; font-size: 0.9rem;">${status.scheduledShift}</div>
                                </div>
                            </div>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                                <div style="text-align: center; padding: 12px; background: var(--glass-bg); border-radius: 10px; border: 1px solid var(--oud-bronze);">
                                    <div style="color: var(--oud-cream); font-size: 0.8rem; margin-bottom: 5px;">ÙˆÙ‚Øª Ø§Ù„Ø­Ø¶ÙˆØ±</div>
                                    <div style="color: ${status.attendanceTime !== '-' ? '#10b981' : '#6b7280'}; font-weight: bold; font-size: 0.9rem;">${status.attendanceTime}</div>
                                </div>
                                <div style="text-align: center; padding: 12px; background: ${status.isLoggedIn ? '#10b98115' : '#6b728015'}; border-radius: 10px; border: 1px solid ${status.isLoggedIn ? '#10b981' : '#6b7280'};">
                                    <div style="color: var(--oud-cream); font-size: 0.8rem; margin-bottom: 5px;">Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…</div>
                                    <div style="color: ${status.isLoggedIn ? '#10b981' : '#6b7280'}; font-weight: bold; font-size: 0.9rem;">${status.systemStatus}</div>
                                </div>
                            </div>
                            
                            ${status.isLate ? `
                                <div style="background: rgba(245, 158, 11, 0.1); border: 1px solid #f59e0b; border-radius: 8px; padding: 10px; margin-bottom: 15px;">
                                    <div style="color: #f59e0b; font-weight: bold; font-size: 0.8rem; text-align: center;">âš ï¸ Ù…ØªØ£Ø®Ø±</div>
                                </div>
                            ` : ''}
                            
                            <button class="oud-btn oud-btn-primary" style="width: 100%; padding: 10px; font-size: 0.9rem;" onclick="viewEmployeeDetails(${employee.id}); closeModal('employeeStatusModal');">
                                <span>ğŸ‘ï¸</span> Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙƒØ§Ù…Ù„Ø©
                            </button>
                        </div>
                    `;
                });
                
                content += `
                        </div>
                        <div style="text-align: center; margin-top: 30px; padding-top: 20px; border-top: 2px solid var(--oud-bronze);">
                            <div style="color: var(--oud-cream); font-size: 1rem;">
                                Ø¥Ø¬Ù…Ø§Ù„ÙŠ: <span style="color: var(--oud-gold); font-weight: bold; font-size: 1.2rem;">${employees.length}</span> Ù…ÙˆØ¸Ù
                            </div>
                        </div>
                    </div>
                `;
            }
            
            modalContent.innerHTML = content;
            openModal('employeeStatusModal');
        }

        // Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ù„Ù„ØªÙˆØ§ÙÙ‚
        function showPresentEmployees() {
            showEmployeesByStatus('present');
        }

        function showAbsentEmployees() {
            const absentEmployees = employeeStatusSystem.getEmployeesByStatus('absent');
            showEmployeeStatusModal('Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„ØºØ§Ø¦Ø¨ÙŠÙ† Ø§Ù„ÙŠÙˆÙ…', absentEmployees, 'âŒ');
        }

        function showOnLeaveEmployees() {
            showEmployeesByStatus('annualLeave');
        }

        function showExcellentEmployees() {
            const excellentEmployees = employeeStatusSystem.getEmployeesByStatus('excellent');
            showEmployeeStatusModal('Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ù…ØªÙ…ÙŠØ²ÙŠÙ†', excellentEmployees, 'â­');
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ù…ØªØµÙ„ÙŠÙ† Ù„Ù„Ù…Ø¯ÙŠØ± ÙÙ‚Ø· Ù…Ø¹ Ù†Ø¸Ø§Ù… ØªØªØ¨Ø¹ Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
        function showPresentEmployeesForAdmin() {
            if (!currentUser || currentUser.role !== 'Ù…Ø¯ÙŠØ±') return;
            
            console.log('ğŸ” ÙØ­Øµ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ù…ØªØµÙ„ÙŠÙ† Ù„Ù„Ù…Ø¯ÙŠØ± Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù†Ø¸Ø§Ù… ØªØªØ¨Ø¹ Ø§Ù„Ø§ØªØµØ§Ù„...');
            
            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ù…ØªØµÙ„ÙŠÙ† ÙØ¹Ù„ÙŠØ§Ù‹ Ù…Ù† Ù†Ø¸Ø§Ù… ØªØªØ¨Ø¹ Ø§Ù„Ø§ØªØµØ§Ù„
            const onlineUsers = connectionTracker.getOnlineUsersDetails();
            const connectedEmployees = [];
            
            onlineUsers.forEach(user => {
                if (user.role !== 'Ù…Ø¯ÙŠØ±') {
                    // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ¸Ù
                    const employee = employeesData.find(emp => {
                        const empUsername = Object.keys(users).find(u => users[u].name === emp.name);
                        return empUsername === user.username;
                    });
                    
                    if (employee) {
                        const status = preciseEmployeeManagement.getPreciseEmployeeStatus(employee);
                        connectedEmployees.push({
                            ...employee,
                            username: user.username,
                            statusDetails: status,
                            user: user,
                            connectionDuration: user.connectionDuration,
                            lastActivity: user.lastActivity
                        });
                        console.log(`âœ… Ù…ÙˆØ¸Ù Ù…ØªØµÙ„: ${user.name} - ${status.status} - Ù…ØªØµÙ„ Ù…Ù†Ø° ${user.connectionDuration} Ø¯Ù‚ÙŠÙ‚Ø©`);
                    }
                }
            });
            
            console.log(`ğŸ‘¥ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ù…ØªØµÙ„ÙŠÙ†: ${connectedEmployees.length}`);
            
            if (connectedEmployees.length === 0) {
                console.log('â„¹ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…ÙˆØ¸ÙÙŠÙ† Ù…ØªØµÙ„ÙŠÙ† Ø­Ø§Ù„ÙŠØ§Ù‹');
                return;
            }
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ù†Ø§ÙØ°Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¹Ø¯ Ø«Ø§Ù†ÙŠØªÙŠÙ†
            setTimeout(() => {
                showPresentEmployeesModal(connectedEmployees);
            }, 2000);
        }
        
        // Ø¹Ø±Ø¶ Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ù…ØªØµÙ„ÙŠÙ†
        function showPresentEmployeesModal(employees) {
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.style.zIndex = '4000';
            modal.innerHTML = `
                <div class="modal-content" style="max-width: 900px;">
                    <div class="modal-header">
                        <h3 class="modal-title">ğŸ‘¥ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ù…ØªØµÙ„ÙŠÙ† Ø§Ù„Ø¢Ù† (${employees.length})</h3>
                        <button class="close-btn" onclick="this.closest('.modal').remove()">&times;</button>
                    </div>
                    <div style="padding: 20px;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px;">
                            ${employees.map(employee => `
                                <div style="background: var(--glass-bg); border-radius: 15px; padding: 20px; border: 2px solid ${employee.statusDetails.color}30; transition: all 0.3s ease;" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 30px rgba(0,0,0,0.2)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                                    <div style="display: flex; align-items: center; margin-bottom: 15px;">
                                        <div style="width: 60px; height: 60px; background: ${employee.statusDetails.color}; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.8rem; margin-left: 15px; box-shadow: 0 4px 15px ${employee.statusDetails.color}40;">
                                            ${employee.statusDetails.icon}
                                        </div>
                                        <div>
                                            <h4 style="color: var(--oud-gold); margin: 0; font-size: 1.2rem; font-weight: bold;">${employee.name}</h4>
                                            <p style="color: var(--oud-cream); margin: 3px 0; font-size: 1rem; font-weight: 600;">${employee.code}</p>
                                            <p style="color: var(--oud-bronze); margin: 0; font-size: 0.9rem;">${employee.department}</p>
                                        </div>
                                    </div>
                                    
                                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px;">
                                        <div style="text-align: center; padding: 10px; background: ${employee.statusDetails.color}15; border-radius: 8px; border: 1px solid ${employee.statusDetails.color}30;">
                                            <div style="color: var(--oud-cream); font-size: 0.8rem; margin-bottom: 5px;">Ø§Ù„Ø­Ø§Ù„Ø©</div>
                                            <div style="color: ${employee.statusDetails.color}; font-weight: bold; font-size: 0.9rem;">${employee.statusDetails.status}</div>
                                        </div>
                                        <div style="text-align: center; padding: 10px; background: #10b98115; border-radius: 8px; border: 1px solid #10b981;">
                                            <div style="color: var(--oud-cream); font-size: 0.8rem; margin-bottom: 5px;">Ù…ØªØµÙ„ Ù…Ù†Ø°</div>
                                            <div style="color: #10b981; font-weight: bold; font-size: 0.9rem;">ğŸŸ¢ ${employee.connectionDuration} Ø¯Ù‚ÙŠÙ‚Ø©</div>
                                        </div>
                                    </div>
                                    
                                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                        <div style="text-align: center; padding: 8px; background: var(--glass-bg); border-radius: 6px; border: 1px solid var(--oud-bronze);">
                                            <div style="color: var(--oud-cream); font-size: 0.7rem;">Ø§Ù„ÙˆØ±Ø¯ÙŠØ©</div>
                                            <div style="color: var(--oud-gold); font-weight: bold; font-size: 0.8rem;">${employee.statusDetails.scheduledShift}</div>
                                        </div>
                                        <div style="text-align: center; padding: 8px; background: var(--glass-bg); border-radius: 6px; border: 1px solid var(--oud-bronze);">
                                            <div style="color: var(--oud-cream); font-size: 0.7rem;">Ø§Ù„Ø­Ø¶ÙˆØ±</div>
                                            <div style="color: ${employee.statusDetails.attendanceTime !== '-' ? '#10b981' : '#6b7280'}; font-weight: bold; font-size: 0.8rem;">${employee.statusDetails.attendanceTime}</div>
                                        </div>
                                    </div>
                                    
                                    ${employee.statusDetails.isLate ? `
                                        <div style="background: rgba(245, 158, 11, 0.1); border: 1px solid #f59e0b; border-radius: 6px; padding: 8px; margin-top: 10px;">
                                            <div style="color: #f59e0b; font-weight: bold; font-size: 0.8rem; text-align: center;">âš ï¸ Ù…ØªØ£Ø®Ø±</div>
                                        </div>
                                    ` : ''}
                                </div>
                            `).join('')}
                        </div>
                        
                        <div style="text-align: center; margin-top: 20px; padding-top: 15px; border-top: 2px solid var(--oud-gold);">
                            <div style="color: var(--oud-cream); font-size: 1rem;">
                                Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ù…ØªØµÙ„ÙŠÙ†: <span style="color: var(--oud-gold); font-weight: bold; font-size: 1.2rem;">${employees.length}</span>
                            </div>
                            <div style="color: var(--oud-bronze); font-size: 0.9rem; margin-top: 5px;">
                                ÙŠØªÙ… ØªØ­Ø¯ÙŠØ« Ù‡Ø°Ù‡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„/Ø®Ø±ÙˆØ¬ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.remove();
                }
            });
            
            console.log(`âœ… ØªÙ… Ø¹Ø±Ø¶ Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ù…ØªØµÙ„ÙŠÙ† Ù„Ù„Ù…Ø¯ÙŠØ± (${employees.length} Ù…ÙˆØ¸Ù)`);
        }

        // Ø¹Ø±Ø¶ Ù†Ø§ÙØ°Ø© Ø­Ø§Ù„Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†
        function showEmployeeStatusModal(title, employees, icon) {
            const modalTitle = document.getElementById('statusModalTitle');
            const modalContent = document.getElementById('employeeStatusContent');
            
            modalTitle.innerHTML = `${icon} ${title}`;
            
            if (employees.length === 0) {
                modalContent.innerHTML = `
                    <div style="padding: 50px; text-align: center; color: var(--oud-cream);">
                        <div style="font-size: 4rem; margin-bottom: 20px; opacity: 0.5;">${icon}</div>
                        <h3 style="color: var(--oud-gold); margin-bottom: 15px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª</h3>
                        <p style="opacity: 0.8;">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…ÙˆØ¸ÙÙŠÙ† ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„ÙØ¦Ø© Ø­Ø§Ù„ÙŠØ§Ù‹</p>
                    </div>
                `;
            } else {
                let content = `
                    <div style="padding: 20px;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px;">
                `;
                
                employees.forEach(employee => {
                    const status = employeeStatusSystem.getEmployeeStatus(employee);
                    const dayIndex = employeeStatusSystem.getCurrentDayIndex();
                    const todayShift = employee.schedule[dayIndex];
                    
                    content += `
                        <div style="background: var(--glass-bg); border-radius: 15px; padding: 20px; border: 1px solid var(--oud-bronze); transition: all 0.3s ease;" onmouseover="this.style.transform='translateY(-5px)'" onmouseout="this.style.transform='translateY(0)'">
                            <div style="display: flex; align-items: center; margin-bottom: 15px;">
                                <div style="width: 50px; height: 50px; background: var(--gradient-primary); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; margin-left: 15px;">
                                    ğŸ‘¤
                                </div>
                                <div>
                                    <h4 style="color: var(--oud-gold); margin: 0; font-size: 1.1rem;">${employee.name}</h4>
                                    <p style="color: var(--oud-cream); margin: 2px 0; font-size: 0.9rem;">${employee.code}</p>
                                    <p style="color: var(--oud-bronze); margin: 0; font-size: 0.8rem;">${employee.department}</p>
                                </div>
                            </div>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px;">
                                <div style="text-align: center; padding: 8px; background: rgba(212, 175, 55, 0.1); border-radius: 8px;">
                                    <div style="color: var(--oud-cream); font-size: 0.8rem;">Ø§Ù„Ø­Ø§Ù„Ø©</div>
                                    <div style="color: ${status.color}; font-weight: bold; font-size: 0.9rem;">${status.icon} ${status.status}</div>
                                </div>
                                <div style="text-align: center; padding: 8px; background: rgba(212, 175, 55, 0.1); border-radius: 8px;">
                                    <div style="color: var(--oud-cream); font-size: 0.8rem;">Ø§Ù„ÙˆØ±Ø¯ÙŠØ©</div>
                                    <div style="color: var(--oud-gold); font-weight: bold; font-size: 0.9rem;">${todayShift === 'Annual' ? 'ğŸ–ï¸ Ø¥Ø¬Ø§Ø²Ø©' : todayShift === 'OFF' ? 'ğŸ’¤ Ø¥Ø¬Ø§Ø²Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©' : todayShift}</div>
                                </div>
                            </div>
                            
                            ${title.includes('Ù…ØªÙ…ÙŠØ²ÙŠÙ†') ? `
                                <div style="text-align: center; padding: 8px; background: rgba(16, 185, 129, 0.1); border-radius: 8px; margin-bottom: 15px;">
                                    <div style="color: var(--oud-cream); font-size: 0.8rem;">Ù†Ø³Ø¨Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡</div>
                                    <div style="color: #10b981; font-weight: bold; font-size: 1.2rem;">${employee.performance}%</div>
                                </div>
                            ` : ''}
                            
                            <button class="oud-btn oud-btn-primary" style="width: 100%; padding: 8px; font-size: 0.9rem;" onclick="viewEmployeeDetails(${employee.id}); closeModal('employeeStatusModal');">
                                <span>ğŸ‘ï¸</span> Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„
                            </button>
                        </div>
                    `;
                });
                
                content += `
                        </div>
                        <div style="text-align: center; margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--oud-bronze);">
                            <div style="color: var(--oud-cream); font-size: 0.9rem;">
                                Ø¥Ø¬Ù…Ø§Ù„ÙŠ: <span style="color: var(--oud-gold); font-weight: bold;">${employees.length}</span> Ù…ÙˆØ¸Ù
                            </div>
                        </div>
                    </div>
                `;
            }
            
            modalContent.innerHTML = content;
            openModal('employeeStatusModal');
        }

        // Ø¹Ø±Ø¶ Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†
        function displaySchedule() {
            const tbody = document.getElementById('scheduleTableBody');
            if (!tbody) return;
            
            tbody.innerHTML = '';

            employeesData.forEach(employee => {
                const row = document.createElement('tr');
                
                // Ø¹Ù…ÙˆØ¯ Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù
                const nameCell = document.createElement('td');
                nameCell.className = 'employee-name';
                nameCell.textContent = employee.name;
                row.appendChild(nameCell);
                
                // Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ø¬Ø¯ÙˆÙ„Ø© (30 ÙŠÙˆÙ… Ù„Ø´Ù‡Ø± Ø£ØºØ³Ø·Ø³)
                for (let i = 0; i < 30; i++) {
                    const cell = document.createElement('td');
                    cell.className = 'shift-cell';
                    const shift = employee.schedule[i] || 'OFF';
                    
                    // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„ÙˆØ±Ø¯ÙŠØ©
                    if (shift === '4-10') {
                        cell.className += ' shift-4-10';
                        cell.innerHTML = '<span class="shift-time">4-10</span><span class="shift-type">ØµØ¨Ø§Ø­ÙŠ</span>';
                    } else if (shift === '9-3') {
                        cell.className += ' shift-9-3';
                        cell.innerHTML = '<span class="shift-time">9-3</span><span class="shift-type">Ù†Ù‡Ø§Ø±ÙŠ</span>';
                    } else if (shift === '9-6') {
                        cell.className += ' shift-9-6';
                        cell.innerHTML = '<span class="shift-time">9-6</span><span class="shift-type">Ø¹Ø§Ø¯ÙŠ</span>';
                    } else if (shift === '11-8') {
                        cell.className += ' shift-11-8';
                        cell.innerHTML = '<span class="shift-time">11-8</span><span class="shift-type">Ù…Ø³Ø§Ø¦ÙŠ</span>';
                    } else if (shift === '1-10') {
                        cell.className += ' shift-1-10';
                        cell.innerHTML = '<span class="shift-time">1-10</span><span class="shift-type">Ù„ÙŠÙ„ÙŠ</span>';
                    } else if (shift === 'Annual') {
                        cell.className += ' shift-annual';
                        cell.innerHTML = '<span class="shift-time">ğŸ–ï¸</span><span class="shift-type">Ø¥Ø¬Ø§Ø²Ø©</span>';
                    } else {
                        cell.className += ' shift-off';
                        cell.innerHTML = '<span class="shift-time">ğŸ’¤</span><span class="shift-type">Ø¥Ø¬Ø§Ø²Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©</span>';
                    }
                    
                    row.appendChild(cell);
                }
                
                tbody.appendChild(row);
            });
        }

        // ÙØªØ­/Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebarOverlay');
            
            sidebar.classList.toggle('active');
            overlay.classList.toggle('active');
        }

        // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ
        function closeSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebarOverlay');
            
            sidebar.classList.remove('active');
            overlay.classList.remove('active');
        }

        // Ø¯Ø§Ù„Ø© Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ù…Ø­Ø³Ù†Ø©
        function navigateToSection(section, element) {
            // Ù…Ù†Ø¹ Ø§Ù„Ø³Ù„ÙˆÙƒ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù„Ù„Ø±Ø§Ø¨Ø·
            event.preventDefault();
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
            if (!currentUser) {
                showNotification('ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹! ğŸ”', 'error');
                return;
            }
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª
            if (!currentUser.permissions.includes(section)) {
                showNotification('Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù…! ğŸš«', 'error');
                return;
            }
            
            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ÙØ¦Ø© Ø§Ù„Ù†Ø´Ø·Ø© Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ±
            document.querySelectorAll('.menu-item').forEach(i => i.classList.remove('active'));
            
            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙØ¦Ø© Ø§Ù„Ù†Ø´Ø·Ø© Ù„Ù„Ø¹Ù†ØµØ± Ø§Ù„Ù…Ø­Ø¯Ø¯
            element.classList.add('active');
            
            // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù‚Ø³Ù…
            switchSection(section + '-section');
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ù‚Ø³Ù…
            if (section === 'attendance') {
                updateAttendanceStats();
            } else if (section === 'reports') {
                updateLateReports();
            } else if (section === 'employees') {
                updateEmployeeTable();
            } else if (section === 'schedule') {
                displaySchedule();
            } else if (section === 'maqsam') {
                updateMaqsamDisplay();
            }
            
            // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ
            closeSidebar();
            
            // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØªÙ†Ù‚Ù„ ÙÙŠ Ø§Ù„ÙƒÙˆÙ†Ø³ÙˆÙ„ ÙÙ‚Ø·
            console.log(`âœ… ØªÙ… Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ ${getTitleForSection(section)}`);
        }

        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù‚Ø³Ù…
        function getTitleForSection(section) {
            const titles = {
                'dashboard': 'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…',
                'schedule': 'Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†',
                'employees': 'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†',
                'attendance': 'Ø³Ø¬Ù„ Ø§Ù„Ø­Ø¶ÙˆØ±',
                'reports': 'Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±',
                'settings': 'Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª'
            };
            return titles[section] || 'Ø§Ù„Ù‚Ø³Ù…';
        }

        // Ø¯Ø§Ù„Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±
        function quickLogin(username) {
            console.log('ğŸš€ Ø¯Ø®ÙˆÙ„ Ø³Ø±ÙŠØ¹:', username);
            
            // Ù…Ù„Ø¡ Ø§Ù„Ø­Ù‚ÙˆÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
            document.getElementById('username').value = username;
            document.getElementById('password').value = '123';
            
            // ØªØ´ØºÙŠÙ„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
            const loginForm = document.getElementById('loginForm');
            const event = new Event('submit');
            loginForm.dispatchEvent(event);
        }

        // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø¨Ø³Ø· ÙˆØ§Ù„Ù…Ø­Ø³Ù†
        function login(event) {
            event.preventDefault();
            
            console.log('ğŸ” Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„...');
            
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value.trim();
            const errorDiv = document.getElementById('loginError');
            
            console.log('ğŸ“ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯Ø®Ù„Ø©:', { username, password });
            console.log('ğŸ” Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…ØªØ§Ø­ÙŠÙ†:', Object.keys(users));
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            if (!username || !password) {
                errorDiv.textContent = 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±';
                errorDiv.style.display = 'block';
                return;
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø²Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
            const loginBtn = document.querySelector('.login-btn');
            loginBtn.disabled = true;
            loginBtn.innerHTML = '<span style="margin-left: 8px;">â³</span> Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...';
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            const user = users[username];
            
            console.log('ğŸ‘¤ ÙØ­Øµ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:', username);
            console.log('ğŸ” Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¬ÙˆØ¯:', user ? 'Ù†Ø¹Ù…' : 'Ù„Ø§');
            if (user) {
                console.log('ğŸ”‘ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù…Ø¯Ø®Ù„Ø©:', password);
                console.log('ğŸ”‘ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©:', user.password);
                console.log('âœ… ØªØ·Ø§Ø¨Ù‚ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:', user.password === password ? 'Ù†Ø¹Ù…' : 'Ù„Ø§');
                console.log('ğŸŸ¢ Ø§Ù„Ø­Ø³Ø§Ø¨ Ù…ÙØ¹Ù„:', user.isActive ? 'Ù†Ø¹Ù…' : 'Ù„Ø§');
            }
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            if (user && user.password === password && user.isActive) {
                    // Ù†Ø¬Ø­ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
                    loginAttempts = 0;
                    
                    // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… - Ù…ØªØµÙ„ ÙˆÙØ¹Ø§Ù„ Ù…Ø¹ Ø·Ø§Ø¨Ø¹ Ø²Ù…Ù†ÙŠ Ø¯Ù‚ÙŠÙ‚
                    user.lastLogin = new Date().toISOString();
                    user.isOnline = true;
                    user.loginCount = (user.loginCount || 0) + 1;
                    user.connectionStatus = 'Ù…ØªØµÙ„';
                    user.lastActivity = new Date().toISOString();
                    
                    currentUser = {
                        username: username,
                        ...user,
                        loginTime: new Date().toISOString()
                    };
                    
                    // Ø­ÙØ¸ Ø§Ù„Ø¬Ù„Ø³Ø©
                    sessionManager.saveSession(currentUser);
                    
                    // ØªØ³Ø¬ÙŠÙ„ Ù†Ø´Ø§Ø· ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ (Ø¢Ù…Ù†)
                    console.log(`âœ… ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ù†Ø§Ø¬Ø­: ${user.name} (${user.code}) ÙÙŠ ${new Date().toLocaleString('ar-SA')}`);
                    console.log(`ğŸŸ¢ ${user.name} Ù…ØªØµÙ„ Ø§Ù„Ø¢Ù† - Ø§Ù„Ø­Ø§Ù„Ø©: ${user.isOnline ? 'Ù…ØªØµÙ„' : 'ØºÙŠØ± Ù…ØªØµÙ„'}`);
                    
                    // ØªØ­Ø¯ÙŠØ« Ù†Ø¸Ø§Ù… ØªØªØ¨Ø¹ Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„ÙÙˆØ±ÙŠ Ù…Ø¹ Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø¯ÙŠØ±
                    connectionTracker.updateUserStatus(username, true);
                    
                    // ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…ÙˆØ¸Ù ÙÙŠ Ù…Ù‚Ø³Ù… (Ù…Ø­Ø§ÙƒØ§Ø©)
                    if (user.maqsamAgentId) {
                        console.log(`ğŸ“ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…ÙˆØ¸Ù ÙÙŠ Ù…Ù‚Ø³Ù…: ${username}`);
                    }
                    
                    // Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
                    const loginContainer = document.getElementById('loginContainer');
                    const mainContent = document.getElementById('mainContent');
                    
                    if (loginContainer) {
                        loginContainer.classList.add('hidden');
                        console.log('ğŸ” ØªÙ… Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„');
                    }
                    
                    if (mainContent) {
                        mainContent.style.display = 'block';
                        mainContent.style.visibility = 'visible';
                        mainContent.style.opacity = '1';
                        console.log('ğŸ“± ØªÙ… Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ');
                    }
                    
                    // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø­Ø³Ø¨ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª
                    setTimeout(() => {
                        updateUIForUser();
                        
                        // Ø¥Ø¸Ù‡Ø§Ø± Ù‚Ø³Ù… Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ù†Ø´Ø·ÙŠÙ† Ù„Ù„Ù…Ø¯ÙŠØ± ÙÙ‚Ø·
                        if (currentUser.role === 'Ù…Ø¯ÙŠØ±') {
                            const activeSection = document.getElementById('activeEmployeesSection');
                            if (activeSection) {
                                activeSection.style.display = 'block';
                            }
                            
                            // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ù†Ø´Ø·ÙŠÙ†
                            setTimeout(() => {
                                preciseLoginTracker.updateActiveEmployeesDisplay();
                            }, 500);
                        }
                    }, 100);
                    
                    // Ø¥Ø´Ø¹Ø§Ø± ÙÙˆØ±ÙŠ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¯ÙŠØ±ÙŠÙ† Ø§Ù„Ù…ØªØµÙ„ÙŠÙ† (Ù…Ø­Ø§ÙƒØ§Ø© Ù„Ù„Ø¹Ù…Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª)
                    if (currentUser.role === 'Ù…ÙˆØ¸Ù') {
                        setTimeout(() => {
                            // Ù…Ø­Ø§ÙƒØ§Ø© Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ù…Ø¯ÙŠØ±ÙŠÙ† Ø¹Ø¨Ø± Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª
                            console.log(`ğŸ“¡ Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ù…Ø¯ÙŠØ±ÙŠÙ†: ${currentUser.name} Ø¯Ø®Ù„ Ù„Ù„Ù†Ø¸Ø§Ù…`);
                            
                            // ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØŒ Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ù‡Ø°Ø§ Ø¹Ø¨Ø± WebSocket Ø£Ùˆ Server-Sent Events
                            const notificationData = {
                                type: 'employee_login',
                                employee: {
                                    name: currentUser.name,
                                    code: currentUser.code,
                                    department: currentUser.department
                                },
                                timestamp: new Date().toISOString(),
                                loginTime: new Date().toLocaleTimeString('ar-SA', { hour12: false })
                            };
                            
                            // Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù…
                            setTimeout(() => {
                                if (currentUser && currentUser.role === 'Ù…Ø¯ÙŠØ±') {
                                    connectionTracker.notifyAdminOfStatusChange(username, true);
                                }
                            }, 1000);
                        }, 500);
                    }
                    
                    // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ù…ÙˆØ¸ÙÙŠÙ† ÙÙ‚Ø· (Ù„ÙŠØ³ Ø§Ù„Ù…Ø¯ÙŠØ±) - Ù…Ø¹ ØªØ­Ø¯ÙŠØ« ÙÙˆØ±ÙŠ
                    if (currentUser.role === 'Ù…ÙˆØ¸Ù') {
                        console.log(`ğŸ‘¤ Ù…Ø¹Ø§Ù„Ø¬Ø© ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…ÙˆØ¸Ù: ${currentUser.name}`);
                        
                        // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ± ÙÙˆØ±Ø§Ù‹
                        const attendanceResult = attendanceSystem.autoCheckIn(username);
                        console.log(`ğŸ“‹ Ù†ØªÙŠØ¬Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ±:`, attendanceResult);
                        
                        if (attendanceResult.success) {
                            // Ø¹Ø±Ø¶ Ù†Ø§ÙØ°Ø© ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¶ÙˆØ±
                            setTimeout(() => {
                                showAttendanceConfirmation(attendanceResult);
                            }, 800);
                            console.log(`âœ… ${currentUser.name}: ${attendanceResult.message}`);
                        } else if (attendanceResult.alreadyCheckedIn) {
                            console.log(`â„¹ï¸ ${currentUser.name}: ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø­Ø¶ÙˆØ±Ùƒ Ù…Ø³Ø¨Ù‚Ø§Ù‹ Ø§Ù„ÙŠÙˆÙ…`);
                        } else {
                            console.log(`â„¹ï¸ ${currentUser.name}: ${attendanceResult.message || 'Ù„Ù… ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ±'}`);
                        }
                        
                        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ÙÙˆØ±Ø§Ù‹ Ù…Ø¹ Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„
                        setTimeout(() => {
                            updateStats();
                            updateAttendanceStats();
                            connectionTracker.broadcastUpdate();
                            console.log(`ğŸ“Š ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù„Ù„Ù…ÙˆØ¸Ù: ${currentUser.name}`);
                        }, 200);
                        
                    } else {
                        // ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø¯ÙŠØ±
                        console.log(`ğŸ‘¨â€ğŸ’¼ ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø¯ÙŠØ±: ${currentUser.name}`);
                        setTimeout(() => {
                            updateStats();
                            updateAttendanceStats();
                            connectionTracker.broadcastUpdate();
                            
                            // Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ø­Ø§Ø¶Ø±ÙŠÙ† Ù„Ù„Ù…Ø¯ÙŠØ± ÙÙ‚Ø·
                            showPresentEmployeesForAdmin();
                            console.log(`ğŸ“Š ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù„Ù„Ù…Ø¯ÙŠØ±: ${currentUser.name}`);
                        }, 500);
                    }
                    
                    errorDiv.style.display = 'none';
                    
                    // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
                    document.getElementById('loginForm').reset();
                    
                } else {
                    // ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
                    console.warn(`âŒ Ù…Ø­Ø§ÙˆÙ„Ø© Ø¯Ø®ÙˆÙ„ ÙØ§Ø´Ù„Ø©`);
                    console.warn('âŒ Ø§Ù„Ø³Ø¨Ø¨:', !user ? 'Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯' : !user.isActive ? 'Ø­Ø³Ø§Ø¨ ØºÙŠØ± Ù…ÙØ¹Ù„' : 'ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø®Ø§Ø·Ø¦Ø©');
                    
                    let errorMessage = '';
                    
                    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø³Ø¨Ø¨ Ø§Ù„ÙØ´Ù„
                    if (!user) {
                        errorMessage = 'Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± ØµØ­ÙŠØ­';
                    } else if (!user.isActive) {
                        errorMessage = 'Ù‡Ø°Ø§ Ø§Ù„Ø­Ø³Ø§Ø¨ ØºÙŠØ± Ù…ÙØ¹Ù„ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©';
                    } else if (user.password !== password) {
                        errorMessage = 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©';
                    } else {
                        errorMessage = 'Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„';
                    }
                    
                    errorDiv.textContent = errorMessage;
                    errorDiv.style.display = 'block';
                    
                    // ØªØ£Ø«ÙŠØ± Ø§Ù‡ØªØ²Ø§Ø² Ù„Ù„Ø®Ø·Ø£
                    const loginCard = document.querySelector('.login-card');
                    if (loginCard) {
                        loginCard.style.animation = 'shake 0.5s ease-in-out';
                        setTimeout(() => {
                            loginCard.style.animation = '';
                        }, 500);
                    }
                    
                    // Ù…Ø³Ø­ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
                    document.getElementById('password').value = '';
                }
                
                // Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø²Ø±
                loginBtn.disabled = false;
                loginBtn.innerHTML = '<span style="margin-left: 8px;">ğŸš€</span> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„';
        }

        // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø­Ø³Ø¨ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª
        function updateUIForUser() {
            console.log(`ğŸ”§ ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${currentUser.name} (${currentUser.role})`);
            
            const menuItems = document.querySelectorAll('.menu-item');
            console.log(`ğŸ“‹ Ø¹Ø¯Ø¯ Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©: ${menuItems.length}`);
            console.log(`ğŸ”‘ ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:`, currentUser.permissions);
            
            menuItems.forEach(item => {
                const section = item.getAttribute('data-section');
                if (currentUser.permissions.includes(section)) {
                    item.style.display = 'flex';
                    console.log(`âœ… Ø¥Ø¸Ù‡Ø§Ø± Ù‚Ø³Ù…: ${section}`);
                } else {
                    item.style.display = 'none';
                    console.log(`âŒ Ø¥Ø®ÙØ§Ø¡ Ù‚Ø³Ù…: ${section}`);
                }
            });
            
            // Ø¥Ø®ÙØ§Ø¡/Ø¥Ø¸Ù‡Ø§Ø± Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù…Ø¯ÙŠØ±
            const addEmployeeBtn = document.getElementById('addEmployeeBtn');
            const exportBtn = document.getElementById('exportBtn');
            
            if (currentUser.role === 'Ù…Ø¯ÙŠØ±') {
                if (addEmployeeBtn) addEmployeeBtn.style.display = 'inline-flex';
                if (exportBtn) exportBtn.style.display = 'inline-flex';
                console.log('ğŸ‘¨â€ğŸ’¼ Ø¥Ø¸Ù‡Ø§Ø± Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù…Ø¯ÙŠØ±');
            } else {
                if (addEmployeeBtn) addEmployeeBtn.style.display = 'none';
                if (exportBtn) exportBtn.style.display = 'none';
                console.log('ğŸ‘¤ Ø¥Ø®ÙØ§Ø¡ Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù…Ø¯ÙŠØ± Ù„Ù„Ù…ÙˆØ¸Ù');
            }
            
            // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù„Ù„Ù…ÙˆØ¸ÙÙŠÙ†
            const mainContent = document.getElementById('mainContent');
            if (mainContent) {
                mainContent.style.display = 'block';
                console.log('ğŸ“± ØªÙ… Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ');
            }
            
            // Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø¥Ù„Ù‰ Ù‚Ø³Ù… Ø§Ù„Ø­Ø¶ÙˆØ±
            if (currentUser.role === 'Ù…ÙˆØ¸Ù') {
                setTimeout(() => {
                    const attendanceMenuItem = document.querySelector('.menu-item[data-section="attendance"]');
                    if (attendanceMenuItem) {
                        navigateToSection('attendance', attendanceMenuItem);
                        console.log('ğŸ¯ ØªÙ… Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù‚Ø³Ù… Ø§Ù„Ø­Ø¶ÙˆØ± Ù„Ù„Ù…ÙˆØ¸Ù');
                    }
                }, 500);
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            const userInfo = document.createElement('div');
            userInfo.innerHTML = `
                <div style="padding: 15px 25px; border-top: 1px solid var(--oud-gold); margin-top: 20px;">
                    <div style="color: var(--oud-gold); font-weight: 600; margin-bottom: 5px;">
                        ${currentUser.role === 'Ù…Ø¯ÙŠØ±' ? 'ğŸ‘¨â€ğŸ’¼' : 'ğŸ‘¤'} ${currentUser.name}
                    </div>
                    <div style="color: var(--oud-cream); font-size: 0.9rem; opacity: 0.8;">
                        ${currentUser.role} - ${currentUser.code}
                    </div>
                    <div style="color: var(--oud-gold); font-size: 0.8rem; margin-top: 5px;">
                        ğŸŸ¢ Ù…ØªØµÙ„ ÙˆÙ†Ø´Ø·
                    </div>
                    ${currentUser.role === 'Ù…Ø¯ÙŠØ±' ? `
                        <div style="color: var(--oud-amber); font-size: 0.8rem; margin-top: 3px;">
                            ğŸ”‘ ØµÙ„Ø§Ø­ÙŠØ§Øª ÙƒØ§Ù…Ù„Ø©
                        </div>
                    ` : ''}
                    <button onclick="logout()" style="
                        margin-top: 10px;
                        padding: 8px 15px;
                        background: var(--oud-bronze);
                        color: white;
                        border: none;
                        border-radius: 8px;
                        cursor: pointer;
                        font-family: 'Cairo', sans-serif;
                        font-size: 0.9rem;
                        transition: all 0.3s ease;
                    " onmouseover="this.style.background='var(--oud-brown)'" onmouseout="this.style.background='var(--oud-bronze)'">
                        ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
                    </button>
                </div>
            `;
            
            document.querySelector('.sidebar-menu').appendChild(userInfo);
        }

        // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø§Ù„Ù…Ø­Ø³Ù† ÙˆØ§Ù„Ø¯Ù‚ÙŠÙ‚ Ù…Ø¹ ØªØ£ÙƒÙŠØ¯ Ù…Ø±Ø¦ÙŠ
        function logout() {
            if (!currentUser) {
                console.warn('âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„');
                showNotification('Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„! ğŸš«', 'error');
                return;
            }
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø§ÙØ°Ø© ØªØ£ÙƒÙŠØ¯ Ù…Ø®ØµØµØ© Ù„Ù„Ø¬ÙˆØ§Ù„
            const confirmModal = document.createElement('div');
            confirmModal.className = 'modal active';
            confirmModal.style.zIndex = '5000';
            confirmModal.innerHTML = `
                <div class="modal-content" style="max-width: 400px; text-align: center;">
                    <div style="padding: 30px;">
                        <div style="font-size: 4rem; margin-bottom: 20px;">ğŸšª</div>
                        <h3 style="color: var(--oud-gold); margin-bottom: 15px;">ØªØ£ÙƒÙŠØ¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</h3>
                        <p style="color: var(--oud-cream); margin-bottom: 30px; line-height: 1.6;">
                            Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ<br>
                            <span style="color: var(--oud-bronze); font-size: 0.9rem;">Ø³ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø§Ù†ØµØ±Ø§Ù ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ù…Ø³Ø¬Ù„ Ø§Ù†ØµØ±Ø§Ù</span>
                        </p>
                        
                        <div style="display: flex; gap: 15px; justify-content: center;">
                            <button onclick="this.closest('.modal').remove()" class="oud-btn oud-btn-secondary" style="min-width: 120px;">
                                <span>âŒ</span> Ø¥Ù„ØºØ§Ø¡
                            </button>
                            <button onclick="confirmLogout(); this.closest('.modal').remove()" class="oud-btn" style="background: linear-gradient(135deg, #dc2626, #b91c1c); color: white; min-width: 120px;">
                                <span>âœ…</span> ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø®Ø±ÙˆØ¬
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(confirmModal);
            
            // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
            confirmModal.addEventListener('click', (e) => {
                if (e.target === confirmModal) {
                    confirmModal.remove();
                }
            });
        }
        
        // Ø¯Ø§Ù„Ø© ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø§Ù„ÙØ¹Ù„ÙŠØ© Ù…Ø¹ Ù†Ø¸Ø§Ù… Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
        function confirmLogout() {
            console.log(`ğŸšª Ø¨Ø¯Ø¡ Ø¹Ù…Ù„ÙŠØ© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${currentUser.name}`);
            
            // 1. ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø§Ù†ØµØ±Ø§Ù Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ù…ÙˆØ¸ÙÙŠÙ† ÙÙ‚Ø·
            if (currentUser.role === 'Ù…ÙˆØ¸Ù') {
                const userAttendance = attendanceSystem.getUserAttendance(currentUser.username);
                console.log(`ğŸ“‹ ÙØ­Øµ Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø¶ÙˆØ± Ù„Ù„Ù…ÙˆØ¸Ù ${currentUser.name}:`, userAttendance);
                
                if (userAttendance && userAttendance.checkIn && !userAttendance.checkOut) {
                    console.log(`â° ØªØ³Ø¬ÙŠÙ„ Ø§Ù†ØµØ±Ø§Ù ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ù…ÙˆØ¸Ù ${currentUser.name}`);
                    const result = attendanceSystem.checkOut(currentUser.username);
                    if (result.success) {
                        console.log(`âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø§Ù†ØµØ±Ø§Ù Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¨Ù†Ø¬Ø§Ø­ - Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„: ${result.data.workingHours}`);
                        showNotification(`ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø§Ù†ØµØ±Ø§Ù ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ - ${result.data.workingHours} Ø³Ø§Ø¹Ø© Ø¹Ù…Ù„ âœ…`, 'success');
                    } else {
                        console.error(`âŒ ÙØ´Ù„ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø§Ù†ØµØ±Ø§Ù Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ:`, result.message);
                    }
                } else if (userAttendance && userAttendance.checkOut) {
                    console.log(`â„¹ï¸ Ø§Ù„Ù…ÙˆØ¸Ù ${currentUser.name} Ù…Ø³Ø¬Ù„ Ø§Ù†ØµØ±Ø§Ù Ù…Ø³Ø¨Ù‚Ø§Ù‹`);
                } else {
                    console.log(`â„¹ï¸ Ø§Ù„Ù…ÙˆØ¸Ù ${currentUser.name} Ù„Ù… ÙŠØ³Ø¬Ù„ Ø­Ø¶ÙˆØ± Ø§Ù„ÙŠÙˆÙ…`);
                }
            }
            
            // 2. ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… - ØºÙŠØ± Ù…ØªØµÙ„ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù†Ø¸Ø§Ù… ØªØªØ¨Ø¹ Ø§Ù„Ø§ØªØµØ§Ù„
            connectionTracker.updateUserStatus(currentUser.username, false);
            console.log(`ğŸ”Œ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© ${currentUser.name} Ø¥Ù„Ù‰ ØºÙŠØ± Ù…ØªØµÙ„`);
            
            // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…ÙˆØ¸Ù ÙÙŠ Ù…Ù‚Ø³Ù… (Ù…Ø­Ø§ÙƒØ§Ø©)
            if (currentUser.maqsamAgentId) {
                console.log(`ğŸ“ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…ÙˆØ¸Ù ÙÙŠ Ù…Ù‚Ø³Ù…: ${currentUser.username}`);
            }
            
            // 3. Ø¨Ø« Ø§Ù„ØªØ­Ø¯ÙŠØ« ÙÙˆØ±Ø§Ù‹ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø§Øª
            connectionTracker.broadcastUpdate();
            
            // 3. Ø­ÙØ¸ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù‚Ø¨Ù„ Ø§Ù„Ù…Ø³Ø­
            const loggedOutUser = {
                name: currentUser.name,
                username: currentUser.username,
                role: currentUser.role,
                code: currentUser.code,
                logoutTime: new Date().toISOString()
            };
            
            // 4. Ù…Ø³Ø­ Ø§Ù„Ø¬Ù„Ø³Ø© Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ
            sessionManager.clearSession();
            console.log(`ğŸ—‘ï¸ ØªÙ… Ù…Ø³Ø­ Ø¬Ù„Ø³Ø© ${loggedOutUser.name}`);
            
            // 5. Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù…ØªØºÙŠØ± Ø§Ù„Ø¹Ø§Ù…
            currentUser = null;
            
            // 6. Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ ÙˆØ¥Ø¸Ù‡Ø§Ø± Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
            document.getElementById('mainContent').style.display = 'none';
            document.getElementById('loginContainer').classList.remove('hidden');
            
            // 7. Ù…Ø³Ø­ Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
            document.getElementById('loginForm').reset();
            document.getElementById('loginError').style.display = 'none';
            
            // 8. Ø¥Ø²Ø§Ù„Ø© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù† Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ
            const userInfoElements = document.querySelectorAll('.sidebar-menu > div');
            userInfoElements.forEach(element => {
                if (element.innerHTML.includes('Ù…ØªØµÙ„ ÙˆÙ†Ø´Ø·') || element.innerHTML.includes('ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬')) {
                    element.remove();
                }
            });
            
            // 9. Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ ÙˆØ§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
            closeSidebar();
            document.querySelectorAll('.modal.active').forEach(modal => {
                modal.classList.remove('active');
            });
            
            // 10. ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ÙÙˆØ±Ø§Ù‹ Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªØºÙŠÙŠØ±
            setTimeout(() => {
                updateStats();
                updateAttendanceStats();
                console.log(`ğŸ“Š ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø¨Ø¹Ø¯ Ø®Ø±ÙˆØ¬ ${loggedOutUser.name}`);
            }, 300);
            
            // 11. ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ ÙÙŠ Ø§Ù„ÙƒÙˆÙ†Ø³ÙˆÙ„ ÙÙ‚Ø·
            console.log(`âœ… Ø§ÙƒØªÙ…Ù„Øª Ø¹Ù…Ù„ÙŠØ© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${loggedOutUser.name} ÙÙŠ ${new Date().toLocaleString('ar-SA')}`);
            
            // 12. ØªØ³Ø¬ÙŠÙ„ ØªÙØµÙŠÙ„ÙŠ ÙÙŠ Ø§Ù„ÙƒÙˆÙ†Ø³ÙˆÙ„
            console.log('ğŸ“‹ Ù…Ù„Ø®Øµ Ø¹Ù…Ù„ÙŠØ© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬:');
            console.log(`   ğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${loggedOutUser.name} (${loggedOutUser.code})`);
            console.log(`   ğŸ• ÙˆÙ‚Øª Ø§Ù„Ø®Ø±ÙˆØ¬: ${new Date(loggedOutUser.logoutTime).toLocaleString('ar-SA')}`);
            console.log(`   ğŸ’¼ Ø§Ù„Ø¯ÙˆØ±: ${loggedOutUser.role}`);
            console.log(`   ğŸ”Œ Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„: ØºÙŠØ± Ù…ØªØµÙ„`);
            console.log(`   ğŸ“± ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†Ù‡Ø§ Ù„Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„`);
        }

        // ØªØ£Ø«ÙŠØ± Ø§Ù„Ø§Ù‡ØªØ²Ø§Ø² Ù„Ù„Ø®Ø·Ø£
        function addShakeAnimation() {
            const shakeKeyframes = `
                @keyframes shake {
                    0%, 100% { transform: translateX(0); }
                    10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
                    20%, 40%, 60%, 80% { transform: translateX(5px); }
                }
            `;
            
            const style = document.createElement('style');
            style.textContent = shakeKeyframes;
            document.head.appendChild(style);
        }

        // ÙØªØ­ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© Ù…Ø¹ ØªØ£Ø«ÙŠØ±Ø§Øª Ù…ØªØ­Ø±ÙƒØ©
        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            modal.classList.add('active');
            
            // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± ØµÙˆØªÙŠ Ø¨ØµØ±ÙŠ
            setTimeout(() => {
                const modalContent = modal.querySelector('.modal-content');
                modalContent.style.animation = 'modalBounce 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55)';
            }, 100);
        }

        // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© Ù…Ø¹ ØªØ£Ø«ÙŠØ±Ø§Øª Ù…ØªØ­Ø±ÙƒØ©
        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            const modalContent = modal.querySelector('.modal-content');
            
            // ØªØ£Ø«ÙŠØ± Ø§Ù„Ø¥ØºÙ„Ø§Ù‚
            modalContent.style.animation = 'modalSlideOut 0.3s ease-in-out';
            
            setTimeout(() => {
                modal.classList.remove('active');
                modalContent.style.animation = '';
            }, 300);
        }
        
        // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ù…Ø¹ ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù†ØªÙ‚Ø§Ù„ÙŠØ©
        function switchSection(sectionId) {
            // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø­Ø¯Ø¯
            setTimeout(() => {
                const targetSection = document.getElementById(sectionId);
                targetSection.classList.add('active');
                targetSection.classList.add('page-transition');
                
                // Ø¥Ø²Ø§Ù„Ø© ÙØ¦Ø© Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¨Ø¹Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø­Ø±ÙƒØ©
                setTimeout(() => {
                    targetSection.classList.remove('page-transition');
                }, 600);
            }, 100);
            
            // ØªØ­Ø¯ÙŠØ« Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØµÙØ­Ø©
            updatePageTitle(sectionId);
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØµÙØ­Ø©
        function updatePageTitle(sectionId) {
            const titles = {
                'dashboard-section': 'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©',
                'schedule-section': 'Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†',
                'employees-section': 'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†',
                'attendance-section': 'Ø³Ø¬Ù„ Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„Ø§Ù†ØµØ±Ø§Ù',
                'reports-section': 'Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª',
                'settings-section': 'Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…'
            };
            
            const pageTitle = document.getElementById('pageTitle');
            pageTitle.textContent = titles[sectionId] || 'Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„Ø§Ù†ØµØ±Ø§Ù';
            
            // ØªØ£Ø«ÙŠØ± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
            pageTitle.style.animation = 'titleUpdate 0.5s ease-in-out';
            setTimeout(() => {
                pageTitle.style.animation = '';
            }, 500);
        }

        // Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ¸Ù Ø¬Ø¯ÙŠØ¯
        function addEmployee(event) {
            event.preventDefault();
            
            const name = document.getElementById('employeeName').value;
            const employeeId = document.getElementById('employeeId').value;
            const department = document.getElementById('employeeDepartment').value;
            
            const newEmployee = {
                id: employeesData.length + 1,
                name: name,
                code: employeeId,
                department: department,
                schedule: Array(20).fill('OFF') // Ø¬Ø¯ÙˆÙ„Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
            };
            
            employeesData.push(newEmployee);
            displaySchedule();
            updateStats();
            closeModal('addEmployeeModal');
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
            document.getElementById('addEmployeeForm').reset();
            
            // Ø¥Ø´Ø¹Ø§Ø± Ù†Ø¬Ø§Ø­
            showNotification('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙˆØ¸Ù Ø¨Ù†Ø¬Ø§Ø­! âœ…', 'success');
        }

        // Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…ÙˆØ¸Ù
        function viewEmployeeDetails(employeeId) {
            const employee = employeesData.find(emp => emp.id === employeeId);
            if (!employee) return;

            const detailsContent = document.getElementById('employeeDetailsContent');
            
            // Ø­Ø³Ø§Ø¨ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…ÙˆØ¸Ù
            const workDays = employee.schedule.filter(shift => shift !== 'OFF' && shift !== 'Annual').length;
            const offDays = employee.schedule.filter(shift => shift === 'OFF').length;
            const vacationDays = employee.schedule.filter(shift => shift === 'Annual').length;
            
            detailsContent.innerHTML = `
                <div style="padding: 20px;">
                    <!-- Employee Header -->
                    <div style="display: flex; align-items: center; margin-bottom: 30px; padding: 20px; background: var(--glass-bg); border-radius: 15px; border: 1px solid var(--oud-gold);">
                        <div style="width: 80px; height: 80px; background: var(--gradient-primary); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2rem; margin-left: 20px;">
                            ğŸ‘¤
                        </div>
                        <div>
                            <h2 style="color: var(--oud-gold); margin: 0; font-size: 1.8rem;">${employee.name}</h2>
                            <p style="color: var(--oud-cream); margin: 5px 0; font-size: 1.1rem;">${employee.code}</p>
                            <p style="color: var(--oud-bronze); margin: 0; font-size: 1rem;">${employee.department}</p>
                        </div>
                    </div>

                    <!-- Employee Stats -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-bottom: 30px;">
                        <div class="stat-card" style="padding: 15px;">
                            <span class="stat-icon" style="font-size: 1.5rem;">ğŸ“…</span>
                            <div class="stat-number" style="font-size: 1.5rem;">${workDays}</div>
                            <div class="stat-label">Ø£ÙŠØ§Ù… Ø¹Ù…Ù„</div>
                        </div>
                        <div class="stat-card" style="padding: 15px;">
                            <span class="stat-icon" style="font-size: 1.5rem;">ğŸ’¤</span>
                            <div class="stat-number" style="font-size: 1.5rem;">${offDays}</div>
                            <div class="stat-label">Ø£ÙŠØ§Ù… Ø±Ø§Ø­Ø©</div>
                        </div>
                        <div class="stat-card" style="padding: 15px;">
                            <span class="stat-icon" style="font-size: 1.5rem;">ğŸ–ï¸</span>
                            <div class="stat-number" style="font-size: 1.5rem;">${vacationDays}</div>
                            <div class="stat-label">Ø£ÙŠØ§Ù… Ø¥Ø¬Ø§Ø²Ø©</div>
                        </div>
                        <div class="stat-card" style="padding: 15px;">
                            <span class="stat-icon" style="font-size: 1.5rem;">â­</span>
                            <div class="stat-number" style="font-size: 1.5rem;">95%</div>
                            <div class="stat-label">Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø£Ø¯Ø§Ø¡</div>
                        </div>
                    </div>

                    <!-- Employee Schedule Preview -->
                    <div style="background: var(--glass-bg); border-radius: 15px; padding: 20px; border: 1px solid var(--oud-bronze);">
                        <h3 style="color: var(--oud-gold); margin-bottom: 15px; display: flex; align-items: center;">
                            <span style="margin-left: 10px;">ğŸ“‹</span>
                            Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ù…ÙˆØ¸Ù - Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø­Ø§Ù„ÙŠ
                        </h3>
                        <div style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 10px;">
                            ${employee.schedule.slice(0, 7).map((shift, index) => {
                                const days = ['Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡', 'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡', 'Ø§Ù„Ø®Ù…ÙŠØ³', 'Ø§Ù„Ø¬Ù…Ø¹Ø©', 'Ø§Ù„Ø³Ø¨Øª', 'Ø§Ù„Ø£Ø­Ø¯', 'Ø§Ù„Ø§Ø«Ù†ÙŠÙ†'];
                                let shiftClass = 'shift-off';
                                let shiftText = 'ğŸ’¤ Ø±Ø§Ø­Ø©';
                                
                                if (shift === '4-10') {
                                    shiftClass = 'shift-4-10';
                                    shiftText = '4-10<br>ØµØ¨Ø§Ø­ÙŠ';
                                } else if (shift === '9-3') {
                                    shiftClass = 'shift-9-3';
                                    shiftText = '9-3<br>Ù†Ù‡Ø§Ø±ÙŠ';
                                } else if (shift === '9-6') {
                                    shiftClass = 'shift-9-6';
                                    shiftText = '9-6<br>Ø¹Ø§Ø¯ÙŠ';
                                } else if (shift === '11-8') {
                                    shiftClass = 'shift-11-8';
                                    shiftText = '11-8<br>Ù…Ø³Ø§Ø¦ÙŠ';
                                } else if (shift === '1-10') {
                                    shiftClass = 'shift-1-10';
                                    shiftText = '1-10<br>Ù„ÙŠÙ„ÙŠ';
                                } else if (shift === 'Annual') {
                                    shiftClass = 'shift-annual';
                                    shiftText = 'ğŸ–ï¸<br>Ø¥Ø¬Ø§Ø²Ø©';
                                }
                                
                                return `
                                    <div style="text-align: center; padding: 10px; border-radius: 8px;" class="${shiftClass}">
                                        <div style="font-size: 0.8rem; margin-bottom: 5px; opacity: 0.9;">${days[index]}</div>
                                        <div style="font-size: 0.9rem; font-weight: bold;">${shiftText}</div>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div style="display: flex; gap: 15px; justify-content: center; margin-top: 30px;">
                        <button class="oud-btn oud-btn-primary" onclick="editEmployeeSchedule(${employee.id})">
                            <span>ğŸ“</span> ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¬Ø¯ÙˆÙ„Ø©
                        </button>
                        <button class="oud-btn oud-btn-secondary" onclick="viewEmployeeReports(${employee.id})">
                            <span>ğŸ“Š</span> Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±
                        </button>
                        <button class="oud-btn oud-btn-primary" onclick="contactEmployee(${employee.id})">
                            <span>ğŸ“</span> Ø§Ù„ØªÙˆØ§ØµÙ„
                        </button>
                    </div>
                </div>
            `;
            
            openModal('employeeDetailsModal');
        }

        // ÙˆØ¸Ø§Ø¦Ù Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„Ù…ÙˆØ¸Ù
        function editEmployeeSchedule(employeeId) {
            showNotification('Ù…ÙŠØ²Ø© ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¬Ø¯ÙˆÙ„Ø© Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ± ğŸš§', 'info');
        }

        function viewEmployeeReports(employeeId) {
            showNotification('Ù…ÙŠØ²Ø© Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ± ğŸ“Š', 'info');
        }

        function contactEmployee(employeeId) {
            showNotification('Ù…ÙŠØ²Ø© Ø§Ù„ØªÙˆØ§ØµÙ„ Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ± ğŸ“', 'info');
        }

        // Ø¹Ø±Ø¶ Ù†Ø§ÙØ°Ø© ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¶ÙˆØ±
        function showAttendanceConfirmation(attendanceResult) {
            const modalContent = document.getElementById('attendanceModalContent');
            const now = new Date();
            const currentTime = now.toLocaleTimeString('ar-SA', { hour12: false });
            const currentDate = now.toLocaleDateString('ar-SA');
            
            modalContent.innerHTML = `
                <div style="padding: 30px; text-align: center;">
                    <div style="font-size: 4rem; margin-bottom: 20px;">
                        ${attendanceResult.isLate ? 'âš ï¸' : 'âœ…'}
                    </div>
                    <h3 style="color: var(--oud-gold); margin-bottom: 15px;">
                        ${attendanceResult.isLate ? 'ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ± - Ù…ØªØ£Ø®Ø±' : 'ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­'}
                    </h3>
                    
                    <div style="background: var(--glass-bg); border-radius: 15px; padding: 20px; margin: 20px 0; border: 1px solid var(--oud-gold);">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; text-align: right;">
                            <div>
                                <div style="color: var(--oud-cream); margin-bottom: 5px;">Ø§Ù„Ù…ÙˆØ¸Ù:</div>
                                <div style="color: var(--oud-gold); font-weight: bold;">${currentUser.name}</div>
                            </div>
                            <div>
                                <div style="color: var(--oud-cream); margin-bottom: 5px;">Ø§Ù„ÙƒÙˆØ¯:</div>
                                <div style="color: var(--oud-gold); font-weight: bold;">${currentUser.employeeId}</div>
                            </div>
                            <div>
                                <div style="color: var(--oud-cream); margin-bottom: 5px;">Ø§Ù„ØªØ§Ø±ÙŠØ®:</div>
                                <div style="color: var(--oud-gold); font-weight: bold;">${currentDate}</div>
                            </div>
                            <div>
                                <div style="color: var(--oud-cream); margin-bottom: 5px;">ÙˆÙ‚Øª Ø§Ù„Ø­Ø¶ÙˆØ±:</div>
                                <div style="color: var(--oud-gold); font-weight: bold;">${attendanceResult.data.checkIn}</div>
                            </div>
                        </div>
                    </div>
                    
                    ${attendanceResult.isLate ? `
                        <div style="background: rgba(245, 158, 11, 0.1); border: 1px solid #f59e0b; border-radius: 10px; padding: 15px; margin: 20px 0;">
                            <div style="color: #f59e0b; font-weight: bold; margin-bottom: 5px;">âš ï¸ ØªÙ†Ø¨ÙŠÙ‡ ØªØ£Ø®ÙŠØ±</div>
                            <div style="color: var(--oud-cream); font-size: 0.9rem;">
                                ÙˆÙ‚Øª Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø±Ø³Ù…ÙŠ: 09:00 ØµØ¨Ø§Ø­Ø§Ù‹<br>
                                ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… Ø¨Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©
                            </div>
                        </div>
                    ` : `
                        <div style="background: rgba(16, 185, 129, 0.1); border: 1px solid #10b981; border-radius: 10px; padding: 15px; margin: 20px 0;">
                            <div style="color: #10b981; font-weight: bold; margin-bottom: 5px;">âœ… Ø­Ø¶ÙˆØ± ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø­Ø¯Ø¯</div>
                            <div style="color: var(--oud-cream); font-size: 0.9rem;">
                                Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… Ø¨Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„
                            </div>
                        </div>
                    `}
                    
                    <button class="oud-btn oud-btn-primary" onclick="closeModal('attendanceModal')" style="margin-top: 20px;">
                        <span>ğŸ‘</span> Ù…ÙˆØ§ÙÙ‚
                    </button>
                </div>
            `;
            
            setTimeout(() => {
                openModal('attendanceModal');
            }, 500);
        }

        // ØªØ­Ø¯ÙŠØ« Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø­Ø¶ÙˆØ±
        function updateAttendanceStats() {
            const regularEmployeesCount = employeesData.filter(emp => {
                const username = Object.keys(users).find(u => users[u].name === emp.name);
                return username && users[username].role !== 'Ù…Ø¯ÙŠØ±';
            }).length;
            
            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø­Ø§Ø¶Ø±ÙŠÙ† ÙˆØ§Ù„Ù…ØªØ£Ø®Ø±ÙŠÙ† Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ¹Ù„ÙŠØ©
            let actualPresentCount = 0;
            let lateCount = 0;
            let workingCount = 0;
            
            const todayData = attendanceSystem.attendanceData[attendanceSystem.currentDate] || {};
            
            // ÙØ­Øµ ÙƒÙ„ Ù…ÙˆØ¸Ù (Ø¨Ø¯ÙˆÙ† Ø§Ù„Ù…Ø¯ÙŠØ±)
            employeesData.forEach(employee => {
                const username = Object.keys(users).find(u => users[u].name === employee.name);
                if (username && users[username].role !== 'Ù…Ø¯ÙŠØ±') {
                    const attendance = todayData[username];
                    const isLoggedIn = users[username].isOnline;
                    
                    // ØªØ­Ø¯ÙŠØ¯ Ø¥Ø°Ø§ ÙƒØ§Ù† ÙŠÙˆÙ… Ø¹Ù…Ù„
                    const dayIndex = employeeStatusSystem.getCurrentDayIndex();
                    const todayShift = employee.schedule[dayIndex];
                    const isWorkDay = todayShift !== 'OFF' && todayShift !== 'Annual';
                    
                    // Ø§Ù„Ù…ÙˆØ¸Ù Ø­Ø§Ø¶Ø± Ø¥Ø°Ø§ Ø³Ø¬Ù„ Ø­Ø¶ÙˆØ± Ø£Ùˆ Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ ÙÙŠ ÙŠÙˆÙ… Ø¹Ù…Ù„
                    const hasAttendance = attendance && attendance.checkIn;
                    if (hasAttendance || (isLoggedIn && isWorkDay)) {
                        actualPresentCount++;
                    }
                    
                    // ÙØ­Øµ Ø§Ù„ØªØ£Ø®ÙŠØ± ÙˆØ§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø­Ø§Ù„ÙŠ
                    if (attendance) {
                        if (attendance.isLate) lateCount++;
                        if (attendance.checkIn && !attendance.checkOut) workingCount++;
                    }
                }
            });
            
            document.getElementById('totalEmployeesCount').textContent = regularEmployeesCount;
            document.getElementById('presentCount').textContent = actualPresentCount;
            document.getElementById('lateCount').textContent = lateCount;
            document.getElementById('workingCount').textContent = workingCount;
            
            // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ
            updateUserAttendanceStatus();
            
            // ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ
            updateTodayAttendanceTable();
        }

        // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø­Ø¶ÙˆØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ
        function updateUserAttendanceStatus() {
            if (!currentUser) return;
            
            const userAttendance = attendanceSystem.getUserAttendance(currentUser.username);
            const statusContainer = document.getElementById('userAttendanceStatus');
            
            if (!userAttendance) {
                statusContainer.innerHTML = `
                    <div style="padding: 20px; text-align: center;">
                        <div style="color: var(--oud-cream); opacity: 0.7;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø¶ÙˆØ± Ù„Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ…</div>
                    </div>
                `;
                return;
            }
            
            const statusColor = userAttendance.status === 'Ø­Ø§Ø¶Ø±' ? '#10b981' : 
                               userAttendance.status === 'Ù…Ù†ØµØ±Ù' ? '#3b82f6' : '#6b7280';
            
            statusContainer.innerHTML = `
                <div style="padding: 20px;">
                    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
                        <h3 style="color: var(--oud-gold); margin: 0;">Ø­Ø§Ù„Ø© Ø­Ø¶ÙˆØ±Ùƒ Ø§Ù„ÙŠÙˆÙ…</h3>
                        <span style="background: ${statusColor}; color: white; padding: 8px 15px; border-radius: 20px; font-weight: bold;">
                            ${userAttendance.status}
                        </span>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                        <div style="background: var(--glass-bg); border-radius: 10px; padding: 15px; border: 1px solid var(--oud-bronze);">
                            <div style="color: var(--oud-cream); margin-bottom: 5px;">ÙˆÙ‚Øª Ø§Ù„Ø­Ø¶ÙˆØ±</div>
                            <div style="color: var(--oud-gold); font-weight: bold; font-size: 1.2rem;">
                                ${userAttendance.checkIn || 'Ù„Ù… ÙŠØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„'}
                                ${userAttendance.isLate ? ' <span style="color: #f59e0b;">âš ï¸</span>' : ''}
                            </div>
                        </div>
                        
                        <div style="background: var(--glass-bg); border-radius: 10px; padding: 15px; border: 1px solid var(--oud-bronze);">
                            <div style="color: var(--oud-cream); margin-bottom: 5px;">ÙˆÙ‚Øª Ø§Ù„Ø§Ù†ØµØ±Ø§Ù</div>
                            <div style="color: var(--oud-gold); font-weight: bold; font-size: 1.2rem;">
                                ${userAttendance.checkOut || 'Ù„Ù… ÙŠØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„'}
                                ${userAttendance.earlyLeave ? ' <span style="color: #f59e0b;">âš ï¸</span>' : ''}
                            </div>
                        </div>
                        
                        <div style="background: var(--glass-bg); border-radius: 10px; padding: 15px; border: 1px solid var(--oud-bronze);">
                            <div style="color: var(--oud-cream); margin-bottom: 5px;">Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„</div>
                            <div style="color: var(--oud-gold); font-weight: bold; font-size: 1.2rem;">
                                ${userAttendance.workingHours > 0 ? userAttendance.workingHours + ' Ø³Ø§Ø¹Ø©' : 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­Ø³Ø§Ø¨...'}
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª
            const checkInBtn = document.getElementById('checkInBtn');
            const checkOutBtn = document.getElementById('checkOutBtn');
            
            if (userAttendance.checkIn && !userAttendance.checkOut) {
                checkInBtn.style.display = 'none';
                checkOutBtn.style.display = 'inline-flex';
            } else if (userAttendance.checkOut) {
                checkInBtn.style.display = 'none';
                checkOutBtn.style.display = 'none';
            } else {
                checkInBtn.style.display = 'inline-flex';
                checkOutBtn.style.display = 'none';
            }
        }

        // ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ
        function updateTodayAttendanceTable() {
            const tbody = document.getElementById('todayAttendanceTableBody');
            if (!tbody) return;
            
            const todayData = attendanceSystem.attendanceData[attendanceSystem.currentDate] || {};
            
            tbody.innerHTML = '';
            
            // ÙÙ„ØªØ±Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ù„Ø§Ø³ØªØ¨Ø¹Ø§Ø¯ Ø§Ù„Ù…Ø¯ÙŠØ±
            const regularEmployees = employeesData.filter(employee => {
                const username = Object.keys(users).find(u => users[u].name === employee.name);
                return username && users[username].role !== 'Ù…Ø¯ÙŠØ±';
            });
            
            regularEmployees.forEach(employee => {
                const username = Object.keys(users).find(u => users[u].name === employee.name);
                const user = users[username];
                
                // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø¶ÙˆØ± Ø£Ùˆ Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
                let attendance = todayData[username];
                
                // Ø¥Ø°Ø§ Ù„Ù… ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø¶ÙˆØ±ØŒ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø­Ø§Ù„Ø© Ø­Ø³Ø¨ Ø§Ù„Ø§ØªØµØ§Ù„ ÙˆØ§Ù„Ø¬Ø¯ÙˆÙ„Ø©
                if (!attendance) {
                    const dayIndex = employeeStatusSystem.getCurrentDayIndex();
                    const todayShift = employee.schedule[dayIndex];
                    const isWorkDay = todayShift !== 'OFF' && todayShift !== 'Annual';
                    const isOnline = user && user.isOnline;
                    
                    // Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ØªØµÙ„ ÙÙŠ ÙŠÙˆÙ… Ø¹Ù…Ù„ØŒ Ø§Ø¹ØªØ¨Ø±Ù‡ Ø­Ø§Ø¶Ø±
                    if (isOnline && isWorkDay) {
                        attendance = {
                            checkIn: user.lastLogin ? new Date(user.lastLogin).toLocaleTimeString('ar-SA', { hour12: false }) : 'Ù…ØªØµÙ„ Ø§Ù„Ø¢Ù†',
                            checkOut: null,
                            status: 'Ø­Ø§Ø¶Ø±',
                            workingHours: 0,
                            isLate: false,
                            earlyLeave: false,
                            notes: ['Ù…ØªØµÙ„ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…']
                        };
                    } else {
                        attendance = {
                            checkIn: null,
                            checkOut: null,
                            status: isWorkDay ? 'ØºØ§Ø¦Ø¨' : (todayShift === 'Annual' ? 'Ø¥Ø¬Ø§Ø²Ø© Ø³Ù†ÙˆÙŠØ©' : 'Ø¥Ø¬Ø§Ø²Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©'),
                            workingHours: 0,
                            isLate: false,
                            earlyLeave: false,
                            notes: []
                        };
                    }
                }
                
                const row = document.createElement('tr');
                
                const statusColor = attendance.status === 'Ø­Ø§Ø¶Ø±' ? '#10b981' : 
                                   attendance.status === 'Ù…Ù†ØµØ±Ù' ? '#3b82f6' : 
                                   attendance.status === 'Ø¥Ø¬Ø§Ø²Ø© Ø³Ù†ÙˆÙŠØ©' ? '#f97316' :
                                   attendance.status === 'Ø¥Ø¬Ø§Ø²Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©' ? '#6b7280' : '#ef4444';
                
                row.innerHTML = `
                    <td style="font-weight: bold;">${user.name}</td>
                    <td>${attendance.checkIn || '-'} ${attendance.isLate ? '<span style="color: #f59e0b;">âš ï¸</span>' : ''}</td>
                    <td>${attendance.checkOut || '-'} ${attendance.earlyLeave ? '<span style="color: #f59e0b;">âš ï¸</span>' : ''}</td>
                    <td>${attendance.workingHours > 0 ? attendance.workingHours + ' Ø³Ø§Ø¹Ø©' : '-'}</td>
                    <td><span style="background: ${statusColor}; color: white; padding: 4px 8px; border-radius: 12px; font-size: 0.8rem;">${attendance.status}</span></td>
                    <td style="font-size: 0.8rem;">${attendance.notes && attendance.notes.length > 0 ? attendance.notes[attendance.notes.length - 1] : '-'}</td>
                `;
                
                tbody.appendChild(row);
            });
        }

        // ØªØ³Ø¬ÙŠÙ„ Ø­Ø¶ÙˆØ± ÙŠØ¯ÙˆÙŠ
        function manualCheckIn() {
            if (!currentUser) {
                showNotification('ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹', 'error');
                return;
            }
            
            const result = attendanceSystem.checkIn(currentUser.username);
            
            if (result.success) {
                console.log(`âœ… ${result.message}`);
                showAttendanceConfirmation(result);
                updateAttendanceStats();
            } else {
                console.log(`â„¹ï¸ ${result.message}`);
            }
        }

        // ÙØªØ­ Ù†Ø§ÙØ°Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø§Ù†ØµØ±Ø§Ù
        function openCheckOutModal() {
            if (!currentUser) {
                showNotification('ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹', 'error');
                return;
            }
            
            const userAttendance = attendanceSystem.getUserAttendance(currentUser.username);
            if (!userAttendance || !userAttendance.checkIn) {
                showNotification('ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ± Ø£ÙˆÙ„Ø§Ù‹', 'error');
                return;
            }
            
            if (userAttendance.checkOut) {
                showNotification('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø§Ù†ØµØ±Ø§Ù Ù…Ø³Ø¨Ù‚Ø§Ù‹ Ø§Ù„ÙŠÙˆÙ…', 'info');
                return;
            }
            
            openModal('checkOutModal');
        }

        // ØªØ£ÙƒÙŠØ¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø§Ù†ØµØ±Ø§Ù
        function confirmCheckOut() {
            const result = attendanceSystem.checkOut(currentUser.username);
            
            closeModal('checkOutModal');
            
            if (result.success) {
                console.log(`âœ… ${result.message}`);
                
                // Ø¹Ø±Ø¶ Ù…Ù„Ø®Øµ ÙŠÙˆÙ… Ø§Ù„Ø¹Ù…Ù„
                setTimeout(() => {
                    showWorkDaySummary(result);
                }, 500);
                
                updateAttendanceStats();
            } else {
                console.log(`âŒ ${result.message}`);
            }
        }

        // Ø¹Ø±Ø¶ Ù…Ù„Ø®Øµ ÙŠÙˆÙ… Ø§Ù„Ø¹Ù…Ù„
        function showWorkDaySummary(checkOutResult) {
            const modalContent = document.getElementById('attendanceModalContent');
            const userAttendance = checkOutResult.data;
            
            modalContent.innerHTML = `
                <div style="padding: 30px; text-align: center;">
                    <div style="font-size: 4rem; margin-bottom: 20px;">ğŸ¯</div>
                    <h3 style="color: var(--oud-gold); margin-bottom: 15px;">Ù…Ù„Ø®Øµ ÙŠÙˆÙ… Ø§Ù„Ø¹Ù…Ù„</h3>
                    
                    <div style="background: var(--glass-bg); border-radius: 15px; padding: 20px; margin: 20px 0; border: 1px solid var(--oud-gold);">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; text-align: right;">
                            <div>
                                <div style="color: var(--oud-cream); margin-bottom: 5px;">ÙˆÙ‚Øª Ø§Ù„Ø­Ø¶ÙˆØ±:</div>
                                <div style="color: var(--oud-gold); font-weight: bold;">${userAttendance.checkIn}</div>
                            </div>
                            <div>
                                <div style="color: var(--oud-cream); margin-bottom: 5px;">ÙˆÙ‚Øª Ø§Ù„Ø§Ù†ØµØ±Ø§Ù:</div>
                                <div style="color: var(--oud-gold); font-weight: bold;">${userAttendance.checkOut}</div>
                            </div>
                            <div style="grid-column: 1 / -1;">
                                <div style="color: var(--oud-cream); margin-bottom: 5px;">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„:</div>
                                <div style="color: var(--oud-gold); font-weight: bold; font-size: 1.5rem;">${userAttendance.workingHours} Ø³Ø§Ø¹Ø©</div>
                            </div>
                        </div>
                    </div>
                    
                    ${userAttendance.workingHours >= 8 ? `
                        <div style="background: rgba(16, 185, 129, 0.1); border: 1px solid #10b981; border-radius: 10px; padding: 15px; margin: 20px 0;">
                            <div style="color: #10b981; font-weight: bold; margin-bottom: 5px;">âœ… ÙŠÙˆÙ… Ø¹Ù…Ù„ Ù…ÙƒØªÙ…Ù„</div>
                            <div style="color: var(--oud-cream); font-size: 0.9rem;">
                                ØªÙ… Ø¥ÙƒÙ…Ø§Ù„ Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ø¨Ù†Ø¬Ø§Ø­
                            </div>
                        </div>
                    ` : `
                        <div style="background: rgba(245, 158, 11, 0.1); border: 1px solid #f59e0b; border-radius: 10px; padding: 15px; margin: 20px 0;">
                            <div style="color: #f59e0b; font-weight: bold; margin-bottom: 5px;">âš ï¸ Ø³Ø§Ø¹Ø§Øª Ø¹Ù…Ù„ Ù†Ø§Ù‚ØµØ©</div>
                            <div style="color: var(--oud-cream); font-size: 0.9rem;">
                                Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©: 8 Ø³Ø§Ø¹Ø§Øª ÙŠÙˆÙ…ÙŠØ§Ù‹
                            </div>
                        </div>
                    `}
                    
                    <div style="margin-top: 20px;">
                        <div style="color: var(--oud-cream); margin-bottom: 10px;">Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ Ø¹Ù„Ù‰ Ø¹Ù…Ù„Ùƒ Ø§Ù„ÙŠÙˆÙ…! ğŸ™</div>
                        <button class="oud-btn oud-btn-primary" onclick="closeModal('attendanceModal')">
                            <span>ğŸ‘</span> Ø¥Ù†Ù‡Ø§Ø¡
                        </button>
                    </div>
                </div>
            `;
            
            openModal('attendanceModal');
        }

        // Ù†Ø¸Ø§Ù… ØªØªØ¨Ø¹ Ø§Ù„ØªØ£Ø®ÙŠØ± Ø§Ù„Ù…ØªÙ‚Ø¯Ù… Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ¹Ù„ÙŠØ©
        const lateTrackingSystem = {
            // Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„ÙˆØ¸ÙŠÙÙŠØ© Ø§Ù„ÙØ¹Ù„ÙŠØ©
            employeeCodes: {
                'badr': '7177',
                'saad': '5472',
                'hussein': '9058',
                'ahmed': '12694',
                'yazeed': '10449',
                'noura': '15104'
            },
            
            // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ£Ø®ÙŠØ± Ø§Ù„Ø´Ù‡Ø±ÙŠØ© (ÙŠÙ†Ø§ÙŠØ± - ÙØ¨Ø±Ø§ÙŠØ± 2025)
            lateData: {
                '2025-01-20': { 'badr': { lateMinutes: 12.9 } },
                '2025-01-21': { 'ahmed': { lateMinutes: 35 } },
                '2025-01-22': { 'saad': { lateMinutes: 15.1 } },
                '2025-01-25': { 'saad': { lateMinutes: 10.6 } },
                '2025-01-29': { 'yazeed': { lateMinutes: 34.3 } },
                '2025-01-30': { 'yazeed': { lateMinutes: 1 } },
                '2025-01-31': { 'yazeed': { lateMinutes: 121.1 } },
                '2025-02-01': { 'noura': { lateMinutes: 2.9 } },
                '2025-02-02': { 'hussein': { lateMinutes: 16.6 } },
                '2025-02-03': { 'noura': { lateMinutes: 86.6 } },
                '2025-02-11': { 'saad': { lateMinutes: 40.3 } },
                '2025-02-16': { 'hussein': { lateMinutes: 10.6 } },
                '2025-02-17': { 'saad': { lateMinutes: 45.6 }, 'hussein': { lateMinutes: 13.3 } },
                '2025-02-18': { 'hussein': { lateMinutes: 12.4 }, 'ahmed': { lateMinutes: 53.5 } }
            },
            
            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªØ£Ø®ÙŠØ± Ø§Ù„Ø´Ù‡Ø±ÙŠ Ù„Ù„Ù…ÙˆØ¸Ù
            getMonthlyLateTotal(username) {
                let total = 0;
                Object.values(this.lateData).forEach(dayData => {
                    if (dayData[username]) {
                        total += dayData[username].lateMinutes;
                    }
                });
                return total;
            },
            
            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªØ£Ø®ÙŠØ± Ù„Ù„Ù…ÙˆØ¸Ù
            getEmployeeLateDetails(username) {
                const details = {};
                Object.keys(this.lateData).forEach(date => {
                    const dayData = this.lateData[date];
                    if (dayData[username]) {
                        details[date] = dayData[username];
                    }
                });
                return details;
            },
            
            // ØªÙˆÙ„ÙŠØ¯ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ø¥Ø¶Ø§ÙÙŠØ©
            generateSampleData() {
                // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…ÙˆØ¬ÙˆØ¯Ø© Ø¨Ø§Ù„ÙØ¹Ù„ ÙÙŠ lateData
                console.log('ğŸ“Š Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ£Ø®ÙŠØ± Ø§Ù„ÙØ¹Ù„ÙŠØ© Ù…Ø­Ù…Ù„Ø©');
            }
        };

        // Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„Ø§Ù†ØµØ±Ø§Ù Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
        const attendanceSystem = {
            // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© ÙÙŠ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ
            attendanceData: JSON.parse(localStorage.getItem('oudAttendanceData') || '{}'),
            currentDate: new Date().toISOString().split('T')[0],
            
            // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù…
            init() {
                this.checkNewDay();
                this.loadTodayData();
                console.log('ğŸ¯ Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ø¶ÙˆØ± Ø¬Ø§Ù‡Ø²:', this.currentDate);
            },
            
            // ÙØ­Øµ Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø¬Ø¯ÙŠØ¯ ÙˆØªØµÙÙŠØ± Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª
            checkNewDay() {
                const today = new Date().toISOString().split('T')[0];
                if (this.currentDate !== today) {
                    console.log('ğŸŒ… ÙŠÙˆÙ… Ø¬Ø¯ÙŠØ¯! ØªØµÙÙŠØ± Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª...');
                    this.currentDate = today;
                    
                    // Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„ÙŠÙˆÙ… Ø§Ù„Ø¬Ø¯ÙŠØ¯
                    if (!this.attendanceData[today]) {
                        this.attendanceData[today] = {};
                    }
                    
                    this.saveData();
                    this.loadTodayData();
                }
            },
            
            // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø­Ø§Ù„ÙŠ
            loadTodayData() {
                if (!this.attendanceData[this.currentDate]) {
                    this.attendanceData[this.currentDate] = {};
                }
            },
            
            // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ
            saveData() {
                try {
                    localStorage.setItem('oudAttendanceData', JSON.stringify(this.attendanceData));
                    console.log('ğŸ’¾ ØªÙ… Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø¶ÙˆØ±');
                } catch (error) {
                    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
                }
            },
            
            // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø§Ù„Ø°ÙƒÙŠ
            autoCheckIn(username) {
                const now = new Date();
                const timeString = now.toLocaleTimeString('ar-SA', { hour12: false });
                const todayData = this.attendanceData[this.currentDate];
                
                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ ØªØ³Ø¬ÙŠÙ„ Ù…Ø³Ø¨Ù‚
                if (todayData[username] && todayData[username].checkIn) {
                    return {
                        success: false,
                        message: 'ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ± Ù…Ø³Ø¨Ù‚Ø§Ù‹ Ø§Ù„ÙŠÙˆÙ…',
                        alreadyCheckedIn: true,
                        data: todayData[username]
                    };
                }
                
                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¬Ø¯ÙˆÙ„Ø© - Ù‡Ù„ Ø§Ù„Ù…ÙˆØ¸Ù Ù…Ø¬Ø¯ÙˆÙ„ Ù„Ù„Ø¹Ù…Ù„ Ø§Ù„ÙŠÙˆÙ…ØŸ
                const employee = employeesData.find(emp => {
                    const empUsername = Object.keys(users).find(u => users[u].name === emp.name);
                    return empUsername === username;
                });
                
                if (employee) {
                    const dayIndex = employeeStatusSystem.getCurrentDayIndex();
                    const todayShift = employee.schedule[dayIndex];
                    
                    // Ø¥Ø°Ø§ ÙƒØ§Ù† ÙÙŠ Ø¥Ø¬Ø§Ø²Ø© Ø£Ùˆ Ø±Ø§Ø­Ø©ØŒ Ù„Ø§ ÙŠØ³Ø¬Ù„ Ø­Ø¶ÙˆØ±
                    if (todayShift === 'Annual' || todayShift === 'OFF') {
                        return {
                            success: false,
                            message: todayShift === 'Annual' ? 'Ø£Ù†Øª ÙÙŠ Ø¥Ø¬Ø§Ø²Ø© Ø§Ù„ÙŠÙˆÙ… ğŸ–ï¸' : 'Ø§Ù„ÙŠÙˆÙ… Ø¥Ø¬Ø§Ø²Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ© Ù„Ùƒ ğŸ’¤',
                            isOffDay: true
                        };
                    }
                }
                
                // ØªØ­Ø¯ÙŠØ¯ Ø­Ø§Ù„Ø© Ø§Ù„ØªØ£Ø®ÙŠØ± (Ø¨Ø¹Ø¯ 9:15 ØµØ¨Ø§Ø­Ø§Ù‹)
                const isLate = now.getHours() > 9 || (now.getHours() === 9 && now.getMinutes() > 15);
                
                // Ø­Ø³Ø§Ø¨ Ø¯Ù‚Ø§Ø¦Ù‚ Ø§Ù„ØªØ£Ø®ÙŠØ± Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø©
                let lateMinutes = 0;
                if (isLate) {
                    const workStartTime = new Date(now);
                    workStartTime.setHours(9, 15, 0, 0); // 9:15 ØµØ¨Ø§Ø­Ø§Ù‹
                    lateMinutes = Math.max(0, (now - workStartTime) / (1000 * 60));
                }
                
                // Ø¥Ù†Ø´Ø§Ø¡ Ø³Ø¬Ù„ Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
                const attendanceRecord = {
                    checkIn: timeString,
                    checkOut: null,
                    status: 'Ø­Ø§Ø¶Ø±',
                    isLate: isLate,
                    lateMinutes: lateMinutes,
                    earlyLeave: false,
                    workingHours: 0,
                    notes: [isLate ? `ØªØ£Ø®ÙŠØ± ${lateMinutes.toFixed(1)} Ø¯Ù‚ÙŠÙ‚Ø©` : 'Ø­Ø¶ÙˆØ± ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø­Ø¯Ø¯'],
                    loginTime: now.toISOString(),
                    scheduledShift: employee ? employee.schedule[employeeStatusSystem.getCurrentDayIndex()] : 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'
                };
                
                // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                todayData[username] = attendanceRecord;
                this.saveData();
                
                console.log(`âœ… ØªØ³Ø¬ÙŠÙ„ Ø­Ø¶ÙˆØ± Ø°ÙƒÙŠ: ${username} ÙÙŠ ${timeString} ${isLate ? `(Ù…ØªØ£Ø®Ø± ${lateMinutes.toFixed(1)} Ø¯Ù‚ÙŠÙ‚Ø©)` : ''}`);
                
                return {
                    success: true,
                    message: isLate ? `ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ± - Ù…ØªØ£Ø®Ø± ${lateMinutes.toFixed(1)} Ø¯Ù‚ÙŠÙ‚Ø© âš ï¸` : 'ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­ âœ…',
                    isLate: isLate,
                    lateMinutes: lateMinutes,
                    data: attendanceRecord
                };
            },
            
            // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„ÙŠØ¯ÙˆÙŠ
            checkIn(username) {
                return this.autoCheckIn(username);
            },
            
            // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø§Ù†ØµØ±Ø§Ù
            checkOut(username) {
                const now = new Date();
                const timeString = now.toLocaleTimeString('ar-SA', { hour12: false });
                const todayData = this.attendanceData[this.currentDate];
                
                if (!todayData[username] || !todayData[username].checkIn) {
                    return {
                        success: false,
                        message: 'ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ± Ø£ÙˆÙ„Ø§Ù‹'
                    };
                }
                
                if (todayData[username].checkOut) {
                    return {
                        success: false,
                        message: 'ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø§Ù†ØµØ±Ø§Ù Ù…Ø³Ø¨Ù‚Ø§Ù‹'
                    };
                }
                
                // Ø­Ø³Ø§Ø¨ Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„
                const checkInTime = new Date(`${this.currentDate}T${todayData[username].checkIn}`);
                const checkOutTime = now;
                const workingHours = Math.round((checkOutTime - checkInTime) / (1000 * 60 * 60) * 10) / 10;
                
                // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø§Ù†ØµØ±Ø§Ù Ø§Ù„Ù…Ø¨ÙƒØ± (Ù‚Ø¨Ù„ 6:00 Ù…Ø³Ø§Ø¡Ù‹)
                const earlyLeave = now.getHours() < 18;
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³Ø¬Ù„
                todayData[username].checkOut = timeString;
                todayData[username].status = 'Ù…Ù†ØµØ±Ù';
                todayData[username].workingHours = workingHours;
                todayData[username].earlyLeave = earlyLeave;
                
                if (earlyLeave) {
                    todayData[username].notes.push('Ø§Ù†ØµØ±Ø§Ù Ù…Ø¨ÙƒØ±');
                }
                
                this.saveData();
                
                console.log(`ğŸ  ØªØ³Ø¬ÙŠÙ„ Ø§Ù†ØµØ±Ø§Ù: ${username} ÙÙŠ ${timeString} - ${workingHours} Ø³Ø§Ø¹Ø©`);
                
                return {
                    success: true,
                    message: earlyLeave ? 'ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø§Ù†ØµØ±Ø§Ù - Ù…Ø¨ÙƒØ± âš ï¸' : 'ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø§Ù†ØµØ±Ø§Ù Ø¨Ù†Ø¬Ø§Ø­ âœ…',
                    earlyLeave: earlyLeave,
                    data: todayData[username]
                };
            },
            
            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            getUserAttendance(username) {
                const todayData = this.attendanceData[this.currentDate];
                return todayData ? todayData[username] : null;
            },
            
            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ©
            getDailyStats() {
                const todayData = this.attendanceData[this.currentDate] || {};
                const totalUsers = Object.keys(users).length;
                
                let present = 0;
                let late = 0;
                let working = 0;
                
                Object.values(todayData).forEach(record => {
                    if (record.checkIn) {
                        present++;
                        if (record.isLate) late++;
                        if (record.checkIn && !record.checkOut) working++;
                    }
                });
                
                return {
                    total: totalUsers,
                    present: present,
                    absent: totalUsers - present,
                    late: late,
                    working: working
                };
            },
            
            // Ù…Ø³Ø­ Ø¨ÙŠØ§Ù†Ø§Øª Ù‚Ø¯ÙŠÙ…Ø© (Ø§Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ø¢Ø®Ø± 30 ÙŠÙˆÙ…)
            cleanOldData() {
                const thirtyDaysAgo = new Date();
                thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);
                const cutoffDate = thirtyDaysAgo.toISOString().split('T')[0];
                
                Object.keys(this.attendanceData).forEach(date => {
                    if (date < cutoffDate) {
                        delete this.attendanceData[date];
                    }
                });
                
                this.saveData();
                console.log('ğŸ§¹ ØªÙ… ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©');
            }
        };

        // Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? '#10b981' : type === 'error' ? '#ef4444' : type === 'warning' ? '#f59e0b' : '#3b82f6'};
                color: white;
                padding: 15px 20px;
                border-radius: 10px;
                font-family: 'Cairo', sans-serif;
                font-weight: 600;
                z-index: 10000;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
                animation: slideInRight 0.3s ease-out;
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.3s ease-in';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // Ù†Ø¸Ø§Ù… ØªØµØ¯ÙŠØ± Excel Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
        const excelExportSystem = {
            // Ø­Ø³Ø§Ø¨ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ØªØ£Ø®ÙŠØ± ÙˆØ§Ù„ØºÙŠØ§Ø¨ Ø§Ù„Ø´Ù‡Ø±ÙŠØ©
            calculateMonthlyLateStats() {
                const monthlyStats = {};
                
                // ØªØ¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª ÙƒÙ„ Ù…ÙˆØ¸Ù (Ø¨Ø§Ø³ØªØ«Ù†Ø§Ø¡ Ø§Ù„Ù…Ø¯ÙŠØ±)
                employeesData.forEach(employee => {
                    const username = Object.keys(users).find(u => users[u].name === employee.name && users[u].role !== 'Ù…Ø¯ÙŠØ±');
                    if (!username) return;
                    
                    monthlyStats[username] = {
                        name: employee.name,
                        code: lateTrackingSystem.employeeCodes[username] || employee.code,
                        department: employee.department,
                        salary: employee.salary,
                        totalLateMinutes: 0,
                        lateDays: 0,
                        absentDays: 0,
                        lateDeduction: 0,
                        absentDeduction: 0,
                        totalDeduction: 0,
                        netSalary: 0,
                        lateDetails: [],
                        absentDetails: []
                    };
                });
                
                // Ø­Ø³Ø§Ø¨ Ø§Ù„ØªØ£Ø®ÙŠØ±Ø§Øª Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ¹Ù„ÙŠØ©
                Object.keys(lateTrackingSystem.lateData).forEach(date => {
                    const dayData = lateTrackingSystem.lateData[date];
                    Object.keys(dayData).forEach(username => {
                        if (monthlyStats[username]) {
                            const lateMinutes = dayData[username].lateMinutes;
                            monthlyStats[username].totalLateMinutes += lateMinutes;
                            monthlyStats[username].lateDays++;
                            monthlyStats[username].lateDetails.push({
                                date: date,
                                minutes: lateMinutes
                            });
                        }
                    });
                });
                
                // Ø­Ø³Ø§Ø¨ Ø§Ù„ØºÙŠØ§Ø¨Ø§Øª Ù…Ù† Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ø¹Ù…Ù„
                const currentDayIndex = employeeStatusSystem.getCurrentDayIndex();
                employeesData.forEach(employee => {
                    const username = Object.keys(users).find(u => users[u].name === employee.name && users[u].role !== 'Ù…Ø¯ÙŠØ±');
                    if (!username || !monthlyStats[username]) return;
                    
                    // ÙØ­Øµ Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ù…Ø¬Ø¯ÙˆÙ„Ø© Ù„Ù„Ø¹Ù…Ù„
                    for (let i = 0; i < Math.min(currentDayIndex + 1, 30); i++) {
                        const shift = employee.schedule[i];
                        if (shift !== 'OFF' && shift !== 'Annual') {
                            // ÙŠÙˆÙ… Ø¹Ù…Ù„ Ù…Ø¬Ø¯ÙˆÙ„
                            const dateObj = new Date('2025-08-01');
                            dateObj.setDate(dateObj.getDate() + i);
                            const dateStr = dateObj.toISOString().split('T')[0];
                            
                            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ø¶ÙˆØ±
                            const attendanceData = attendanceSystem.attendanceData[dateStr];
                            const hasAttendance = attendanceData && attendanceData[username] && attendanceData[username].checkIn;
                            const hasLateRecord = lateTrackingSystem.lateData[dateStr] && lateTrackingSystem.lateData[dateStr][username];
                            
                            if (!hasAttendance && !hasLateRecord) {
                                // ØºØ§Ø¦Ø¨
                                monthlyStats[username].absentDays++;
                                monthlyStats[username].absentDetails.push({
                                    date: dateStr,
                                    shift: shift
                                });
                            }
                        }
                    }
                });
                
                // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©
                Object.keys(monthlyStats).forEach(username => {
                    const stats = monthlyStats[username];
                    
                    // Ø®ØµÙ… Ø§Ù„ØªØ£Ø®ÙŠØ±: 10 Ø±ÙŠØ§Ù„ Ù„ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø©
                    stats.lateDeduction = Math.round(stats.totalLateMinutes * 10);
                    
                    // Ø®ØµÙ… Ø§Ù„ØºÙŠØ§Ø¨: 200 Ø±ÙŠØ§Ù„ Ù„ÙƒÙ„ ÙŠÙˆÙ… ØºÙŠØ§Ø¨
                    stats.absentDeduction = stats.absentDays * 200;
                    
                    // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª
                    stats.totalDeduction = stats.lateDeduction + stats.absentDeduction;
                    
                    // ØµØ§ÙÙŠ Ø§Ù„Ø±Ø§ØªØ¨
                    stats.netSalary = stats.salary - stats.totalDeduction;
                });
                
                return monthlyStats;
            },
            
            // ØªØµØ¯ÙŠØ± ØªÙ‚Ø±ÙŠØ± Excel Ø´Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„ØªØ£Ø®ÙŠØ±Ø§Øª ÙˆØ§Ù„ØºÙŠØ§Ø¨Ø§Øª
            exportDetailedExcel() {
                const monthlyStats = this.calculateMonthlyLateStats();
                const currentDate = new Date().toLocaleDateString('ar-SA');
                
                // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø­ØªÙˆÙ‰ CSV Ù…ØªÙ‚Ø¯Ù…
                let csvContent = '\uFEFF'; // BOM for UTF-8
                
                // Ù…Ù„Ø®Øµ Ø§Ù„Ø´Ø±ÙƒØ©
                csvContent += `ØªÙ‚Ø±ÙŠØ± Ø§Ù„ØªØ£Ø®ÙŠØ±Ø§Øª ÙˆØ§Ù„ØºÙŠØ§Ø¨Ø§Øª Ø§Ù„Ø´Ø§Ù…Ù„ - Ù†Ø®Ø¨Ø© Ø§Ù„Ø¹ÙˆØ¯\n`;
                csvContent += `ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙ‚Ø±ÙŠØ±: ${currentDate}\n`;
                csvContent += `Ø¹Ø¯Ø¯ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†: ${Object.keys(monthlyStats).length}\n\n`;
                
                // Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ø¹Ø§Ù…
                csvContent += `Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ø¹Ø§Ù…\n`;
                csvContent += `Ø§Ù„Ù…ÙˆØ¸Ù,Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ,Ø§Ù„Ù‚Ø³Ù…,Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ,Ø£ÙŠØ§Ù… Ø§Ù„ØªØ£Ø®ÙŠØ±,Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¯Ù‚Ø§Ø¦Ù‚ Ø§Ù„ØªØ£Ø®ÙŠØ±,Ø®ØµÙ… Ø§Ù„ØªØ£Ø®ÙŠØ±,Ø£ÙŠØ§Ù… Ø§Ù„ØºÙŠØ§Ø¨,Ø®ØµÙ… Ø§Ù„ØºÙŠØ§Ø¨,Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª,ØµØ§ÙÙŠ Ø§Ù„Ø±Ø§ØªØ¨\n`;
                
                Object.values(monthlyStats).forEach(stats => {
                    csvContent += `${stats.name},${stats.code},${stats.department},${stats.salary},${stats.lateDays},${Math.round(stats.totalLateMinutes)},${stats.lateDeduction},${stats.absentDays},${stats.absentDeduction},${stats.totalDeduction},${stats.netSalary}\n`;
                });
                
                csvContent += `\n\n`;
                
                // ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªØ£Ø®ÙŠØ±Ø§Øª Ù„ÙƒÙ„ Ù…ÙˆØ¸Ù
                Object.values(monthlyStats).forEach(stats => {
                    if (stats.lateDetails.length > 0) {
                        csvContent += `ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªØ£Ø®ÙŠØ±Ø§Øª - ${stats.name} (${stats.code})\n`;
                        csvContent += `Ø§Ù„ØªØ§Ø±ÙŠØ®,Ø¯Ù‚Ø§Ø¦Ù‚ Ø§Ù„ØªØ£Ø®ÙŠØ±,Ø®ØµÙ… Ø§Ù„ØªØ£Ø®ÙŠØ± (Ø±ÙŠØ§Ù„)\n`;
                        
                        stats.lateDetails.forEach(detail => {
                            const deduction = Math.round(detail.minutes * 10);
                            csvContent += `${detail.date},${detail.minutes},${deduction}\n`;
                        });
                        
                        csvContent += `Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¯Ù‚Ø§Ø¦Ù‚ Ø§Ù„ØªØ£Ø®ÙŠØ±: ${Math.round(stats.totalLateMinutes)}\n`;
                        csvContent += `Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø®ØµÙ… Ø§Ù„ØªØ£Ø®ÙŠØ±: ${stats.lateDeduction} Ø±ÙŠØ§Ù„\n\n`;
                    }
                });
                
                // ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØºÙŠØ§Ø¨Ø§Øª Ù„ÙƒÙ„ Ù…ÙˆØ¸Ù
                Object.values(monthlyStats).forEach(stats => {
                    if (stats.absentDetails.length > 0) {
                        csvContent += `ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØºÙŠØ§Ø¨Ø§Øª - ${stats.name} (${stats.code})\n`;
                        csvContent += `Ø§Ù„ØªØ§Ø±ÙŠØ®,Ø§Ù„ÙˆØ±Ø¯ÙŠØ© Ø§Ù„Ù…Ø¬Ø¯ÙˆÙ„Ø©,Ø®ØµÙ… Ø§Ù„ØºÙŠØ§Ø¨ (Ø±ÙŠØ§Ù„)\n`;
                        
                        stats.absentDetails.forEach(detail => {
                            csvContent += `${detail.date},${detail.shift},200\n`;
                        });
                        
                        csvContent += `Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø£ÙŠØ§Ù… Ø§Ù„ØºÙŠØ§Ø¨: ${stats.absentDays}\n`;
                        csvContent += `Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø®ØµÙ… Ø§Ù„ØºÙŠØ§Ø¨: ${stats.absentDeduction} Ø±ÙŠØ§Ù„\n\n`;
                    }
                });
                
                // Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©
                const totalSalaries = Object.values(monthlyStats).reduce((sum, stats) => sum + stats.salary, 0);
                const totalLateDeductions = Object.values(monthlyStats).reduce((sum, stats) => sum + stats.lateDeduction, 0);
                const totalAbsentDeductions = Object.values(monthlyStats).reduce((sum, stats) => sum + stats.absentDeduction, 0);
                const totalDeductions = Object.values(monthlyStats).reduce((sum, stats) => sum + stats.totalDeduction, 0);
                const netSalaries = Object.values(monthlyStats).reduce((sum, stats) => sum + stats.netSalary, 0);
                
                csvContent += `Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©\n`;
                csvContent += `Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø±ÙˆØ§ØªØ¨ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©: ${totalSalaries} Ø±ÙŠØ§Ù„\n`;
                csvContent += `Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø®ØµÙˆÙ…Ø§Øª Ø§Ù„ØªØ£Ø®ÙŠØ±: ${totalLateDeductions} Ø±ÙŠØ§Ù„\n`;
                csvContent += `Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø®ØµÙˆÙ…Ø§Øª Ø§Ù„ØºÙŠØ§Ø¨: ${totalAbsentDeductions} Ø±ÙŠØ§Ù„\n`;
                csvContent += `Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª: ${totalDeductions} Ø±ÙŠØ§Ù„\n`;
                csvContent += `ØµØ§ÙÙŠ Ø§Ù„Ø±ÙˆØ§ØªØ¨: ${netSalaries} Ø±ÙŠØ§Ù„\n`;
                csvContent += `Ù†Ø³Ø¨Ø© Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª: ${((totalDeductions / totalSalaries) * 100).toFixed(2)}%\n`;
                
                // ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù…Ù„Ù
                const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
                const link = document.createElement('a');
                const url = URL.createObjectURL(blob);
                link.setAttribute('href', url);
                link.setAttribute('download', `ØªÙ‚Ø±ÙŠØ±_Ø§Ù„ØªØ£Ø®ÙŠØ±Ø§Øª_ÙˆØ§Ù„ØºÙŠØ§Ø¨Ø§Øª_${new Date().toISOString().split('T')[0]}.csv`);
                link.style.visibility = 'hidden';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                return monthlyStats;
            },
            
            // ØªØµØ¯ÙŠØ± ØªÙ‚Ø±ÙŠØ± Ù…Ø¨Ø³Ø·
            exportSimpleSchedule() {
                let csvContent = '\uFEFF';
                csvContent += "Ø§Ù„Ø§Ø³Ù…,Ø§Ù„ÙƒÙˆØ¯,Ø§Ù„Ù‚Ø³Ù…,";
                
                // Ø¥Ø¶Ø§ÙØ© Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„ØªÙˆØ§Ø±ÙŠØ® Ù„Ø´Ù‡Ø± Ø£ØºØ³Ø·Ø³ 2025
                for (let i = 1; i <= 30; i++) {
                    csvContent += `8/${i}/2025,`;
                }
                csvContent += "\n";
                
                // Ø¥Ø¶Ø§ÙØ© Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø£ÙŠØ§Ù…
                csvContent += ",,,";
                const days = ['Ø§Ù„Ø¬Ù…Ø¹Ø©', 'Ø§Ù„Ø³Ø¨Øª', 'Ø§Ù„Ø£Ø­Ø¯', 'Ø§Ù„Ø§Ø«Ù†ÙŠÙ†', 'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡', 'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡', 'Ø§Ù„Ø®Ù…ÙŠØ³', 'Ø§Ù„Ø¬Ù…Ø¹Ø©', 'Ø§Ù„Ø³Ø¨Øª', 'Ø§Ù„Ø£Ø­Ø¯', 'Ø§Ù„Ø§Ø«Ù†ÙŠÙ†', 'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡', 'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡', 'Ø§Ù„Ø®Ù…ÙŠØ³', 'Ø§Ù„Ø¬Ù…Ø¹Ø©', 'Ø§Ù„Ø³Ø¨Øª', 'Ø§Ù„Ø£Ø­Ø¯', 'Ø§Ù„Ø§Ø«Ù†ÙŠÙ†', 'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡', 'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡', 'Ø§Ù„Ø®Ù…ÙŠØ³', 'Ø§Ù„Ø¬Ù…Ø¹Ø©', 'Ø§Ù„Ø³Ø¨Øª', 'Ø§Ù„Ø£Ø­Ø¯', 'Ø§Ù„Ø§Ø«Ù†ÙŠÙ†', 'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡', 'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡', 'Ø§Ù„Ø®Ù…ÙŠØ³', 'Ø§Ù„Ø¬Ù…Ø¹Ø©', 'Ø§Ù„Ø³Ø¨Øª'];
                days.forEach(day => {
                    csvContent += `${day},`;
                });
                csvContent += "\n";
                
                // Ø¥Ø¶Ø§ÙØ© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†
                employeesData.forEach(emp => {
                    csvContent += `${emp.name},${emp.code},${emp.department},`;
                    emp.schedule.forEach(shift => {
                        csvContent += `${shift},`;
                    });
                    csvContent += "\n";
                });
                
                const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
                const link = document.createElement('a');
                const url = URL.createObjectURL(blob);
                link.setAttribute('href', url);
                link.setAttribute('download', `Ø¬Ø¯ÙˆÙ„Ø©_Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†_Ø£ØºØ³Ø·Ø³_2025.csv`);
                link.style.visibility = 'hidden';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }
        };
        
        // Ø¯Ø§Ù„Ø© ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ø¯Ø«Ø© ÙˆØ§Ù„Ù…Ø­Ø³Ù†Ø©
        function exportData() {
            console.log('ğŸ”„ Ù…Ø­Ø§ÙˆÙ„Ø© ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...');
            console.log('ğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ:', currentUser);
            
            if (!currentUser) {
                showNotification('ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹! ğŸ”', 'error');
                return;
            }
            
            if (currentUser.role !== 'Ù…Ø¯ÙŠØ±') {
                showNotification('Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙŠØ²Ø© Ù…ØªØ§Ø­Ø© Ù„Ù„Ù…Ø¯ÙŠØ± ÙÙ‚Ø·! ğŸš«', 'error');
                return;
            }
            
            console.log('âœ… ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª - Ø¹Ø±Ø¶ Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØµØ¯ÙŠØ±');
            
            // Ø¹Ø±Ø¶ Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„ØªØµØ¯ÙŠØ±
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.style.zIndex = '3000';
            modal.innerHTML = `
                <div class="modal-content" style="max-width: 600px;">
                    <div class="modal-header">
                        <h3 class="modal-title">ğŸ“Š ØªØµØ¯ÙŠØ± Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</h3>
                        <button class="close-btn" onclick="this.closest('.modal').remove()">&times;</button>
                    </div>
                    <div style="padding: 30px;">
                        <div style="display: grid; gap: 20px;">
                            <button class="oud-btn oud-btn-primary" onclick="exportDetailedReport(); this.closest('.modal').remove();" style="padding: 20px; font-size: 1.1rem;">
                                <span style="font-size: 1.5rem; margin-left: 10px;">ğŸ“ˆ</span>
                                <div>
                                    <div style="font-weight: bold;">ØªÙ‚Ø±ÙŠØ± Ø´Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª</div>
                                    <div style="font-size: 0.9rem; opacity: 0.8;">ÙŠØ´Ù…Ù„ Ø§Ù„ØªØ£Ø®ÙŠØ± ÙˆØ§Ù„Ø®ØµÙˆÙ…Ø§Øª ÙˆØ§Ù„Ø±ÙˆØ§ØªØ¨</div>
                                </div>
                            </button>
                            
                            <button class="oud-btn oud-btn-secondary" onclick="exportSimpleReport(); this.closest('.modal').remove();" style="padding: 20px; font-size: 1.1rem;">
                                <span style="font-size: 1.5rem; margin-left: 10px;">ğŸ“…</span>
                                <div>
                                    <div style="font-weight: bold;">Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</div>
                                    <div style="font-size: 0.9rem; opacity: 0.8;">Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ø¹Ù…Ù„ ÙÙ‚Ø·</div>
                                </div>
                            </button>
                            
                            <button class="oud-btn oud-btn-primary" onclick="exportLateReport(); this.closest('.modal').remove();" style="padding: 20px; font-size: 1.1rem;">
                                <span style="font-size: 1.5rem; margin-left: 10px;">â°</span>
                                <div>
                                    <div style="font-weight: bold;">ØªÙ‚Ø±ÙŠØ± Ø§Ù„ØªØ£Ø®ÙŠØ±Ø§Øª</div>
                                    <div style="font-size: 0.9rem; opacity: 0.8;">ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªØ£Ø®ÙŠØ± Ù„Ù„Ù…ÙˆØ¸ÙÙŠÙ†</div>
                                </div>
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Ø¥Ø¶Ø§ÙØ© Ø­Ø¯Ø« Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.remove();
                }
            });
            
            console.log('ğŸ“Š Ø¹Ø±Ø¶ Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„ØªØµØ¯ÙŠØ±');
        }
        
        function exportDetailedReport() {
            console.log('ğŸ“Š ØªØµØ¯ÙŠØ± Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø´Ø§Ù…Ù„...');
            try {
                const stats = excelExportSystem.exportDetailedExcel();
                
                // ØªØ³Ø¬ÙŠÙ„ Ù†Ø¬Ø§Ø­ Ø§Ù„ØªØµØ¯ÙŠØ±
                console.log('ğŸ“Š ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø´Ø§Ù…Ù„ Ø¨Ù†Ø¬Ø§Ø­!');
                
                // Ø¹Ø±Ø¶ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ÙÙŠ Ø§Ù„ÙƒÙˆÙ†Ø³ÙˆÙ„
                setTimeout(() => {
                    const totalDeductions = Object.values(stats).reduce((sum, s) => sum + s.lateDeduction, 0);
                    console.log(`ğŸ’° Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø®ØµÙˆÙ…Ø§Øª Ø§Ù„ØªØ£Ø®ÙŠØ±: ${totalDeductions} Ø±ÙŠØ§Ù„`);
                }, 2000);
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„ØªÙ‚Ø±ÙŠØ±:', error);
            }
        }
        
        function exportSimpleReport() {
            console.log('ğŸ“… ØªØµØ¯ÙŠØ± Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†...');
            try {
                excelExportSystem.exportSimpleSchedule();
                console.log('ğŸ“… ØªÙ… ØªØµØ¯ÙŠØ± Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø¨Ù†Ø¬Ø§Ø­!');
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„Ø¬Ø¯ÙˆÙ„Ø©:', error);
            }
        }
        
        // ØªØµØ¯ÙŠØ± Ø¬Ø¯ÙˆÙ„ Ø§Ù„ØªØ£Ø®ÙŠØ±Ø§Øª Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚ Ù„Ù„Ù…Ø·Ù„ÙˆØ¨
        function exportLateTrackingReport() {
            if (!currentUser || currentUser.role !== 'Ù…Ø¯ÙŠØ±') {
                showNotification('Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙŠØ²Ø© Ù…ØªØ§Ø­Ø© Ù„Ù„Ù…Ø¯ÙŠØ± ÙÙ‚Ø·! ğŸš«', 'error');
                return;
            }
            
            let csvContent = '\uFEFF'; // BOM for UTF-8
            
            // Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙ‚Ø±ÙŠØ±
            csvContent += 'Ø¬Ø¯ÙˆÙ„ ØªØªØ¨Ø¹ Ø§Ù„ØªØ£Ø®ÙŠØ±Ø§Øª - Ù†Ø®Ø¨Ø© Ø§Ù„Ø¹ÙˆØ¯\n';
            csvContent += `ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙ‚Ø±ÙŠØ±: ${new Date().toLocaleDateString('ar-SA')}\n\n`;
            
            // Ø±Ø£Ø³ Ø§Ù„Ø¬Ø¯ÙˆÙ„
            csvContent += 'Ø§Ù„Ø§Ø³Ù…,Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ,';
            
            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªÙˆØ§Ø±ÙŠØ® (ÙŠÙ†Ø§ÙŠØ± - ÙØ¨Ø±Ø§ÙŠØ± 2025)
            const dates = [
                '1/20/2025', '1/21/2025', '1/22/2025', '1/23/2025', '1/24/2025', '1/25/2025', '1/26/2025',
                '1/27/2025', '1/28/2025', '1/29/2025', '1/30/2025', '1/31/2025',
                '2/1/2025', '2/2/2025', '2/3/2025', '2/4/2025', '2/5/2025', '2/6/2025', '2/7/2025',
                '2/8/2025', '2/9/2025', '2/10/2025', '2/11/2025', '2/12/2025', '2/13/2025', '2/14/2025',
                '2/15/2025', '2/16/2025', '2/17/2025', '2/18/2025', '2/19/2025'
            ];
            
            const days = [
                'Ø§Ù„Ø§Ø«Ù†ÙŠÙ†', 'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡', 'Ø§Ù„Ø§Ø±Ø¨Ø¹Ø§Ø¡', 'Ø§Ù„Ø®Ù…ÙŠØ³', 'Ø§Ù„Ø¬Ù…Ø¹Ø©', 'Ø§Ù„Ø³Ø¨Øª', 'Ø§Ù„Ø§Ø­Ø¯',
                'Ø§Ù„Ø§Ø«Ù†ÙŠÙ†', 'Ø§Ù„Ø«Ù„Ø§Øª', 'Ø§Ù„Ø§Ø±Ø¨Ø¹Ø§Ø¡', 'Ø§Ù„Ø®Ù…ÙŠØ³', 'Ø§Ù„Ø¬Ù…Ø¹Ø©',
                'Ø§Ù„Ø³Ø¨Øª', 'Ø§Ù„Ø§Ø­Ø¯', 'Ø§Ù„Ø§Ø«Ù†ÙŠÙ†', 'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡', 'Ø§Ù„Ø§Ø±Ø¨Ø¹Ø§Ø¡', 'Ø§Ù„Ø®Ù…ÙŠØ³', 'Ø§Ù„Ø¬Ù…Ø¹Ø©',
                'Ø§Ù„Ø³Ø¨Øª', 'Ø§Ù„Ø§Ø­Ø¯', 'Ø§Ù„Ø§Ø«Ù†ÙŠÙ†', 'Ø§Ù„Ø«Ù„Ø§Øª', 'Ø§Ù„Ø§Ø±Ø¨Ø¹Ø§Ø¡', 'Ø§Ù„Ø®Ù…ÙŠØ³', 'Ø§Ù„Ø¬Ù…Ø¹Ø©',
                'Ø§Ù„Ø³Ø¨Øª', 'Ø§Ù„Ø§Ø­Ø¯', 'Ø§Ù„Ø§Ø«Ù†ÙŠÙ†', 'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡', 'Ø§Ù„Ø§Ø±Ø¨Ø¹Ø§Ø¡'
            ];
            
            dates.forEach((date, index) => {
                csvContent += `${date} ${days[index]},`;
            });
            csvContent += 'Ø§Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªØ£Ø®ÙŠØ±Ø§Øª Ø¨Ø§Ù„Ø¯Ù‚Ø§Ø¦Ù‚\n';
            
            // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†
            const employeeData = [
                { username: 'badr.nasser', name: 'Ø¨Ø¯Ø± Ù†Ø§ØµØ±', code: '7177', data: [
                    '', '12.9', '', '', 'OFF', 'OFF', '', '', '', '', '', 'OFF',
                    'OFF', '', '', 'OFF', 'OFF', 'OFF', '', '', '', '', '', 'OFF',
                    'OFF', '', '', '', '', '', 'OFF'
                ]},
                { username: 'saad.sanbal', name: 'Ø³Ø¹Ø¯ Ø³Ù†Ø¨Ù„', code: '5472', data: [
                    '', '', '15.1', 'OFF', 'OFF', '10.6', '', '', '', '', 'OFF', 'OFF',
                    '', 'OFF', 'OFF', '', '', '', 'OFF', 'OFF', '', '', '40.3', '',
                    '', 'OFF', 'OFF', '', '45.6', '', ''
                ]},
                { username: 'hussein.harbi', name: 'Ø­Ø³ÙŠÙ† Ø§Ù„Ø­Ø±Ø¨ÙŠ', code: '9058', data: [
                    '', '', '', '', '', '', '', 'OFF', 'OFF', '', '', '',
                    '', '16.6', 'OFF', 'OFF', '', '', 'OFF', 'OFF', 'OFF', 'OFF', '', '',
                    '', 'OFF', 'OFF', '10.6', '13.3', '12.4', ''
                ]},
                { username: 'ahmed.anzi', name: 'Ø§Ø­Ù…Ø¯ Ø§Ù„Ø¹Ù†Ø²ÙŠ', code: '12694', data: [
                    '', '35', '', '', 'OFF', 'OFF', '', '', '', '', '', 'OFF',
                    'OFF', 'OFF', 'OFF', '', 'OFF', 'OFF', '', '', 'OFF', 'OFF', '', 'OFF',
                    'OFF', '', '', 'OFF', 'OFF', '53.5', 'OFF'
                ]},
                { username: 'yazeed.naimi', name: 'ÙŠØ²ÙŠØ¯ Ø§Ù„Ù†Ø¹ÙŠÙ…ÙŠ', code: '10449', data: [
                    '', '', '', '', '', '', 'OFF', '', '', '34.3', '1', '121.1',
                    'OFF', '', '', '', 'OFF', '', '', '', '', '', 'OFF', 'OFF',
                    '', '', '', '', '', 'OFF', 'OFF'
                ]},
                { username: 'noura.faisal', name: 'Ù†ÙˆØ±Ø© ÙÙŠØµÙ„', code: '15104', data: [
                    '', '', 'OFF', 'OFF', '', '', '', '', '', 'OFF', 'OFF', 'OFF',
                    '2.9', '', '86.6', '', '', 'OFF', 'OFF', '', '', '', '', '',
                    'OFF', 'OFF', '', '', '', '', 'OFF'
                ]}
            ];
            
            employeeData.forEach(emp => {
                csvContent += `${emp.name},${emp.code},`;
                emp.data.forEach(value => {
                    csvContent += `${value || ''},`;
                });
                
                // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ
                const total = lateTrackingSystem.getMonthlyLateTotal(emp.username);
                csvContent += `${total}\n`;
            });
            
            // ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù…Ù„Ù
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', `Ø¬Ø¯ÙˆÙ„_ØªØªØ¨Ø¹_Ø§Ù„ØªØ£Ø®ÙŠØ±Ø§Øª_${new Date().toISOString().split('T')[0]}.csv`);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            console.log('â° ØªÙ… ØªØµØ¯ÙŠØ± Ø¬Ø¯ÙˆÙ„ Ø§Ù„ØªØ£Ø®ÙŠØ±Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!');
        }

        // Ù†Ø¸Ø§Ù… ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„ØªØ£Ø®ÙŠØ± Ø§Ù„Ø°ÙƒÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
        const lateReportingSystem = {
            // Ø­Ø³Ø§Ø¨ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ØªØ£Ø®ÙŠØ± Ù…Ù† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„ÙØ¹Ù„ÙŠØ©
            calculateLateStats() {
                let totalLateMinutes = 0;
                let employeesWithLate = 0;
                let lateIncidents = 0;
                const employeeLateData = {};
                
                // ÙØ­Øµ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø¶ÙˆØ± Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£ÙŠØ§Ù…
                Object.keys(attendanceSystem.attendanceData).forEach(date => {
                    const dayData = attendanceSystem.attendanceData[date];
                    
                    Object.keys(dayData).forEach(username => {
                        const attendance = dayData[username];
                        if (attendance.isLate && attendance.checkIn) {
                            // Ø­Ø³Ø§Ø¨ Ø¯Ù‚Ø§Ø¦Ù‚ Ø§Ù„ØªØ£Ø®ÙŠØ±
                            const checkInTime = new Date(`${date}T${attendance.checkIn}`);
                            const workStartTime = new Date(`${date}T09:15:00`); // 9:15 Ù‡Ùˆ Ø§Ù„Ø­Ø¯ Ø§Ù„Ù…Ø³Ù…ÙˆØ­
                            const lateMinutes = Math.max(0, (checkInTime - workStartTime) / (1000 * 60));
                            
                            if (!employeeLateData[username]) {
                                employeeLateData[username] = {
                                    totalMinutes: 0,
                                    incidents: 0,
                                    lastLateDate: null,
                                    details: []
                                };
                            }
                            
                            employeeLateData[username].totalMinutes += lateMinutes;
                            employeeLateData[username].incidents++;
                            employeeLateData[username].lastLateDate = date;
                            employeeLateData[username].details.push({
                                date: date,
                                minutes: lateMinutes,
                                checkIn: attendance.checkIn
                            });
                            
                            totalLateMinutes += lateMinutes;
                            lateIncidents++;
                        }
                    });
                });
                
                employeesWithLate = Object.keys(employeeLateData).length;
                const avgLatePerEmployee = employeesWithLate > 0 ? 
                    (totalLateMinutes / employeesWithLate).toFixed(1) : 0;
                
                return {
                    totalLateMinutes: totalLateMinutes.toFixed(1),
                    employeesWithLate,
                    lateIncidents,
                    avgLatePerEmployee,
                    employeeLateData
                };
            },
            
            // ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙˆÙ„ ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„ØªØ£Ø®ÙŠØ±
            updateLateReportTable() {
                const tbody = document.getElementById('lateReportTableBody');
                if (!tbody) return;
                
                tbody.innerHTML = '';
                const lateStats = this.calculateLateStats();
                
                // ÙÙ„ØªØ±Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ù„Ø§Ø³ØªØ¨Ø¹Ø§Ø¯ Ø§Ù„Ù…Ø¯ÙŠØ±
                const regularEmployees = employeesData.filter(employee => {
                    const username = Object.keys(users).find(u => users[u].name === employee.name);
                    return username && users[username].role !== 'Ù…Ø¯ÙŠØ±';
                });
                
                regularEmployees.forEach(employee => {
                    const username = Object.keys(users).find(u => users[u].name === employee.name);
                    const lateData = lateStats.employeeLateData[username] || {
                        totalMinutes: 0,
                        incidents: 0,
                        lastLateDate: null
                    };
                    
                    const row = document.createElement('tr');
                    
                    // ØªÙ„ÙˆÙŠÙ† Ø§Ù„ØµÙ Ø­Ø³Ø¨ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ£Ø®ÙŠØ±
                    let rowStyle = '';
                    if (lateData.totalMinutes > 60) {
                        rowStyle = 'background: rgba(239, 68, 68, 0.1);'; // Ø£Ø­Ù…Ø± Ù„Ù„ØªØ£Ø®ÙŠØ± Ø§Ù„ÙƒØ¨ÙŠØ±
                    } else if (lateData.totalMinutes > 30) {
                        rowStyle = 'background: rgba(245, 158, 11, 0.1);'; // Ø£ØµÙØ± Ù„Ù„ØªØ£Ø®ÙŠØ± Ø§Ù„Ù…ØªÙˆØ³Ø·
                    } else if (lateData.totalMinutes > 0) {
                        rowStyle = 'background: rgba(59, 130, 246, 0.1);'; // Ø£Ø²Ø±Ù‚ Ù„Ù„ØªØ£Ø®ÙŠØ± Ø§Ù„Ù‚Ù„ÙŠÙ„
                    } else {
                        rowStyle = 'background: rgba(16, 185, 129, 0.1);'; // Ø£Ø®Ø¶Ø± Ù„Ø¹Ø¯Ù… Ø§Ù„ØªØ£Ø®ÙŠØ±
                    }
                    
                    row.style.cssText = rowStyle;
                    
                    const statusColor = lateData.totalMinutes > 30 ? '#ef4444' : 
                                       lateData.totalMinutes > 0 ? '#f59e0b' : '#10b981';
                    const statusText = lateData.totalMinutes > 30 ? 'ÙŠØ­ØªØ§Ø¬ Ù…ØªØ§Ø¨Ø¹Ø©' : 
                                      lateData.totalMinutes > 0 ? 'Ù…Ù‚Ø¨ÙˆÙ„' : 'Ù…Ù…ØªØ§Ø²';
                    
                    row.innerHTML = `
                        <td style="font-weight: bold;">${employee.name}</td>
                        <td>${employee.code}</td>
                        <td style="font-weight: bold; color: ${lateData.totalMinutes > 0 ? '#ef4444' : '#10b981'};">
                            ${lateData.totalMinutes.toFixed(1)} Ø¯Ù‚ÙŠÙ‚Ø©
                        </td>
                        <td>${lateData.incidents}</td>
                        <td>${lateData.lastLateDate ? new Date(lateData.lastLateDate).toLocaleDateString('ar-SA') : '-'}</td>
                        <td>
                            <span style="background: ${statusColor}; color: white; padding: 4px 8px; border-radius: 12px; font-size: 0.8rem;">
                                ${statusText}
                            </span>
                        </td>
                    `;
                    
                    tbody.appendChild(row);
                });
            }
        };
        
        // ØªØ­Ø¯ÙŠØ« ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„ØªØ£Ø®ÙŠØ±
        function updateLateReports() {
            const lateStats = lateReportingSystem.calculateLateStats();
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
            document.getElementById('totalLateMinutes').textContent = lateStats.totalLateMinutes;
            document.getElementById('employeesWithLate').textContent = lateStats.employeesWithLate;
            document.getElementById('avgLatePerEmployee').textContent = lateStats.avgLatePerEmployee;
            document.getElementById('lateIncidentsCount').textContent = lateStats.lateIncidents;
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¬Ø¯ÙˆÙ„
            lateReportingSystem.updateLateReportTable();
            
            console.log('â° ØªÙ… ØªØ­Ø¯ÙŠØ« ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„ØªØ£Ø®ÙŠØ±!');
        }
        
        // ØªØµØ¯ÙŠØ± ØªÙ‚Ø±ÙŠØ± Ø§Ù„ØªØ£Ø®ÙŠØ±
        function exportLateReport() {
            if (!currentUser || currentUser.role !== 'Ù…Ø¯ÙŠØ±') {
                showNotification('Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙŠØ²Ø© Ù…ØªØ§Ø­Ø© Ù„Ù„Ù…Ø¯ÙŠØ± ÙÙ‚Ø·! ğŸš«', 'error');
                return;
            }
            
            const lateStats = lateReportingSystem.calculateLateStats();
            let csvContent = '\uFEFF'; // BOM for UTF-8
            
            // Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙ‚Ø±ÙŠØ±
            csvContent += 'ØªÙ‚Ø±ÙŠØ± Ø§Ù„ØªØ£Ø®ÙŠØ±Ø§Øª - Ù†Ø®Ø¨Ø© Ø§Ù„Ø¹ÙˆØ¯\n';
            csvContent += `ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙ‚Ø±ÙŠØ±: ${new Date().toLocaleDateString('ar-SA')}\n\n`;
            
            // Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ø¹Ø§Ù…
            csvContent += 'Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ø¹Ø§Ù…\n';
            csvContent += `Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¯Ù‚Ø§Ø¦Ù‚ Ø§Ù„ØªØ£Ø®ÙŠØ±: ${lateStats.totalLateMinutes}\n`;
            csvContent += `Ø¹Ø¯Ø¯ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ù…ØªØ£Ø®Ø±ÙŠÙ†: ${lateStats.employeesWithLate}\n`;
            csvContent += `Ø¹Ø¯Ø¯ Ø­Ø§Ù„Ø§Øª Ø§Ù„ØªØ£Ø®ÙŠØ±: ${lateStats.lateIncidents}\n`;
            csvContent += `Ù…ØªÙˆØ³Ø· Ø§Ù„ØªØ£Ø®ÙŠØ± Ù„ÙƒÙ„ Ù…ÙˆØ¸Ù: ${lateStats.avgLatePerEmployee} Ø¯Ù‚ÙŠÙ‚Ø©\n\n`;
            
            // ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†
            csvContent += 'Ø§Ù„Ù…ÙˆØ¸Ù,Ø§Ù„ÙƒÙˆØ¯,Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¯Ù‚Ø§Ø¦Ù‚ Ø§Ù„ØªØ£Ø®ÙŠØ±,Ø¹Ø¯Ø¯ Ù…Ø±Ø§Øª Ø§Ù„ØªØ£Ø®ÙŠØ±,Ø¢Ø®Ø± ØªØ£Ø®ÙŠØ±,Ø§Ù„Ø­Ø§Ù„Ø©\n';
            
            const regularEmployees = employeesData.filter(employee => {
                const username = Object.keys(users).find(u => users[u].name === employee.name);
                return username && users[username].role !== 'Ù…Ø¯ÙŠØ±';
            });
            
            regularEmployees.forEach(employee => {
                const username = Object.keys(users).find(u => users[u].name === employee.name);
                const lateData = lateStats.employeeLateData[username] || {
                    totalMinutes: 0,
                    incidents: 0,
                    lastLateDate: null
                };
                
                const statusText = lateData.totalMinutes > 30 ? 'ÙŠØ­ØªØ§Ø¬ Ù…ØªØ§Ø¨Ø¹Ø©' : 
                                  lateData.totalMinutes > 0 ? 'Ù…Ù‚Ø¨ÙˆÙ„' : 'Ù…Ù…ØªØ§Ø²';
                
                csvContent += `${employee.name},${employee.code},${lateData.totalMinutes.toFixed(1)},${lateData.incidents},${lateData.lastLateDate || '-'},${statusText}\n`;
            });
            
            // ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù…Ù„Ù
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', `ØªÙ‚Ø±ÙŠØ±_Ø§Ù„ØªØ£Ø®ÙŠØ±Ø§Øª_${new Date().toISOString().split('T')[0]}.csv`);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            console.log('ğŸ“Š ØªÙ… ØªØµØ¯ÙŠØ± ØªÙ‚Ø±ÙŠØ± Ø§Ù„ØªØ£Ø®ÙŠØ± Ø¨Ù†Ø¬Ø§Ø­!');
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙˆÙ„ ØªØªØ¨Ø¹ Ø§Ù„ØªØ£Ø®ÙŠØ±Ø§Øª
        function updateLateTrackingTable() {
            const tbody = document.getElementById('lateTrackingTableBody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            employeesData.forEach(emp => {
                const totalLateMinutes = lateTrackingSystem.getMonthlyLateTotal(emp.username);
                const lateDetails = lateTrackingSystem.getEmployeeLateDetails(emp.username);
                const lateDays = Object.keys(lateDetails).filter(date => lateDetails[date].lateMinutes > 0).length;
                const deduction = Math.round(totalLateMinutes * 10);
                const netSalary = emp.salary - deduction;
                const code = lateTrackingSystem.employeeCodes[emp.username] || emp.code;
                
                const row = document.createElement('tr');
                
                // ØªÙ„ÙˆÙŠÙ† Ø§Ù„ØµÙ Ø­Ø³Ø¨ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ£Ø®ÙŠØ±
                let rowColor = '';
                if (totalLateMinutes > 100) {
                    rowColor = 'background: rgba(239, 68, 68, 0.1);'; // Ø£Ø­Ù…Ø± Ù„Ù„ØªØ£Ø®ÙŠØ± Ø§Ù„ÙƒØ¨ÙŠØ±
                } else if (totalLateMinutes > 50) {
                    rowColor = 'background: rgba(245, 158, 11, 0.1);'; // Ø£ØµÙØ± Ù„Ù„ØªØ£Ø®ÙŠØ± Ø§Ù„Ù…ØªÙˆØ³Ø·
                } else if (totalLateMinutes > 0) {
                    rowColor = 'background: rgba(59, 130, 246, 0.1);'; // Ø£Ø²Ø±Ù‚ Ù„Ù„ØªØ£Ø®ÙŠØ± Ø§Ù„Ù‚Ù„ÙŠÙ„
                } else {
                    rowColor = 'background: rgba(16, 185, 129, 0.1);'; // Ø£Ø®Ø¶Ø± Ù„Ø¹Ø¯Ù… Ø§Ù„ØªØ£Ø®ÙŠØ±
                }
                
                row.style.cssText = rowColor;
                
                row.innerHTML = `
                    <td style="font-weight: bold;">${emp.name}</td>
                    <td style="font-weight: bold; color: var(--oud-gold);">${code}</td>
                    <td style="font-weight: bold; color: ${totalLateMinutes > 0 ? '#ef4444' : '#10b981'};">
                        ${totalLateMinutes.toFixed(1)}
                    </td>
                    <td>${lateDays}</td>
                    <td style="font-weight: bold; color: ${deduction > 0 ? '#ef4444' : '#10b981'};">
                        ${deduction} Ø±ÙŠØ§Ù„
                    </td>
                    <td>${emp.salary} Ø±ÙŠØ§Ù„</td>
                    <td style="font-weight: bold; color: var(--oud-gold);">
                        ${netSalary} Ø±ÙŠØ§Ù„
                    </td>
                `;
                
                tbody.appendChild(row);
            });
        }

        // Ø¯ÙˆØ§Ù„ Ù…Ù‚Ø³Ù… Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ© (Ù…Ø­Ø§ÙƒØ§Ø©)
        function toggleAgentStatus(agentId, currentStatus) {
            console.log(`ğŸ“ ØªØºÙŠÙŠØ± Ø­Ø§Ù„Ø© Ø§Ù„ÙˆÙƒÙŠÙ„ ${agentId} Ù…Ù† ${currentStatus}`);
            showNotification('Ù…ÙŠØ²Ø© Ù…Ù‚Ø³Ù… Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ± ğŸ“', 'info');
        }
        
        function openMaqsamSettings() {
            showNotification('Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ù‚Ø³Ù… Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ± âš™ï¸', 'info');
        }
        
        function saveMaqsamSettings() {
            showNotification('Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ù‚Ø³Ù… Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ± ğŸ’¾', 'info');
        }

        // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
        document.addEventListener('DOMContentLoaded', () => {
            // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ø§Ù„Ø§Ù‡ØªØ²Ø§Ø²
            addShakeAnimation();
            
            // ØªÙ‡ÙŠØ¦Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ£Ø®ÙŠØ± Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©
            if (Object.keys(lateTrackingSystem.lateData).length === 0) {
                lateTrackingSystem.generateSampleData();
                console.log('ğŸ“Š ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ£Ø®ÙŠØ± Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©');
            }
            
            // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© Ø£ÙˆÙ„Ø§Ù‹
            connectionTracker.loadGlobalConnectionData();
            
            // Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø¹Ø¨Ø± Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©
            connectionTracker.setupCrossDeviceMonitoring();
            
            // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ø§Ù„Ø¬Ù„Ø³Ø© Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
            const savedSession = sessionManager.restoreSession();
            if (savedSession) {
                currentUser = savedSession;
                
                // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… - Ù…ØªØµÙ„ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù†Ø¸Ø§Ù… ØªØªØ¨Ø¹ Ø§Ù„Ø§ØªØµØ§Ù„
                connectionTracker.updateUserStatus(currentUser.username, true);
                console.log(`ğŸ”„ Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ø¬Ù„Ø³Ø©: ${currentUser.name} (${currentUser.role}) Ù…ØªØµÙ„ Ø§Ù„Ø¢Ù†`);
                
                // Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
                const loginContainer = document.getElementById('loginContainer');
                const mainContent = document.getElementById('mainContent');
                
                if (loginContainer) {
                    loginContainer.classList.add('hidden');
                    console.log('ğŸ” ØªÙ… Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ (Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ø¬Ù„Ø³Ø©)');
                }
                
                if (mainContent) {
                    mainContent.style.display = 'block';
                    mainContent.style.visibility = 'visible';
                    mainContent.style.opacity = '1';
                    console.log('ğŸ“± ØªÙ… Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ (Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ø¬Ù„Ø³Ø©)');
                }
                
                // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø¹ ØªØ£Ø®ÙŠØ± Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ù†Ø§ØµØ±
                setTimeout(() => {
                    updateUIForUser();
                    console.log(`âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ù€ ${currentUser.name}`);
                }, 200);
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ÙÙˆØ±Ø§Ù‹ Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…ØªØµÙ„ÙŠÙ†
                setTimeout(() => {
                    updateStats();
                    updateAttendanceStats();
                }, 500);
                
                // ØªØ³Ø¬ÙŠÙ„ Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ø§Ù„Ø¬Ù„Ø³Ø© ÙÙŠ Ø§Ù„ÙƒÙˆÙ†Ø³ÙˆÙ„ ÙÙ‚Ø·
                console.log(`ğŸ‰ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ø¹ÙˆØ¯ØªÙƒ ${currentUser.name}!`);
                
                console.log('ğŸ”„ ØªÙ… Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ø§Ù„Ø¬Ù„Ø³Ø© Ø¨Ù†Ø¬Ø§Ø­');
            }
            
            // Ø¥ØµÙ„Ø§Ø­ Ù…Ø´ÙƒÙ„Ø© Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø±Ø§Ø¨Ø· - Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ù…Ù„ Ø§Ù„Ù†Ø¸Ø§Ù… Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©
            try {
                // ÙØ­Øµ Ø¯Ø¹Ù… Ø§Ù„Ù…ØªØµÙØ­ Ù„Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
                if (!localStorage) {
                    console.warn('âš ï¸ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ… ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØµÙØ­');
                }
                
                // ÙØ­Øµ Ø¯Ø¹Ù… CSS Grid
                if (!CSS.supports('display', 'grid')) {
                    console.warn('âš ï¸ CSS Grid ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ… - Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Flexbox');
                    // Ø¥Ø¶Ø§ÙØ© fallback Ù„Ù„Ù…ØªØµÙØ­Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©
                    const style = document.createElement('style');
                    style.textContent = `
                        .stats-container { display: flex; flex-wrap: wrap; }
                        .filters-row { display: flex; flex-wrap: wrap; }
                    `;
                    document.head.appendChild(style);
                }
                
                // ÙØ­Øµ Ø¯Ø¹Ù… Ø§Ù„Ø®Ø·ÙˆØ· Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
                const testDiv = document.createElement('div');
                testDiv.style.fontFamily = 'Cairo, sans-serif';
                testDiv.textContent = 'Ø§Ø®ØªØ¨Ø§Ø±';
                document.body.appendChild(testDiv);
                
                setTimeout(() => {
                    const computedFont = window.getComputedStyle(testDiv).fontFamily;
                    if (!computedFont.includes('Cairo')) {
                        console.warn('âš ï¸ Ø®Ø· Cairo ØºÙŠØ± Ù…Ø­Ù…Ù„ - Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø®Ø· Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ');
                    }
                    document.body.removeChild(testDiv);
                }, 100);
                
                console.log('âœ… ÙØ­Øµ Ø§Ù„ØªÙˆØ§ÙÙ‚ Ù…ÙƒØªÙ…Ù„ - Ø§Ù„Ù†Ø¸Ø§Ù… Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¹Ù…Ù„ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©');
                
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ÙØ­Øµ Ø§Ù„ØªÙˆØ§ÙÙ‚:', error);
            }
            
            // ØªÙ‡ÙŠØ¦Ø© Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ø¶ÙˆØ±
            attendanceSystem.init();
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆÙ‚Øª
            updateTime();
            setInterval(updateTime, 1000);
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ©
            displaySchedule();
            updateStats();
            updateEmployeeTable();
            updateLateReports();
            
            // Ù†Ø¸Ø§Ù… Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„ÙÙˆØ±ÙŠ ÙˆØ§Ù„Ù…Ø³ØªÙ…Ø± Ù„Ù„Ù…Ø¯ÙŠØ±
            const realTimeMonitoring = {
                
                // Ù…Ø±Ø§Ù‚Ø¨Ø© ÙÙˆØ±ÙŠØ© ÙƒÙ„ 5 Ø«ÙˆØ§Ù† Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªØ­Ø¯ÙŠØ«Ø§Øª Ø³Ø±ÙŠØ¹Ø©
                startRealTimeMonitoring() {
                    setInterval(() => {
                        if (currentUser) {
                            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ø´Ø§Ø· Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ
                            connectionTracker.updateCurrentUserActivity();
                            sessionManager.updateActivity();
                            
                            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø¨Ø´ÙƒÙ„ Ù…Ø³ØªÙ…Ø±
                            updateStats();
                            updateAttendanceStats();
                            
                            // Ø¨Ø« Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„ÙÙˆØ±ÙŠØ©
                            connectionTracker.broadcastUpdate();
                        }
                    }, 5000), // ÙƒÙ„ 5 Ø«ÙˆØ§Ù† Ù„Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„ÙÙˆØ±ÙŠØ©
                    
                    // Ù…Ø±Ø§Ù‚Ø¨Ø© Ø£Ø¹Ù…Ù‚ ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø©
                    setInterval(() => {
                        if (currentUser) {
                            // ÙØ­Øµ Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ù…Ù†ØªÙ‡ÙŠØ© Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©
                            connectionTracker.checkExpiredSessions();
                            
                            // Ø·Ø¨Ø§Ø¹Ø© Ø­Ø§Ù„Ø© Ø§Ù„Ù…ØªØµÙ„ÙŠÙ† Ù„Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©
                            const onlineUsers = connectionTracker.getOnlineUsers();
                            const onlineDetails = connectionTracker.getOnlineUsersDetails();
                            console.log(`ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø¯ÙˆØ±ÙŠ - Ø§Ù„Ù…ØªØµÙ„ÙŠÙ†: ${onlineUsers.length}`);
                            onlineDetails.forEach(user => {
                                console.log(`   ğŸŸ¢ ${user.name} - Ù…ØªØµÙ„ Ù…Ù†Ø° ${user.connectionDuration} Ø¯Ù‚ÙŠÙ‚Ø©`);
                            });
                            
                            // Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø¯ÙŠØ± Ø¨Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ù…ØªØµÙ„ÙŠÙ†
                            if (currentUser.role === 'Ù…Ø¯ÙŠØ±' && onlineUsers.length > 0) {
                                console.log('ğŸ‘¨â€ğŸ’¼ Ø§Ù„Ù…Ø¯ÙŠØ± Ù…ØªØµÙ„ - ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ù…ØªØµÙ„ÙŠÙ†');
                            }
                        }
                    }, 60000); // ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø© Ù„Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø¹Ù…ÙŠÙ‚Ø©
                },
                
                // Ù…Ø±Ø§Ù‚Ø¨Ø© ØªØºÙŠÙŠØ±Ø§Øª Ø§Ù„Ø­Ø§Ù„Ø© ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„ÙØ¹Ù„ÙŠ
                watchForStatusChanges() {
                    // Ù…Ø±Ø§Ù‚Ø¨Ø© ØªØºÙŠÙŠØ±Ø§Øª localStorage Ù„Ù„ØªØ²Ø§Ù…Ù† Ø¨ÙŠÙ† Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
                    window.addEventListener('storage', (e) => {
                        if (e.key === 'oudConnectionData') {
                            console.log('ğŸ”„ ØªÙ… Ø§ÙƒØªØ´Ø§Ù ØªØºÙŠÙŠØ± ÙÙŠ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„ Ù…Ù† ØªØ¨ÙˆÙŠØ¨ Ø¢Ø®Ø±');
                            connectionTracker.loadConnectionData();
                            
                            // Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø¯ÙŠØ± Ø¨Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª
                            if (currentUser && currentUser.role === 'Ù…Ø¯ÙŠØ±') {
                                setTimeout(() => {
                                    updateStats();
                                    updateAttendanceStats();
                                }, 500);
                            }
                        }
                    });
                    
                    // Ù…Ø±Ø§Ù‚Ø¨Ø© ØªØºÙŠÙŠØ±Ø§Øª Ø§Ù„Ø´Ø¨ÙƒØ© Ù…Ø¹ Ù…Ø¤Ø´Ø± Ø¨ØµØ±ÙŠ
                    window.addEventListener('online', () => {
                        console.log('ğŸŒ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª Ù…ØªØ§Ø­');
                        this.showNetworkStatus(true);
                        
                        if (currentUser) {
                            connectionTracker.updateUserStatus(currentUser.username, true);
                            // Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¤Ø¬Ù„Ø©
                            sessionManager.syncQueuedData();
                        }
                    });
                    
                    window.addEventListener('offline', () => {
                        console.log('ğŸŒ Ø§Ù†Ù‚Ø·Ø¹ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª');
                        this.showNetworkStatus(false);
                        
                        if (currentUser) {
                            connectionTracker.updateUserStatus(currentUser.username, false);
                        }
                    });
                },

                // Ø¹Ø±Ø¶ Ø­Ø§Ù„Ø© Ø§Ù„Ø´Ø¨ÙƒØ©
                showNetworkStatus(isOnline) {
                    // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…Ø¤Ø´Ø± Ø§Ù„Ø³Ø§Ø¨Ù‚ Ø¥Ù† ÙˆØ¬Ø¯
                    const existingIndicator = document.getElementById('networkIndicator');
                    if (existingIndicator) {
                        existingIndicator.remove();
                    }
                    
                    // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¤Ø´Ø± Ø­Ø§Ù„Ø© Ø§Ù„Ø´Ø¨ÙƒØ©
                    const indicator = document.createElement('div');
                    indicator.id = 'networkIndicator';
                    indicator.style.cssText = `
                        position: fixed;
                        top: 20px;
                        left: 20px;
                        background: ${isOnline ? '#10b981' : '#ef4444'};
                        color: white;
                        padding: 10px 15px;
                        border-radius: 25px;
                        font-family: 'Cairo', sans-serif;
                        font-weight: 600;
                        font-size: 0.9rem;
                        z-index: 20000;
                        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
                        animation: slideInLeft 0.5s ease-out;
                        display: flex;
                        align-items: center;
                        gap: 8px;
                    `;
                    
                    indicator.innerHTML = `
                        <div style="width: 8px; height: 8px; background: white; border-radius: 50%; ${isOnline ? 'animation: pulse 2s infinite;' : ''}"></div>
                        ${isOnline ? 'ğŸŒ Ù…ØªØµÙ„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª' : 'ğŸ“´ ØºÙŠØ± Ù…ØªØµÙ„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª'}
                    `;
                    
                    document.body.appendChild(indicator);
                    
                    // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…Ø¤Ø´Ø± Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù† Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ØªØµÙ„ØŒ Ø£Ùˆ Ø¥Ø¨Ù‚Ø§Ø¤Ù‡ Ø¥Ø°Ø§ ÙƒØ§Ù† ØºÙŠØ± Ù…ØªØµÙ„
                    if (isOnline) {
                        setTimeout(() => {
                            if (document.body.contains(indicator)) {
                                indicator.style.animation = 'slideOutLeft 0.3s ease-in';
                                setTimeout(() => {
                                    if (document.body.contains(indicator)) {
                                        indicator.remove();
                                    }
                                }, 300);
                            }
                        }, 3000);
                    }
                    
                    // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ø§Ù„Ù†Ø¨Ø¶ Ù„Ù„Ø§ØªØµØ§Ù„
                    if (isOnline) {
                        const style = document.createElement('style');
                        style.textContent = `
                            @keyframes pulse {
                                0%, 100% { opacity: 1; }
                                50% { opacity: 0.5; }
                            }
                            @keyframes slideInLeft {
                                0% { transform: translateX(-100%); opacity: 0; }
                                100% { transform: translateX(0); opacity: 1; }
                            }
                            @keyframes slideOutLeft {
                                0% { transform: translateX(0); opacity: 1; }
                                100% { transform: translateX(-100%); opacity: 0; }
                            }
                        `;
                        document.head.appendChild(style);
                    }
                }
            };
            
            // Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„ÙÙˆØ±ÙŠØ©
            realTimeMonitoring.startRealTimeMonitoring();
            realTimeMonitoring.watchForStatusChanges();
            
            // ØªÙ‡ÙŠØ¦Ø© Ù†Ø¸Ø§Ù… Ù…Ù‚Ø³Ù…
            setTimeout(async () => {
                console.log('ğŸ“ Ø¨Ø¯Ø¡ ØªÙ‡ÙŠØ¦Ø© Ù†Ø¸Ø§Ù… Ù…Ù‚Ø³Ù…...');
                await maqsamIntegration.initialize();
                
                // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ù…Ù‚Ø³Ù… Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø¯ÙŠØ± Ù…ØªØµÙ„
                if (currentUser && currentUser.role === 'Ù…Ø¯ÙŠØ±') {
                    updateMaqsamDisplay();
                }
                
                console.log('ğŸ“ ØªÙ… ØªÙ‡ÙŠØ¦Ø© Ù†Ø¸Ø§Ù… Ù…Ù‚Ø³Ù… Ø¨Ù†Ø¬Ø§Ø­');
            }, 3000);
            
            // ØªØ­Ø¯ÙŠØ« ÙÙˆØ±ÙŠ Ù„Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
            setTimeout(() => {
                updateStats();
                updateAttendanceStats();
                console.log('ğŸ“Š ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙÙˆØ±ÙŠ Ù„Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª');
            }, 1000);
            
            // Ø£Ø­Ø¯Ø§Ø« ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
            const loginForm = document.getElementById('loginForm');
            if (loginForm) {
                loginForm.addEventListener('submit', login);
            }
            
            // Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù†Ù…Ø§Ø°Ø¬
            const addEmployeeForm = document.getElementById('addEmployeeForm');
            if (addEmployeeForm) {
                addEmployeeForm.addEventListener('submit', addEmployee);
            }
            
            // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø®Ù„ÙÙŠØ©
            const sidebarOverlay = document.getElementById('sidebarOverlay');
            if (sidebarOverlay) {
                sidebarOverlay.addEventListener('click', closeSidebar);
            }
            
            // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
            document.querySelectorAll('.modal').forEach(modal => {
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.classList.remove('active');
                    }
                });
            });
            
            // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Escape
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    closeSidebar();
                    // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© Ø£ÙŠØ¶Ø§Ù‹
                    document.querySelectorAll('.modal.active').forEach(modal => {
                        modal.classList.remove('active');
                    });
                }
            });
            
            // ÙØ­Øµ Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø¬Ø¯ÙŠØ¯ ÙƒÙ„ Ø³Ø§Ø¹Ø©
            setInterval(() => {
                attendanceSystem.checkNewDay();
            }, 3600000); // ÙƒÙ„ Ø³Ø§Ø¹Ø©
            
            // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© ÙƒÙ„ ÙŠÙˆÙ…
            setInterval(() => {
                attendanceSystem.cleanOldData();
            }, 24 * 60 * 60 * 1000); // ÙƒÙ„ 24 Ø³Ø§Ø¹Ø©
            
            console.log('ğŸŒŸ Ù†Ø¸Ø§Ù… Ù†Ø®Ø¨Ø© Ø§Ù„Ø¹ÙˆØ¯ Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¹Ù…Ù„!');
            console.log('ğŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø§Ù„ÙŠ:', attendanceSystem.currentDate);
            console.log('ğŸ‘¥ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†:', Object.keys(users).length);
            console.log('ğŸ’¾ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©:', Object.keys(attendanceSystem.attendanceData).length, 'ÙŠÙˆÙ…');
            console.log('ğŸ”‘ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…ØªØ§Ø­Ø©:', Object.keys(users));
            console.log('ğŸ“ Ø¬Ù…ÙŠØ¹ ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ±: 123');
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9651b239f14352c7',t:'MTc1MzUwOTgzMS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
